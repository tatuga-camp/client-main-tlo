!function(){"use strict";let t,r,n,o,a,l;var i,s,d,c,u,m,g,f,p,h,b,v=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var r=typeof t;return"object"===r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r},y=function(t){return{eq:t}},C=y(function(t,r){return t===r}),E=function(t){return y(function(r,n){if(r.length!==n.length)return!1;for(var o=r.length,a=0;a<o;a++)if(!t.eq(r[a],n[a]))return!1;return!0})},w=function(t){return y(function(r,n){var o,a,l=Object.keys(r),i=Object.keys(n);if(!(o=E(C),a=function(t){var r;return r=void 0,Array.prototype.slice.call(t).sort(r)},y(function(t,r){return o.eq(a(t),a(r))})).eq(l,i))return!1;for(var s=l.length,d=0;d<s;d++){var c=l[d];if(!t.eq(r[c],n[c]))return!1}return!0})},x=y(function(t,r){if(t===r)return!0;var n=v(t);return n===v(r)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===r:"array"===n?E(x).eq(t,r):"object"===n&&w(x).eq(t,r))});let _=Object.getPrototypeOf,k=(t,r,n)=>{var o;return!!n(t,r.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===r.name},S=t=>r=>(t=>{let r=typeof t;return null===t?"null":"object"===r&&Array.isArray(t)?"array":"object"===r&&k(t,String,(t,r)=>r.isPrototypeOf(t))?"string":r})(r)===t,N=t=>r=>typeof r===t,R=t=>r=>t===r,A=(t,r)=>O(t)&&k(t,r,(t,r)=>_(t)===r),T=S("string"),O=S("object"),B=t=>A(t,Object),P=S("array"),D=R(null),L=N("boolean"),M=R(void 0),F=t=>null==t,I=t=>!F(t),U=N("function"),z=N("number"),j=(t,r)=>{if(P(t)){for(let n=0,o=t.length;n<o;++n)if(!r(t[n]))return!1;return!0}return!1},H=()=>{},$=(t,r)=>(...n)=>t(r.apply(null,n)),V=(t,r)=>n=>t(r(n)),q=t=>()=>t,W=t=>t,K=(t,r)=>t===r;function Y(t,...r){return(...n)=>{let o=r.concat(n);return t.apply(null,o)}}let G=t=>r=>!t(r),X=t=>()=>{throw Error(t)},Z=t=>t(),Q=t=>{t()},J=q(!1),ee=q(!0);class et{constructor(t,r){this.tag=t,this.value=r}static some(t){return new et(!0,t)}static none(){return et.singletonNone}fold(t,r){return this.tag?r(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?et.some(t(this.value)):et.none()}bind(t){return this.tag?t(this.value):et.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:et.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return I(t)?et.some(t):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);let er=Array.prototype.slice,en=Array.prototype.indexOf,eo=Array.prototype.push,ea=(t,r)=>en.call(t,r),el=(t,r)=>ea(t,r)>-1,ei=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return!0;return!1},es=(t,r)=>{let n=t.length,o=Array(n);for(let a=0;a<n;a++){let n=t[a];o[a]=r(n,a)}return o},ed=(t,r)=>{for(let n=0,o=t.length;n<o;n++)r(t[n],n)},ec=(t,r)=>{for(let n=t.length-1;n>=0;n--)r(t[n],n)},eu=(t,r)=>{let n=[],o=[];for(let a=0,l=t.length;a<l;a++){let l=t[a];(r(l,a)?n:o).push(l)}return{pass:n,fail:o}},em=(t,r)=>{let n=[];for(let o=0,a=t.length;o<a;o++){let a=t[o];r(a,o)&&n.push(a)}return n},eg=(t,r,n)=>(ec(t,(t,o)=>{n=r(n,t,o)}),n),ef=(t,r,n)=>(ed(t,(t,o)=>{n=r(n,t,o)}),n),ep=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++){let a=t[o];if(r(a,o))return et.some(a);if(n(a,o))break}return et.none()},eh=(t,r)=>ep(t,r,J),eb=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return et.some(n);return et.none()},ev=t=>{let r=[];for(let n=0,o=t.length;n<o;++n){if(!P(t[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+t);eo.apply(r,t[n])}return r},ey=(t,r)=>ev(es(t,r)),eC=(t,r)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==r(t[n],n))return!1;return!0},eE=t=>{let r=er.call(t,0);return r.reverse(),r},ew=(t,r)=>em(t,t=>!el(r,t)),ex=(t,r)=>{let n={};for(let o=0,a=t.length;o<a;o++){let a=t[o];n[String(a)]=r(a,o)}return n},e_=(t,r)=>{let n=er.call(t,0);return n.sort(r),n},ek=(t,r)=>r>=0&&r<t.length?et.some(t[r]):et.none(),eS=t=>ek(t,0),eN=t=>ek(t,t.length-1),eR=U(Array.from)?Array.from:t=>er.call(t),eA=(t,r)=>{for(let n=0;n<t.length;n++){let o=r(t[n],n);if(o.isSome())return o}return et.none()},eT=(t,r)=>{let n=[],o=U(r)?t=>ei(n,n=>r(n,t)):t=>el(n,t);for(let r=0,a=t.length;r<a;r++){let a=t[r];o(a)||n.push(a)}return n},eO=Object.keys,eB=Object.hasOwnProperty,eP=(t,r)=>{let n=eO(t);for(let o=0,a=n.length;o<a;o++){let a=n[o];r(t[a],a)}},eD=(t,r)=>eL(t,(t,n)=>({k:n,v:r(t,n)})),eL=(t,r)=>{let n={};return eP(t,(t,o)=>{let a=r(t,o);n[a.k]=a.v}),n},eM=t=>(r,n)=>{t[n]=r},eF=(t,r,n,o)=>{eP(t,(t,a)=>{(r(t,a)?n:o)(t,a)})},eI=(t,r)=>{let n={};return eF(t,r,eM(n),H),n},eU=(t,r)=>{let n=[];return eP(t,(t,o)=>{n.push(r(t,o))}),n},ez=t=>eU(t,W),ej=(t,r)=>eH(t,r)?et.from(t[r]):et.none(),eH=(t,r)=>eB.call(t,r),e$=(t,r)=>eH(t,r)&&void 0!==t[r]&&null!==t[r],eV=t=>{let r={};return ed(t,t=>{r[t]={}}),eO(r)},eq=t=>void 0!==t.length,eW=Array.isArray,eK=(t,r,n)=>{if(!t)return!1;if(n=n||t,eq(t)){for(let o=0,a=t.length;o<a;o++)if(!1===r.call(n,t[o],o,t))return!1}else for(let o in t)if(eH(t,o)&&!1===r.call(n,t[o],o,t))return!1;return!0},eY=(t,r)=>{let n=[];return eK(t,(o,a)=>{n.push(r(o,a,t))}),n},eG=(t,r)=>{let n=[];return eK(t,(o,a)=>{r&&!r(o,a,t)||n.push(o)}),n},eX=(t,r,n,o)=>{let a=M(n)?t[0]:n;for(let n=0;n<t.length;n++)a=r.call(o,a,t[n],n);return a},eZ=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++)if(r.call(n,t[o],o,t))return o;return -1},eQ=t=>t[t.length-1],eJ=t=>{let r,n=!1;return(...o)=>(n||(n=!0,r=t.apply(null,o)),r)},e0=()=>e1(0,0),e1=(t,r)=>({major:t,minor:r}),e2=(t,r)=>{let n=String(r).toLowerCase();return 0===t.length?e0():((t,r)=>{let n=((t,r)=>{for(let n=0;n<t.length;n++){let o=t[n];if(o.test(r))return o}})(t,r);if(!n)return{major:0,minor:0};let o=t=>Number(r.replace(n,"$"+t));return e1(o(1),o(2))})(t,n)},e3=(t,r)=>{let n=String(r).toLowerCase();return eh(t,t=>t.search(n))},e8=(t,r,n)=>""===r||t.length>=r.length&&t.substr(n,n+r.length)===r,e5=(t,r)=>{let n;return e4(t,r)?(n=r.length,t.substring(n)):t},e6=(t,r,n=0,o)=>{let a=t.indexOf(r,n);return -1!==a&&(!!M(o)||a+r.length<=o)},e4=(t,r)=>e8(t,r,0),e9=(t,r)=>e8(t,r,t.length-r.length),e7=t=>r=>r.replace(t,""),te=e7(/^\s+|\s+$/g),tt=e7(/^\s+/g),tr=e7(/\s+$/g),tn=t=>t.length>0,to=t=>!tn(t),ta=(t,r=10)=>{let n=parseInt(t,r);return isNaN(n)?et.none():et.some(n)},tl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ti=t=>r=>e6(r,t),ts=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>e6(t,"edge/")&&e6(t,"chrome")&&e6(t,"safari")&&e6(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tl],search:t=>e6(t,"chrome")&&!e6(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>e6(t,"msie")||e6(t,"trident")},{name:"Opera",versionRegexes:[tl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ti("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ti("firefox")},{name:"Safari",versionRegexes:[tl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(e6(t,"safari")||e6(t,"mobile/"))&&e6(t,"applewebkit")}],td=[{name:"Windows",search:ti("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>e6(t,"iphone")||e6(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ti("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ti("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ti("linux"),versionRegexes:[]},{name:"Solaris",search:ti("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ti("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ti("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tc={browsers:q(ts),oses:q(td)},tu="Edge",tm="Chromium",tg="Opera",tf="Firefox",tp="Safari",th=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isEdge:o(tu),isChromium:o(tm),isIE:o("IE"),isOpera:o(tg),isFirefox:o(tf),isSafari:o(tp)}},tb=()=>th({current:void 0,version:e0()}),tv=(q(tu),q(tm),q("IE"),q(tg),q(tf),q(tp),"Windows"),ty="Android",tC="Linux",tE="macOS",tw="Solaris",tx="FreeBSD",t_="ChromeOS",tk=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isWindows:o(tv),isiOS:o("iOS"),isAndroid:o(ty),isMacOS:o(tE),isLinux:o(tC),isSolaris:o(tw),isFreeBSD:o(tx),isChromeOS:o(t_)}},tS=()=>tk({current:void 0,version:e0()}),tN=(q(tv),q("iOS"),q(ty),q(tC),q(tE),q(tw),q(tx),q(t_),t=>window.matchMedia(t).matches),tR=eJ(()=>((t,r,n)=>{let o=tc.browsers(),a=tc.oses(),l=r.bind(t=>eA(t.brands,t=>{let r=t.brand.toLowerCase();return eh(o,t=>{var n;return r===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())}).map(r=>({current:r.name,version:e1(parseInt(t.version,10),0)}))})).orThunk(()=>e3(o,t).map(r=>{let n=e2(r.versionRegexes,t);return{current:r.name,version:n}})).fold(tb,th),i=e3(a,t).map(r=>{let n=e2(r.versionRegexes,t);return{current:r.name,version:n}}).fold(tS,tk),s=((t,r,n,o)=>{let a=t.isiOS()&&!0===/ipad/i.test(n),l=t.isiOS()&&!a,i=t.isiOS()||t.isAndroid(),s=i||o("(pointer:coarse)"),d=a||!l&&i&&o("(min-device-width:768px)"),c=l||i&&!d,u=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:q(a),isiPhone:q(l),isTablet:q(d),isPhone:q(c),isTouch:q(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(u),isDesktop:q(!c&&!d&&!u)}})(i,l,t,n);return{browser:l,os:i,deviceType:s}})(navigator.userAgent,et.from(navigator.userAgentData),tN)),tA=()=>tR(),tT=navigator.userAgent,tO=tA(),tB=tO.browser,tP=tO.os,tD=tO.deviceType,tL=-1!==tT.indexOf("Windows Phone"),tM={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tB.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tB.isIE(),windowsPhone:tL,browser:{current:tB.current,version:tB.version,isChromium:tB.isChromium,isEdge:tB.isEdge,isFirefox:tB.isFirefox,isIE:tB.isIE,isOpera:tB.isOpera,isSafari:tB.isSafari},os:{current:tP.current,version:tP.version,isAndroid:tP.isAndroid,isChromeOS:tP.isChromeOS,isFreeBSD:tP.isFreeBSD,isiOS:tP.isiOS,isLinux:tP.isLinux,isMacOS:tP.isMacOS,isSolaris:tP.isSolaris,isWindows:tP.isWindows},deviceType:{isDesktop:tD.isDesktop,isiPad:tD.isiPad,isiPhone:tD.isiPhone,isPhone:tD.isPhone,isTablet:tD.isTablet,isTouch:tD.isTouch,isWebView:tD.isWebView}},tF=/^\s*|\s*$/g,tI=t=>F(t)?"":(""+t).replace(tF,""),tU=function(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),eK(t,(t,a)=>!1!==r.call(o,t,a,n)&&(tU(t,r,n,o),!0)))},tz={trim:tI,isArray:eW,is:(t,r)=>r?!("array"!==r||!eW(t))||typeof t===r:void 0!==t,toArray:t=>{if(eW(t))return t;{let r=[];for(let n=0,o=t.length;n<o;n++)r[n]=t[n];return r}},makeMap:(t,r,n={})=>{let o=T(t)?t.split(r||","):t||[],a=o.length;for(;a--;)n[o[a]]={};return n},each:eK,map:eY,grep:eG,inArray:(t,r)=>{if(t){for(let n=0,o=t.length;n<o;n++)if(t[n]===r)return n}return -1},hasOwn:eH,extend:(t,...r)=>{for(let n=0;n<r.length;n++){let o=r[n];for(let r in o)if(eH(o,r)){let n=o[r];void 0!==n&&(t[r]=n)}}return t},walk:tU,resolve:(t,r=window)=>{let n=t.split(".");for(let t=0,o=n.length;t<o&&(r=r[n[t]]);t++);return r},explode:(t,r)=>P(t)?t:""===t?[]:eY(t.split(r||","),tI),_addCacheSuffix:t=>{let r=tM.cacheSuffix;return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},tj=(t,r,n=K)=>t.exists(t=>n(t,r)),tH=(t,r,n=K)=>t$(t,r,n).getOr(t.isNone()&&r.isNone()),t$=(t,r,n)=>t.isSome()&&r.isSome()?et.some(n(t.getOrDie(),r.getOrDie())):et.none(),tV=(t,r)=>t?et.some(r):et.none(),tq="undefined"!=typeof window?window:Function("return this;")(),tW=(t,r)=>((t,r)=>{let n=null!=r?r:tq;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n})(t.split("."),r),tK=Object.getPrototypeOf,tY=t=>{let r=tW("ownerDocument.defaultView",t);return O(t)&&(((t,r)=>{let n=tW(t,r);if(null==n)throw Error(t+" not available on this browser");return n})("HTMLElement",r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(tK(t).constructor.name))},tG=t=>t.dom.nodeName.toLowerCase(),tX=t=>t.dom.nodeType,tZ=t=>r=>tX(r)===t,tQ=t=>tJ(t)&&tY(t.dom),tJ=tZ(1),t0=tZ(3),t1=tZ(9),t2=tZ(11),t3=t=>r=>tJ(r)&&tG(r)===t,t8=(t,r,n)=>{if(!(T(n)||L(n)||z(n)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",n,":: Element ",t),Error("Attribute value was not simple");t.setAttribute(r,n+"")},t5=(t,r,n)=>{t8(t.dom,r,n)},t6=(t,r)=>{let n=t.dom;eP(r,(t,r)=>{t8(n,r,t)})},t4=(t,r)=>{let n=t.dom.getAttribute(r);return null===n?void 0:n},t9=(t,r)=>et.from(t4(t,r)),t7=(t,r)=>{let n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(r)},re=(t,r)=>{t.dom.removeAttribute(r)},rt=t=>ef(t.dom.attributes,(t,r)=>(t[r.name]=r.value,t),{}),rr=(t,r)=>{let n=t4(t,r);return void 0===n||""===n?[]:n.split(" ")},rn=t=>void 0!==t.dom.classList,ro=t=>rr(t,"class"),ra=(t,r)=>((t,r,n)=>{let o=rr(t,r).concat([n]);return t5(t,r,o.join(" ")),!0})(t,"class",r),rl=(t,r)=>((t,r,n)=>{let o=em(rr(t,r),t=>t!==n);return o.length>0?t5(t,r,o.join(" ")):re(t,r),!1})(t,"class",r),ri=(t,r)=>{rn(t)?t.dom.classList.add(r):ra(t,r)},rs=t=>{0===(rn(t)?t.dom.classList:ro(t)).length&&re(t,"class")},rd=(t,r)=>{rn(t)?t.dom.classList.remove(r):rl(t,r),rs(t)},rc=(t,r)=>rn(t)&&t.dom.classList.contains(r),ru=t=>{if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}},rm=(t,r)=>{let n=(r||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){let r="HTML does not have a single root node";throw console.error(r,t),Error(r)}return ru(n.childNodes[0])},rg=(t,r)=>ru((r||document).createElement(t)),rf=(t,r)=>ru((r||document).createTextNode(t)),rp=(t,r,n)=>et.from(t.dom.elementFromPoint(r,n)).map(ru),rh=(t,r)=>{let n=[],o=t=>(n.push(t),r(t)),a=r(t);do a=a.bind(o);while(a.isSome());return n},rb=(t,r)=>{let n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(r);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(r);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(r);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(r);throw Error("Browser lacks native selectors")},rv=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ry=(t,r)=>t.dom===r.dom,rC=(t,r)=>{let n=t.dom,o=r.dom;return n!==o&&n.contains(o)},rE=t=>ru(t.dom.ownerDocument),rw=t=>t1(t)?t:rE(t),rx=t=>ru(rw(t).dom.defaultView),r_=t=>et.from(t.dom.parentNode).map(ru),rk=t=>et.from(t.dom.parentElement).map(ru),rS=(t,r)=>{let n=U(r)?r:J,o=t.dom,a=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let t=o.parentNode,r=ru(t);if(a.push(r),!0===n(r))break;o=t}return a},rN=t=>et.from(t.dom.previousSibling).map(ru),rR=t=>et.from(t.dom.nextSibling).map(ru),rA=t=>eE(rh(t,rN)),rT=t=>rh(t,rR),rO=t=>es(t.dom.childNodes,ru),rB=(t,r)=>{let n=t.dom.childNodes;return et.from(n[r]).map(ru)},rP=t=>rB(t,0),rD=t=>rB(t,t.dom.childNodes.length-1),rL=t=>t.dom.childNodes.length,rM=t=>t2(t)&&I(t.dom.host),rF=U(Element.prototype.attachShadow)&&U(Node.prototype.getRootNode),rI=q(rF),rU=rF?t=>ru(t.dom.getRootNode()):rw,rz=t=>rM(t)?t:(t=>{let r=t.dom.head;if(null==r)throw Error("Head is not available yet");return ru(r)})(rw(t)),rj=t=>ru(t.dom.host),rH=t=>{if(rI()&&I(t.target)){let r=ru(t.target);if(tJ(r)&&r$(r)&&t.composed&&t.composedPath){let r=t.composedPath();if(r)return eS(r)}}return et.from(t.target)},r$=t=>I(t.dom.shadowRoot),rV=t=>{let r=t0(t)?t.dom.parentNode:t.dom;if(null==r||null===r.ownerDocument)return!1;let n=r.ownerDocument;return(t=>{let r=rU(t);return rM(r)?et.some(r):et.none()})(ru(r)).fold(()=>n.body.contains(r),V(rV,rj))};var rq=(t,r,n,o,a)=>t(n,o)?et.some(n):U(a)&&a(n)?et.none():r(n,o,a);let rW=(t,r,n)=>{let o=t.dom,a=U(n)?n:J;for(;o.parentNode;){let t=ru(o=o.parentNode);if(r(t))return et.some(t);if(a(t))break}return et.none()},rK=(t,r,n)=>rq((t,r)=>r(t),rW,t,r,n),rY=(t,r)=>{let n=t=>{for(let o=0;o<t.childNodes.length;o++){let a=ru(t.childNodes[o]);if(r(a))return et.some(a);let l=n(t.childNodes[o]);if(l.isSome())return l}return et.none()};return n(t.dom)},rG=(t,r,n)=>rW(t,t=>rb(t,r),n),rX=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rv(n)?et.none():et.from(n.querySelector(t)).map(ru)})(r,t),rZ=(t,r,n)=>rq((t,r)=>rb(t,r),rG,t,r,n),rQ=(t,r=!1)=>rV(t)?t.dom.isContentEditable:rZ(t,"[contenteditable]").fold(q(r),t=>"true"===rJ(t)),rJ=t=>t.dom.contentEditable,r0=t=>void 0!==t.style&&U(t.style.getPropertyValue),r1=(t,r,n)=>{if(!T(n))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",n,":: Element ",t),Error("CSS value must be a string: "+n);r0(t)&&t.style.setProperty(r,n)},r2=(t,r,n)=>{r1(t.dom,r,n)},r3=(t,r)=>{let n=t.dom;eP(r,(t,r)=>{r1(n,r,t)})},r8=(t,r)=>{let n=t.dom,o=window.getComputedStyle(n).getPropertyValue(r);return""!==o||rV(t)?o:r5(n,r)},r5=(t,r)=>r0(t)?t.style.getPropertyValue(r):"",r6=(t,r)=>{let n=r5(t.dom,r);return et.from(n).filter(t=>t.length>0)},r4=t=>{let r={},n=t.dom;if(r0(n))for(let t=0;t<n.style.length;t++){let o=n.style.item(t);r[o]=n.style[o]}return r},r9=(t,r)=>{var n;r0(n=t.dom)&&n.style.removeProperty(r),tj(t9(t,"style").map(te),"")&&re(t,"style")},r7=(t,r)=>{r_(t).each(n=>{n.dom.insertBefore(r.dom,t.dom)})},ne=(t,r)=>{rR(t).fold(()=>{r_(t).each(t=>{nr(t,r)})},t=>{r7(t,r)})},nt=(t,r)=>{rP(t).fold(()=>{nr(t,r)},n=>{t.dom.insertBefore(r.dom,n.dom)})},nr=(t,r)=>{t.dom.appendChild(r.dom)},nn=(t,r)=>{r7(t,r),nr(r,t)},no=(t,r)=>{ed(r,r=>{nr(t,r)})},na=t=>{t.dom.textContent="",ed(rO(t),t=>{nl(t)})},nl=t=>{let r=t.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},ni=t=>{let r=rO(t);r.length>0&&ed(r,(n,o)=>{ne(0===o?t:r[o-1],n)}),nl(t)},ns=t=>es(t,ru),nd=t=>t.dom.innerHTML,nc=(t,r)=>{let n=rE(t).dom,o=ru(n.createDocumentFragment());no(o,((t,r)=>{let n=(r||document).createElement("div");return n.innerHTML=t,rO(ru(n))})(r,n)),na(t),nr(t,o)},nu=(t,r,n,o)=>((t,r,n,o,a)=>{let l=t=>{n(t)&&o((t=>{let r=ru(rH(t).getOr(t.target)),n=()=>t.stopPropagation(),o=()=>t.preventDefault(),a=$(o,n);return{target:r,x:t.clientX,y:t.clientY,stop:n,prevent:o,kill:a,raw:t}})(t))};return t.dom.addEventListener(r,l,!1),{unbind:Y(nm,t,r,l,!1)}})(t,r,n,o),nm=(t,r,n,o)=>{t.dom.removeEventListener(r,n,o)},ng=(t,r)=>({left:t,top:r,translate:(n,o)=>ng(t+n,r+o)}),nf=(t,r)=>void 0!==t?t:void 0!==r?r:0,np=t=>{let r=t.dom,n=r.ownerDocument.body;return n===r?ng(n.offsetLeft,n.offsetTop):rV(t)?(t=>{let r=t.getBoundingClientRect();return ng(r.left,r.top)})(r):ng(0,0)},nh=t=>{let r=void 0!==t?t.dom:document;return ng(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},nb=(t,r,n)=>{let o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,r)},nv=(t,r)=>{tA().browser.isSafari()&&U(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(r)},ny=(t,r,n,o)=>({x:t,y:r,width:n,height:o,right:t+n,bottom:r+o}),nC=t=>{let r=void 0===t?window:t,n=nh(ru(r.document));return(t=>{let r=void 0===t?window:t;return tA().browser.isFirefox()?et.none():et.from(r.visualViewport)})(r).fold(()=>{let t=r.document.documentElement,o=t.clientWidth,a=t.clientHeight;return ny(n.left,n.top,o,a)},t=>ny(Math.max(t.pageLeft,n.left),Math.max(t.pageTop,n.top),t.width,t.height))},nE=(t,r)=>{let n=[];return ed(rO(t),t=>{r(t)&&(n=n.concat([t])),n=n.concat(nE(t,r))}),n},nw=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rv(n)?[]:es(n.querySelectorAll(t),ru)})(r,t),nx=(t,r,n)=>rW(t,r,n).isSome(),n_=(t,r)=>((t,r)=>{let n,o;let a=t.dom;return a.parentNode?(n=ru(a.parentNode),o=n=>!ry(t,n)&&r(n),eh(n.dom.childNodes,t=>o(ru(t))).map(ru)):et.none()})(t,r).isSome(),nk=(t,r)=>rY(t,r).isSome();class nS{constructor(t,r){this.node=t,this.rootNode=r,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,r,n,o){if(t){if(!o&&t[r])return t[r];if(t!==this.rootNode){let r=t[n];if(r)return r;for(let o=t.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(r=o[n])return r}}}findPreviousNode(t,r){if(t){let n=t.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!r){for(let t=n.lastChild;t;t=t.lastChild)if(!t.lastChild)return t}return n}let o=t.parentNode;if(o&&o!==this.rootNode)return o}}}let nN=t=>"\uFEFF"===t,nR=/^[ \t\r\n]*$/,nA=t=>nR.test(t),nT=t=>"\n"===t||"\r"===t,nO=(t,r=4,n=!0,o=!0)=>{let a=r<=0?"":Array(r+1).join(" "),l=t.replace(/\t/g,a);return ef(l,(t,r)=>{let a;return -1!==" \f	\v".indexOf(r)||"\xa0"===r?t.pcIsSpace||""===t.str&&n||t.str.length===l.length-1&&o||(a=t.str.length+1)<l.length&&a>=0&&nT(l[a])?{pcIsSpace:!1,str:t.str+"\xa0"}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:nT(r),str:t.str+r}},{pcIsSpace:!1,str:""}).str},nB=t=>r=>!!r&&r.nodeType===t,nP=t=>!!t&&!Object.getPrototypeOf(t),nD=nB(1),nL=t=>nD(t)&&tQ(ru(t)),nM=t=>{let r=t.toLowerCase();return t=>I(t)&&t.nodeName.toLowerCase()===r},nF=t=>{let r=t.map(t=>t.toLowerCase());return t=>!!t&&!!t.nodeName&&el(r,t.nodeName.toLowerCase())},nI=(t,r)=>{let n=r.toLowerCase().split(" ");return r=>{if(nD(r)){let o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){let l=o.getComputedStyle(r,null);if((l?l.getPropertyValue(t):null)===n[a])return!0}}return!1}},nU=t=>nD(t)&&t.hasAttribute("data-mce-bogus"),nz=t=>nD(t)&&"TABLE"===t.tagName,nj=t=>r=>!!nL(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t),nH=nF(["textarea","input"]),n$=nB(3),nV=nB(4),nq=nB(7),nW=nB(8),nK=nB(9),nY=nB(11),nG=nM("br"),nX=nM("img"),nZ=nj("true"),nQ=nj("false"),nJ=nF(["td","th"]),n0=nF(["td","th","caption"]),n1=nF(["video","audio","object","embed"]),n2=nM("li"),n3=nM("details"),n8=nM("summary"),n5={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},n6=t=>nD(t)&&t.hasAttribute("data-mce-bookmark"),n4=(t,r,n,o)=>n$(t)&&(!nA(t.data)||!!((t,r,n)=>{let o=ru(r),a=ru(t),l=n.getWhitespaceElements();return nx(a,t=>eH(l,tG(t)),Y(ry,o))})(t,r,n))&&(!o.includeZwsp||!(t=>{for(let r of t)if(!nN(r))return!1;return!0})(t.data)),n9=(t,r,n,o)=>U(o.isContent)&&o.isContent(r)||nD(r)&&eH(t.getNonEmptyElements(),r.nodeName)||n6(r)||nD(r)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id"))||n4(r,n,t,o)||nQ(r)||nZ(r)&&rk(ru(r)).exists(t=>!rQ(t)),n7=(t,r,n)=>{let o={...n5,...n};if(o.checkRootAsContent&&n9(t,r,r,o))return!1;let a=r.firstChild,l=0;if(!a)return!0;let i=new nS(a,r);do{if(o.skipBogus&&nD(a)){let t=a.getAttribute("data-mce-bogus");if(t){a=i.next("all"===t);continue}}if(nW(a))a=i.next(!0);else if(nG(a))l++,a=i.next();else{if(n9(t,a,r,o))return!1;a=i.next()}}while(a);return l<=1},oe=(t,r,n)=>n7(t,r.dom,{checkRootAsContent:!0,...n}),ot=(t,r,n)=>n9(t,r,r,{includeZwsp:n5.includeZwsp,...n}),or=t=>{let r=t;return{get:()=>r,set:t=>{r=t}}},on=t=>{let r=or(et.none()),n=()=>r.get().each(t=>clearInterval(t));return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:o=>{n(),r.set(et.some(setInterval(o,t)))}}},oo=()=>{let t=(t=>{let r=or(et.none()),n=()=>r.get().each(t);return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:t=>{n(),r.set(et.some(t))}}})(H);return{...t,on:r=>t.get().each(r)}},oa=t=>{let r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":"html"},ol=t=>"html"!==oa(t),oi=t=>ol(t.nodeName),os=t=>oa(t.nodeName),od=["svg","math"],oc="data-mce-block",ou=t=>es(em(eO(t),t=>!/[A-Z]/.test(t)),t=>{let r=CSS.escape(t);return`${r}:`+es(od,t=>`not(${t} ${r})`).join(":")}).join(","),om=(t,r)=>I(r.querySelector(t))?(r.setAttribute(oc,"true"),"inline-boundary"===r.getAttribute("data-mce-selected")&&r.removeAttribute("data-mce-selected"),!0):(r.removeAttribute(oc),!1),og=(t,r)=>{let n=ou(t.getTransparentElements()),o=ou(t.getBlockElements());return em(r.querySelectorAll(n),t=>om(o,t))},of=(t,r,n)=>{var o;let a=n?"lastChild":"firstChild";for(let n=r[a];n;n=n[a])if(n7(t,n,{checkRootAsContent:!0}))return void(null===(o=n.parentNode)||void 0===o||o.removeChild(n))},op=(t,r,n)=>{let o=t.getBlockElements(),a=ru(r),l=t=>tG(t) in o,i=t=>ry(t,a);ed(ns(n),r=>{rW(r,l,i).each(n=>{let o=em(rO(r),r=>l(r)&&!t.isValidChild(tG(n),tG(r)));if(o.length>0){let r=rk(n);ed(o,r=>{rW(r,l,i).each(n=>{((t,r,n)=>{let o=document.createRange(),a=r.parentNode;if(a){o.setStartBefore(r),o.setEndBefore(n);let l=o.extractContents();of(t,l,!0),o.setStartAfter(n),o.setEndAfter(r);let i=o.extractContents();of(t,i,!1),n7(t,l,{checkRootAsContent:!0})||a.insertBefore(l,r),n7(t,n,{checkRootAsContent:!0})||a.insertBefore(n,r),n7(t,i,{checkRootAsContent:!0})||a.insertBefore(i,r),a.removeChild(r)}})(t,n.dom,r.dom)})}),r.each(r=>og(t,r.dom))}})})},oh=(t,r)=>{let n=og(t,r);op(t,r,n),ed([...n,...oE(t,r)?[r]:[]],r=>ed(nw(ru(r),r.nodeName.toLowerCase()),r=>{ow(t,r.dom)&&ni(r)}))},ob=(t,r)=>{oC(t,r)&&om(ou(t.getBlockElements()),r)},ov=t=>t.hasAttribute(oc),oy=(t,r)=>eH(t.getTransparentElements(),r),oC=(t,r)=>nD(r)&&oy(t,r.nodeName),oE=(t,r)=>oC(t,r)&&ov(r),ow=(t,r)=>oC(t,r)&&!ov(r),ox=(t,r)=>1===r.type&&oy(t,r.name)&&T(r.attr(oc)),o_=tA().browser,ok=t=>eh(t,tJ),oS=(t,r)=>t.children&&el(t.children,r),oN=(t,r={})=>{let n=0,o={},a=ru(t),l=rw(a),i=t=>{nr(rz(a),t)},s=t=>{rX(rz(a),"#"+t).each(nl)},d=t=>ej(o,t).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=t=>new Promise((n,a)=>{let s;let c=tz._addCacheSuffix(t),u=d(c);o[c]=u,u.count++;let m=(t,r)=>{ed(t,Q),u.status=r,u.passed=[],u.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},g=()=>m(u.passed,2),f=()=>m(u.failed,3);if(n&&u.passed.push(n),a&&u.failed.push(a),1===u.status)return;if(2===u.status)return void g();if(3===u.status)return void f();u.status=1;let p=rg("link",l.dom);t6(p,{rel:"stylesheet",type:"text/css",id:u.id}),r.contentCssCors&&t5(p,"crossOrigin","anonymous"),r.referrerPolicy&&t5(p,"referrerpolicy",r.referrerPolicy),(s=p.dom).onload=g,s.onerror=f,i(p),t5(p,"href",c)}),u=t=>{let r=tz._addCacheSuffix(t);ej(o,r).each(t=>{0==--t.count&&(delete o[r],s(t.id))})};return{load:c,loadRawCss:(t,r)=>{let n=d(t);o[t]=n,n.count++;let a=rg("style",l.dom);t6(a,{rel:"stylesheet",type:"text/css",id:n.id}),a.dom.innerHTML=r,i(a)},loadAll:t=>Promise.allSettled(es(t,t=>c(t).then(q(t)))).then(t=>{let r=eu(t,t=>"fulfilled"===t.status);return r.fail.length>0?Promise.reject(es(r.fail,t=>t.reason)):es(r.pass,t=>t.value)}),unload:u,unloadRawCss:t=>{ej(o,t).each(r=>{0==--r.count&&(delete o[t],s(r.id))})},unloadAll:t=>{ed(t,t=>{u(t)})},_setReferrerPolicy:t=>{r.referrerPolicy=t},_setContentCssCors:t=>{r.contentCssCors=t}}},oR=(()=>{let t=new WeakMap;return{forElement:(r,n)=>{let o=rU(r).dom;return et.from(t.get(o)).getOrThunk(()=>{let r=oN(o,n);return t.set(o,r),r})}}})(),oA=(t,r)=>I(t)&&(ot(r,t)||r.isInline(t.nodeName.toLowerCase())),oT=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),oO=(t,r,n,o)=>{var a;let l=o||r;if(nD(r)&&oT(r))return r;let i=r.childNodes;for(let r=i.length-1;r>=0;r--)oO(t,i[r],n,l);if(nD(r)){let t=r.childNodes;1===t.length&&oT(t[0])&&(null===(a=r.parentNode)||void 0===a||a.insertBefore(t[0],r))}return nY(r)||nK(r)||ot(n,r)||nD(r)&&r.childNodes.length>0||n$(r)&&r.data.length>0&&((t,r,n)=>{let o=new nS(t,r).prev(!1),a=new nS(t,r).next(!1),l=M(o)||oA(o,n),i=M(a)||oA(a,n);return l&&i})(r,l,n)||t.remove(r),r},oB=tz.makeMap,oP=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oD=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oL=/[<>&\"\']/g,oM=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,oF={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},oI={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},oU={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},oz=(t,r)=>{let n={};if(t){let o=t.split(",");r=r||10;for(let t=0;t<o.length;t+=2){let a=String.fromCharCode(parseInt(o[t],r));if(!oI[a]){let r="&"+o[t+1]+";";n[a]=r,n[r]=a}}return n}},oj=oz("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),oH=(t,r)=>t.replace(r?oP:oD,t=>oI[t]||t),o$=(t,r)=>t.replace(r?oP:oD,t=>t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":oI[t]||"&#"+t.charCodeAt(0)+";"),oV=(t,r,n)=>{let o=n||oj;return t.replace(r?oP:oD,t=>oI[t]||o[t]||t)},oq={encodeRaw:oH,encodeAllRaw:t=>(""+t).replace(oL,t=>oI[t]||t),encodeNumeric:o$,encodeNamed:oV,getEncodeFunc:(t,r)=>{let n=oz(r)||oj,o=oB(t.replace(/\+/g,","));return o.named&&o.numeric?(t,r)=>t.replace(r?oP:oD,t=>void 0!==oI[t]?oI[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"):o.named?r?(t,r)=>oV(t,r,n):oV:o.numeric?o$:oH},decode:t=>t.replace(oM,(t,r)=>r?(r="x"===r.charAt(0).toLowerCase()?parseInt(r.substr(1),16):parseInt(r,10))>65535?String.fromCharCode(55296+((r-=65536)>>10),56320+(1023&r)):oF[r]||String.fromCharCode(r):oU[t]||oj[t]||(t=>{let r=rg("div").dom;return r.innerHTML=t,r.textContent||r.innerText||t})(t))},oW=(t,r)=>(t=tz.trim(t))?t.split(r||" "):[],oK=t=>RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),oY=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),oG=t=>{let r,n;r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),r=[r,"center dir isindex noframes"].join(" "));let o=[r,n].join(" ");return{blockContent:r,phrasingContent:n,flowContent:o}},oX=t=>{let{blockContent:r,phrasingContent:n,flowContent:o}=oG(t),a=t=>Object.freeze(t.split(" "));return Object.freeze({blockContent:a(r),phrasingContent:a(n),flowContent:a(o)})},oZ={html4:eJ(()=>oX("html4")),html5:eJ(()=>oX("html5")),"html5-strict":eJ(()=>oX("html5-strict"))},oQ=(t,r)=>{let{blockContent:n,phrasingContent:o,flowContent:a}=oZ[t]();return"blocks"===r?et.some(n):"phrasing"===r?et.some(o):"flow"===r?et.some(a):et.none()},oJ=t=>et.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(t=>({preset:"@"===t[1],name:t[2]})),o0={},o1=tz.makeMap,o2=tz.each,o3=tz.extend,o8=tz.explode,o5=(t,r={})=>o3(o1(t," ",o1(t.toUpperCase()," ")),r),o6=t=>o5("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),o4=(t,r)=>{if(t){let n={};return T(t)&&(t={"*":t}),o2(t,(t,o)=>{n[o]=n[o.toUpperCase()]="map"===r?o1(t,/[, ]/):o8(t,/[, ]/)}),n}},o9=(t={})=>{var r;let n={},o={},a=[],l={},i={},s=(r,n,o)=>{let a=t[r];if(a)return o1(a,/[, ]/,o1(a.toUpperCase(),/[, ]/));{let t=o0[r];return t||(t=o5(n,o),o0[r]=t),t}},d=null!==(r=t.schema)&&void 0!==r?r:"html5",c=(t=>{let r=oY(t),{phrasingContent:n,flowContent:o}=oG(t),a={},l=(t,r,n)=>{a[t]={attributes:ex(r,q({})),attributesOrder:r,children:ex(n,q({}))}},i=(t,n="",o="")=>{let a=oW(o),i=oW(t),s=i.length,d=[...r,...oW(n)];for(;s--;)l(i[s],d.slice(),a)},s=(t,r)=>{let n=oW(t),o=oW(r),l=n.length;for(;l--;){let t=a[n[l]];for(let r=0,n=o.length;r<n;r++)t.attributes[o[r]]={},t.attributesOrder.push(o[r])}};return"html5-strict"!==t&&(ed(oW("acronym applet basefont big font strike tt"),t=>{i(t,"",n)}),ed(oW("center dir isindex noframes"),t=>{i(t,"",o)})),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),i("dd div","",o),i("address dt caption","","html4"===t?n:o),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",o),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",o),i("dl","","dt dd"),i("a","href target rel media hreflang type","html4"===t?n:o),i("q","cite",n),i("ins del","cite datetime",o),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",o),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),i("param","name value"),i("map","name",[o,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",o),i("th","colspan rowspan headers scope abbr",o),i("form","accept-charset action autocomplete enctype method name novalidate target",o),i("fieldset","disabled form name",[o,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?o:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[o,"li"].join(" ")),i("noscript","",o),"html4"!==t&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",o),i("mark rt rp bdi","",n),i("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),i("canvas","width height",o),i("data","value",n),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",o),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[o,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",o),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[o,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==t&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==t&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==t&&ed([a.video,a.audio],t=>{delete t.children.audio,delete t.children.video}),ed(oW("a form meter progress dfn"),t=>{a[t]&&delete a[t].children[t]}),delete a.caption.children.table,delete a.script,a})(d);!1===t.verify_html&&(t.valid_elements="*[*]");let u=o4(t.valid_styles),m=o4(t.invalid_styles,"map"),g=o4(t.valid_classes,"map"),f=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=s("non_empty_elements",v+" pre svg textarea summary",h),C=s("move_caret_before_on_enter_elements",v+" table",h),E="h1 h2 h3 h4 h5 h6",w=s("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),_=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=s("transparent_elements","a ins del canvas map"),S=s("wrap_block_elements","pre "+E);o2("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),t=>{i[t]=RegExp("</"+t+"[^>]*>","gi")});let N=t=>{let r=et.from(n["@"]),o=/[*?+]/;ed(((t,r)=>{let n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ey(oW(r,","),r=>{let o=n.exec(r);if(o){let r=o[1],n=o[2],a=o[3],l=o[4],i=o[5],s={attributes:{},attributesOrder:[]};if(t.each(t=>{eP(t.attributes,(t,r)=>{s.attributes[r]=t}),s.attributesOrder.push(...t.attributesOrder)}),"#"===r?s.paddEmpty=!0:"-"===r&&(s.removeEmpty=!0),"!"===l&&(s.removeEmptyAttrs=!0),i&&((t,r)=>{let n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,o=/[*?+]/,{attributes:a,attributesOrder:l}=r;ed(oW(t,"|"),t=>{let i=n.exec(t);if(i){let t={},n=i[1],s=i[2].replace(/[\\:]:/g,":"),d=i[3],c=i[4];if("!"===n&&(r.attributesRequired=r.attributesRequired||[],r.attributesRequired.push(s),t.required=!0),"-"===n)return delete a[s],void l.splice(tz.inArray(l,s),1);(d&&("="===d?(r.attributesDefault=r.attributesDefault||[],r.attributesDefault.push({name:s,value:c}),t.defaultValue=c):"~"===d?(r.attributesForced=r.attributesForced||[],r.attributesForced.push({name:s,value:c}),t.forcedValue=c):"<"===d&&(t.validValues=tz.makeMap(c,"?"))),o.test(s))?(r.attributePatterns=r.attributePatterns||[],t.pattern=oK(s),r.attributePatterns.push(t)):(a[s]||l.push(s),a[s]=t)}})})(i,s),a&&(s.outputName=n),"@"===n){if(!t.isNone())return[];t=et.some(s)}return[a?{name:n,element:s,aliasName:a}:{name:n,element:s}]}return[]})})(r,null!=t?t:""),({name:t,element:r,aliasName:l})=>{(l&&(n[l]=r),o.test(t))?(r.pattern=oK(t),a.push(r)):n[t]=r})},R=t=>{a=[],ed(eO(n),t=>{delete n[t]}),N(t)},A=(t,r)=>{var a,i;delete o0.text_block_elements,delete o0.block_elements;let s=!!r.extends&&!ee(r.extends),c=r.extends;if(o[t]=c?o[c]:{},l[t]=null!=c?c:t,y[t.toUpperCase()]={},y[t]={},s||(x[t.toUpperCase()]={},x[t]={}),c&&!n[t]&&n[c]){let r=(t=>{let r=t=>P(t)?es(t,r):O(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(t.source,t.flags):O(t)?eD(t,r):t;return r(t)})(n[c]);delete r.removeEmptyAttrs,delete r.removeEmpty,n[t]=r}else n[t]={attributesOrder:[],attributes:{}};if(P(r.attributes)){let o=t=>{l.attributesOrder.push(t),l.attributes[t]={}},l=null!==(a=n[t])&&void 0!==a?a:{};delete l.attributesDefault,delete l.attributesForced,delete l.attributePatterns,delete l.attributesRequired,l.attributesOrder=[],l.attributes={},ed(r.attributes,t=>{let r=oY(d);oJ(t).each(({preset:t,name:n})=>{t?"global"===n&&ed(r,o):o(n)})}),n[t]=l}if(L(r.padEmpty)){let o=null!==(i=n[t])&&void 0!==i?i:{};o.paddEmpty=r.padEmpty,n[t]=o}if(P(r.children)){let n={},a=t=>{n[t]={}},l=t=>{oQ(d,t).each(t=>{ed(t,a)})};ed(r.children,t=>{oJ(t).each(({preset:t,name:r})=>{t?l(r):a(r)})}),o[t]=n}c&&eP(o,(r,n)=>{r[c]&&(o[n]=r=o3({},o[n]),r[t]=r[c])})},B=t=>{O(t)?eP(t,(t,r)=>A(r,t)):T(t)&&ed((t=>{let r=/^(~)?(.+)$/;return ey(oW(t,","),t=>{let n=r.exec(t);return n?[{cloneName:"~"===n[1]?"span":"div",name:n[2]}]:[]})})(null!=t?t:""),({name:t,cloneName:r})=>{A(t,{extends:r})})},D=t=>{ed((t=>{let r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ey(oW(t,","),t=>{let n=r.exec(t);if(n){let t=n[1];return[{operation:t?"-"===t?"remove":"add":"replace",name:n[2],validChildren:ey(oW(n[3],"|"),t=>oJ(t).toArray())}]}return[]})})(null!=t?t:""),({operation:t,name:r,validChildren:n})=>{let a="replace"===t?{"#comment":{}}:o[r],l=r=>{"remove"===t?delete a[r]:a[r]={}};ed(n,({preset:t,name:r})=>{t?(t=>{oQ(d,t).each(t=>{ed(t,l)})})(r):l(r)}),o[r]=a})},M=t=>{let r=n[t];if(r)return r;let o=a.length;for(;o--;){let r=a[o];if(r.pattern.test(t))return r}},F=q(u),I=q(m),U=q(g),z=q(b),j=q(x),H=q(w),$=q(_),V=q(Object.seal(h)),W=q(p),K=q(y),Y=q(C),G=q(f),X=q(k),Z=q(S),Q=q(Object.seal(i)),J=(t,r)=>{let n=M(t);if(n){if(!r)return!0;{if(n.attributes[r])return!0;let t=n.attributePatterns;if(t){let n=t.length;for(;n--;)if(t[n].pattern.test(r))return!0}}}return!1},ee=t=>eH(j(),t),er=t=>!e4(t,"#")&&J(t)&&!ee(t),en=q(l);return t.valid_elements?(R(t.valid_elements),o2(c,(t,r)=>{o[r]=t.children})):(o2(c,(t,r)=>{n[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},o[r]=t.children}),o2(oW("strong/b em/i"),t=>{let r=oW(t,"/");n[r[1]].outputName=r[0]}),o2(_,(r,o)=>{n[o]&&(t.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)}),o2(oW("ol ul blockquote a table tbody"),t=>{n[t]&&(n[t].removeEmpty=!0)}),o2(oW("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),t=>{n[t]&&(n[t].paddEmpty=!0)}),o2(oW("span"),t=>{n[t].removeEmptyAttrs=!0})),delete n.svg,B(t.custom_elements),D(t.valid_children),N(t.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),o2({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(t,r)=>{n[r]&&(n[r].parentsRequired=oW(t))}),t.invalid_elements&&o2(o8(t.invalid_elements),t=>{n[t]&&delete n[t]}),M("span")||N("span[!data-mce-type|*]"),{type:d,children:o,elements:n,getValidStyles:F,getValidClasses:U,getBlockElements:j,getInvalidStyles:I,getVoidElements:V,getTextBlockElements:H,getTextInlineElements:$,getBoolAttrs:z,getElementRule:M,getSelfClosingElements:W,getNonEmptyElements:K,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:G,getTransparentElements:X,getSpecialElements:Q,isValidChild:(t,r)=>{let n=o[t.toLowerCase()];return!(!n||!n[r.toLowerCase()])},isValid:J,isBlock:ee,isInline:er,isWrapper:t=>eH(Z(),t)||er(t),getCustomElements:en,addValidElements:N,setValidElements:R,addCustomElements:B,addValidChildren:D}},o7=t=>{let r=t.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},ae=t=>({value:e5(o7(t.red)+o7(t.green)+o7(t.blue),"#").toUpperCase()}),at=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ar=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,an=(t,r,n,o)=>({red:t,green:r,blue:n,alpha:o}),ao=(t,r,n,o)=>{let a=parseInt(t,10);return an(a,parseInt(r,10),parseInt(n,10),parseFloat(o))},aa=t=>{if("transparent"===t)return et.some(an(0,0,0,0));let r=at.exec(t);if(null!==r)return et.some(ao(r[1],r[2],r[3],"1"));let n=ar.exec(t);return null!==n?et.some(ao(n[1],n[2],n[3],n[4])):et.none()},al=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,ai=t=>aa(t).map(ae).map(t=>"#"+t.value).getOr(t),as=(t={},r)=>{let n,o;let a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,s=/rgba *\(/i,d={};r&&(n=r.getValidStyles(),o=r.getInvalidStyles());let c="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let t=0;t<c.length;t++)d[c[t]]="\uFEFF"+t,d["\uFEFF"+t]=c[t];let u={parse:r=>{var n,o,c;let m={},g=!1,f=t.url_converter,p=t.url_converter_scope||u,h=(t,r,n)=>{let o=m[t+"-top"+r];if(!o)return;let a=m[t+"-right"+r];if(!a)return;let l=m[t+"-bottom"+r];if(!l)return;let i=m[t+"-left"+r];if(!i)return;let s=[o,a,l,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);d>-1&&n||(m[t+r]=-1===d?s[0]:s.join(" "),delete m[t+"-top"+r],delete m[t+"-right"+r],delete m[t+"-bottom"+r],delete m[t+"-left"+r])},b=t=>{let r=m[t];if(!r)return;let n=r.indexOf(",")>-1?[r]:r.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return m[t]=n[0],!0},v=t=>(g=!0,d[t]),y=(t,r)=>(g&&(t=t.replace(/\uFEFF[0-9]/g,t=>d[t])),r||(t=t.replace(/\\([\'\";:])/g,"$1")),t),C=t=>String.fromCharCode(parseInt(t.slice(1),16)),E=t=>t.replace(/\\[0-9a-f]+/gi,C),w=(r,n,o,a,l,i)=>{if(l=l||i)return"'"+(l=y(l)).replace(/\'/g,"\\'")+"'";if(n=y(n||o||a||""),!t.allow_script_urls){let r=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(r)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return f&&(n=f.call(p,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(r){let d;for(r=(r=r.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,t=>t.replace(/[;:]/g,v));d=l.exec(r);){l.lastIndex=d.index+d[0].length;let r=d[1].replace(i,"").toLowerCase(),n=d[2].replace(i,"");if(r&&n){if(r=E(r),n=E(n),-1!==r.indexOf("\uFEFF")||-1!==r.indexOf('"')||!t.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(n)))continue;"font-weight"===r&&"700"===n?n="bold":"color"!==r&&"background-color"!==r||(n=n.toLowerCase()),s.test(n)||aa(n).each(t=>{n=ai(al(t)).toLowerCase()}),n=n.replace(a,w),m[r]=g?y(n,!0):n}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),o="border-style",c="border-color",b(n="border-width")&&b(o)&&b(c)&&(m.border=m[n]+" "+m[o]+" "+m[c],delete m[n],delete m[o],delete m[c]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:(t,r)=>{let a="",l=(r,n)=>{let o=n[r];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r],l=t[n];l&&(a+=(a.length>0?" ":"")+n+": "+l+";")}};return r&&n?(l("*",n),l(r,n)):eP(t,(t,n)=>{t&&((t,r)=>{if(!o||!r)return!0;let n=o["*"];return!(n&&n[t]||(n=o[r])&&n[t])})(n,r)&&(a+=(a.length>0?" ":"")+n+": "+t+";")}),a}};return u},ad={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ac=(t,r)=>{let n=null!=r?r:{};for(let r in t)eH(ad,r)||(n[r]=t[r]);return I(t.composedPath)&&(n.composedPath=()=>t.composedPath()),I(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),I(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},au=(t,r,n,o)=>{var a;let l;let i=ac(r,o);return i.type=t,F(i.target)&&(i.target=null!==(a=i.srcElement)&&void 0!==a?a:n),(F(r.preventDefault)||(l=r)instanceof Event||U(l.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=ee,U(r.preventDefault)&&r.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=ee,U(r.stopPropagation)&&r.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=ee,i.stopPropagation()},i.isDefaultPrevented===ee||i.isDefaultPrevented===J||(i.isDefaultPrevented=!0===i.defaultPrevented?ee:J,i.isPropagationStopped=!0===i.cancelBubble?ee:J,i.isImmediatePropagationStopped=J)),i},am=/^(?:mouse|contextmenu)|click/,ag=(t,r,n,o)=>{t.addEventListener(r,n,o||!1)},af=(t,r,n,o)=>{t.removeEventListener(r,n,o||!1)},ap=(t,r)=>{let n=au(t.type,t,document,r);if(I(t)&&am.test(t.type)&&M(t.pageX)&&!M(t.clientX)){let r=n.target.ownerDocument||document,o=r.documentElement,a=r.body;n.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return n},ah=(t,r,n)=>{let o=t.document,a={type:"ready"};if(n.domLoaded)return void r(a);let l=()=>{af(t,"DOMContentLoaded",l),af(t,"load",l),n.domLoaded||(n.domLoaded=!0,r(a)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?l():ag(t,"DOMContentLoaded",l),n.domLoaded||ag(t,"load",l)};class ab{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,r,n,o){let a,l;let i=this,s=window,d=t=>{i.executeHandlers(ap(t||s.event),l)};if(!t||n$(t)||nW(t))return n;t[i.expando]?l=t[i.expando]:(l=i.count++,t[i.expando]=l,i.events[l]={}),o=o||t;let c=r.split(" "),u=c.length;for(;u--;){let r=c[u],m=d,g=!1,f=!1;"DOMContentLoaded"===r&&(r="ready"),i.domLoaded&&"ready"===r&&"complete"===t.readyState?n.call(o,ap({type:r})):(i.hasFocusIn||"focusin"!==r&&"focusout"!==r||(g=!0,f="focusin"===r?"focus":"blur",m=t=>{let r=ap(t||s.event);r.type="focus"===r.type?"focusin":"focusout",i.executeHandlers(r,l)}),(a=i.events[l][r])?"ready"===r&&i.domLoaded?n(ap({type:r})):a.push({func:n,scope:o}):(i.events[l][r]=a=[{func:n,scope:o}],a.fakeName=f,a.capture=g,a.nativeHandler=m,"ready"===r?ah(t,m,i):ag(t,f||r,m,g)))}return t=a=null,n}unbind(t,r,n){if(!t||n$(t)||nW(t))return this;let o=t[this.expando];if(o){let a=this.events[o];if(r){let o=r.split(" "),l=o.length;for(;l--;){let r=o[l],i=a[r];if(i){if(n){let t=i.length;for(;t--;)if(i[t].func===n){let n=i.nativeHandler,o=i.fakeName,l=i.capture,s=i.slice(0,t).concat(i.slice(t+1));s.nativeHandler=n,s.fakeName=o,s.capture=l,a[r]=s}}n&&0!==i.length||(delete a[r],af(t,i.fakeName||r,i.nativeHandler,i.capture))}}}else eP(a,(r,n)=>{af(t,r.fakeName||n,r.nativeHandler,r.capture)}),a={};for(let t in a)if(eH(a,t))return this;delete this.events[o];try{delete t[this.expando]}catch(r){t[this.expando]=null}}return this}fire(t,r,n){return this.dispatch(t,r,n)}dispatch(t,r,n){if(!t||n$(t)||nW(t))return this;let o=ap({type:r,target:t},n);do{let r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||n$(t)||nW(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);let r=t.getElementsByTagName("*"),n=r.length;for(;n--;)(t=r[n])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,r){let n=this.events[r],o=n&&n[t.type];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r];if(n&&!1===n.func.call(n.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ab.Event=new ab;let av=tz.each,ay=tz.grep,aC="data-mce-style",aE=tz.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),aw=(t,r,n)=>{F(n)||""===n?re(t,r):t5(t,r,n)},ax=t=>t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),a_=(t,r)=>{let n=0;if(t)for(let o=t.nodeType,a=t.previousSibling;a;a=a.previousSibling){let t=a.nodeType;r&&n$(a)&&(t===o||!a.data.length)||(n++,o=t)}return n},ak=(t,r)=>{let n=t4(r,"style"),o=t.serialize(t.parse(n),tG(r));aw(r,aC,o)},aS=(t,r,n)=>{let o=ax(r);F(n)||""===n?r9(t,o):r2(t,o,z(n)?eH(aE,o)?n+"":n+"px":n)},aN=(t,r={})=>{let n={},o=window,a={},l=0,i=oR.forElement(ru(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),s=[],d=r.schema?r.schema:o9({}),c=as({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),u=r.ownEvents?new ab:ab.Event,m=d.getBlockElements(),g=r=>r&&t&&T(r)?t.getElementById(r):r,f=t=>{let r=g(t);return I(r)?ru(r):null},p=(t,r,n="")=>{let o;let a=f(t);if(I(a)&&tJ(a)){let t=K[r];o=t&&t.get?t.get(a.dom,r):t4(a,r)}return I(o)?o:n},h=t=>{let r=g(t);return F(r)?[]:r.attributes},b=(t,n,o)=>{k(t,t=>{if(nD(t)){let a=ru(t),l=""===o?null:o,i=t4(a,n),s=K[n];s&&s.set?s.set(a.dom,l,n):aw(a,n,l),i!==l&&r.onSetAttrib&&r.onSetAttrib({attrElm:a.dom,attrName:n,attrValue:l})}})},v=()=>r.root_element||t.body,y=(r,n)=>((t,r,n)=>{let o=0,a=0,l=t.ownerDocument;if(n=n||t,r){let i;if(n===t&&r.getBoundingClientRect&&"static"===r8(ru(t),"position")){let n=r.getBoundingClientRect();return{x:o=n.left+(l.documentElement.scrollLeft||t.scrollLeft)-l.documentElement.clientLeft,y:a=n.top+(l.documentElement.scrollTop||t.scrollTop)-l.documentElement.clientTop}}let s=r;for(;s&&s!==n&&s.nodeType&&!oS(s,n);){let t=s;o+=t.offsetLeft||0,a+=t.offsetTop||0,s=t.offsetParent}for(s=r.parentNode;s&&s!==n&&s.nodeType&&!oS(s,n);)o-=s.scrollLeft||0,a-=s.scrollTop||0,s=s.parentNode;a+=(i=ru(r),o_.isFirefox()&&"table"===tG(i)?ok(rO(i)).filter(t=>"caption"===tG(t)).bind(t=>ok(rT(t)).map(r=>{let n=r.dom.offsetTop,o=t.dom.offsetTop,a=t.dom.offsetHeight;return n<=o?-a:0})).getOr(0):0)}return{x:o,y:a}})(t.body,g(r),n),C=(t,r,n)=>{let o=g(t);if(!F(o)&&(nL(o)||nD(o)&&"http://www.w3.org/2000/svg"===o.namespaceURI))return n?r8(ru(o),ax(r)):("float"===(r=r.replace(/-(\D)/g,(t,r)=>r.toUpperCase()))&&(r="cssFloat"),o.style?o.style[r]:void 0)},E=t=>{let r=g(t);if(!r)return{w:0,h:0};let n=C(r,"width"),o=C(r,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||r.offsetWidth||r.clientWidth,h:parseInt(o,10)||r.offsetHeight||r.clientHeight}},w=(t,r)=>!!t&&ei(P(t)?t:[t],t=>rb(ru(t),r)),x=(t,r,n,o)=>{let a=[],l=g(t);o=void 0===o;let i=n||("BODY"!==v().nodeName?v().parentNode:null);if(T(r)){if("*"===r)r=nD;else{let t=r;r=r=>w(r,t)}}for(;l&&!(l===i||F(l.nodeType)||nK(l)||nY(l));){if(!r||r(l)){if(!o)return[l];a.push(l)}l=l.parentNode}return o?a:null},_=(t,r,n)=>{let o=r;if(t){T(r)&&(o=t=>w(t,r));for(let r=t[n];r;r=r[n])if(U(o)&&o(r))return r}return null},k=function(t,r,n){let o=null!=n?n:this;if(P(t)){let n=[];return av(t,(t,a)=>{let l=g(t);l&&n.push(r.call(o,l,a))}),n}{let n=g(t);return!!n&&r.call(o,n)}},S=(t,r)=>{k(t,t=>{eP(r,(r,n)=>{b(t,n,r)})})},N=(t,r)=>{k(t,t=>{nc(ru(t),r)})},R=(r,n,o,a,l)=>k(r,r=>{let i=T(n)?t.createElement(n):n;return I(o)&&S(i,o),a&&(!T(a)&&a.nodeType?i.appendChild(a):T(a)&&N(i,a)),l?i:r.appendChild(i)}),A=(r,n,o)=>R(t.createElement(r),r,n,o,!0),O=oq.encodeAllRaw,D=(t,r)=>k(t,t=>{let n=ru(t);return r&&ed(rO(n),t=>{t0(t)&&0===t.dom.length?nl(t):r7(n,t)}),nl(n),n.dom}),L=(t,r,n)=>{k(t,t=>{if(nD(t)){let o=ru(t);ed(r.split(" "),t=>{I(n)?(n?ri:rd)(o,t):(rn(o)?o.dom.classList.toggle(t):el(ro(o),t)?rl(o,t):ra(o,t),rs(o))})}})},M=(t,r,n)=>k(r,o=>{var a;let l=P(r)?t.cloneNode(!0):t;return n&&av(ay(o.childNodes),t=>{l.appendChild(t)}),null===(a=o.parentNode)||void 0===a||a.replaceChild(l,o),o}),z=()=>t.createRange(),j=(n,a,l,i)=>{if(P(n)){let t=n.length,r=[];for(;t--;)r[t]=j(n[t],a,l,i);return r}return r.collect&&(n===t||n===o)&&s.push([n,a,l,i]),u.bind(n,a,l,i||W)},$=(r,n,a)=>{if(P(r)){let t=r.length,o=[];for(;t--;)o[t]=$(r[t],n,a);return o}if(s.length>0&&(r===t||r===o)){let t=s.length;for(;t--;){let[o,l,i]=s[t];r!==o||n&&n!==l||a&&a!==i||u.unbind(o,l,i)}}return u.unbind(r,n,a)},V=t=>{if(t&&nL(t)){let r=t.getAttribute("data-mce-contenteditable");return r&&"inherit"!==r?r:"inherit"!==t.contentEditable?t.contentEditable:null}return null},W={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:s,styles:c,schema:d,events:u,isBlock:t=>T(t)?eH(m,t):nD(t)&&(eH(m,t.nodeName)||oE(d,t)),root:null,clone:(t,r)=>t.cloneNode(r),getRoot:v,getViewPort:t=>{let r=nC(t);return{x:r.x,y:r.y,w:r.width,h:r.height}},getRect:t=>{let r=g(t),n=y(r),o=E(r);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:E,getParent:(t,r,n)=>{let o=x(t,r,n,!1);return o&&o.length>0?o[0]:null},getParents:x,get:g,getNext:(t,r)=>_(t,r,"nextSibling"),getPrev:(t,r)=>_(t,r,"previousSibling"),select:(n,o)=>{var a,l;let i=null!==(l=null!==(a=g(o))&&void 0!==a?a:r.root_element)&&void 0!==l?l:t;return U(i.querySelectorAll)?eR(i.querySelectorAll(n)):[]},is:w,add:R,create:A,createHTML:(t,r,n="")=>{let o="<"+t;for(let t in r)e$(r,t)&&(o+=" "+t+'="'+O(r[t])+'"');return to(n)&&eH(d.getVoidElements(),t)?o+" />":o+">"+n+"</"+t+">"},createFragment:r=>{let n;let o=t.createElement("div"),a=t.createDocumentFragment();for(a.appendChild(o),r&&(o.innerHTML=r);n=o.firstChild;)a.appendChild(n);return a.removeChild(o),a},remove:D,setStyle:(t,n,o)=>{k(t,t=>{let a=ru(t);aS(a,n,o),r.update_styles&&ak(c,a)})},getStyle:C,setStyles:(t,n)=>{k(t,t=>{let o=ru(t);eP(n,(t,r)=>{aS(o,r,t)}),r.update_styles&&ak(c,o)})},removeAllAttribs:t=>k(t,t=>{let r=t.attributes;for(let n=r.length-1;n>=0;n--)t.removeAttributeNode(r.item(n))}),setAttrib:b,setAttribs:S,getAttrib:p,getPos:y,parseStyle:t=>c.parse(t),serializeStyle:(t,r)=>c.serialize(t,r),addStyle:r=>{if(W!==aN.DOM&&t===document){if(n[r])return;n[r]=!0}let o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";let r=t.head;r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:t=>{t||(t=""),ed(t.split(","),t=>{a[t]=!0,i.load(t).catch(H)})},addClass:(t,r)=>{L(t,r,!0)},removeClass:(t,r)=>{L(t,r,!1)},hasClass:(t,r)=>{let n=f(t),o=r.split(" ");return I(n)&&eC(o,t=>rc(n,t))},toggleClass:L,show:t=>{k(t,t=>r9(ru(t),"display"))},hide:t=>{k(t,t=>r2(ru(t),"display","none"))},isHidden:t=>{let r=f(t);return I(r)&&tj(r6(r,"display"),"none")},uniqueId:t=>(t||"mce_")+l++,setHTML:N,getOuterHTML:t=>{let r=f(t);return I(r)?nD(r.dom)?r.dom.outerHTML:(t=>{let r=rg("div");return nr(r,ru(t.dom.cloneNode(!0))),nd(r)})(r):""},setOuterHTML:(t,r)=>{k(t,t=>{nD(t)&&(t.outerHTML=r)})},decode:oq.decode,encode:O,insertAfter:(t,r)=>{let n=g(r);return k(t,t=>{let r=null==n?void 0:n.parentNode,o=null==n?void 0:n.nextSibling;return r&&(o?r.insertBefore(t,o):r.appendChild(t)),t})},replace:M,rename:(t,r)=>{if(t.nodeName!==r.toUpperCase()){let n=A(r);return av(h(t),r=>{b(n,r.nodeName,p(t,r.nodeName))}),M(n,t,!0),n}return t},findCommonAncestor:(t,r)=>{let n=t;for(;n;){let t=r;for(;t&&n!==t;)t=t.parentNode;if(n===t)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},run:k,getAttribs:h,isEmpty:(t,r,n)=>B(r)?n7(d,t,{...n,isContent:t=>!!r[t.nodeName.toLowerCase()]}):n7(d,t,n),createRng:z,nodeIndex:a_,split:(t,r,n)=>{let o,a,l=z();if(t&&r&&t.parentNode&&r.parentNode){let i=t.parentNode;return l.setStart(i,a_(t)),l.setEnd(r.parentNode,a_(r)),o=l.extractContents(),(l=z()).setStart(r.parentNode,a_(r)+1),l.setEnd(i,a_(t)+1),a=l.extractContents(),i.insertBefore(oO(W,o,d),t),n?i.insertBefore(n,t):i.insertBefore(r,t),i.insertBefore(oO(W,a,d),t),D(t),n||r}},bind:j,unbind:$,fire:(t,r,n)=>u.dispatch(t,r,n),dispatch:(t,r,n)=>u.dispatch(t,r,n),getContentEditable:V,getContentEditableParent:t=>{let r=v(),n=null;for(let o=t;o&&o!==r&&null===(n=V(o));o=o.parentNode);return n},isEditable:t=>{if(I(t)){let r=nD(t)?t:t.parentElement;return I(r)&&nL(r)&&rQ(ru(r))}return!1},destroy:()=>{if(s.length>0){let t=s.length;for(;t--;){let[r,n,o]=s[t];u.unbind(r,n,o)}}eP(a,(t,r)=>{i.unload(r),delete a[r]})},isChildOf:(t,r)=>t===r||r.contains(t),dumpRng:t=>"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},K=((t,r,n)=>{let o=r.keep_values,a={set:(t,o,a)=>{let l=ru(t);U(r.url_converter)&&I(o)&&(o=r.url_converter.call(r.url_converter_scope||n(),String(o),a,t)),aw(l,"data-mce-"+a,o),aw(l,a,o)},get:(t,r)=>{let n=ru(t);return t4(n,"data-mce-"+r)||t4(n,r)}},l={style:{set:(r,n)=>{let a=ru(r);o&&aw(a,aC,n),re(a,"style"),T(n)&&r3(a,t.parse(n))},get:r=>{let n=ru(r),o=t4(n,aC)||t4(n,"style");return t.serialize(t.parse(o),tG(n))}}};return o&&(l.href=l.src=a),l})(c,r,q(W));return W};aN.DOM=aN(document),aN.nodeIndex=a_;let aR=aN.DOM;class aA{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((r,n)=>{let o;let a=()=>{aR.remove(l),o&&(o.onerror=o.onload=o=null)},l=aR.uniqueId();(o=document.createElement("script")).id=l,o.type="text/javascript",o.src=tz._addCacheSuffix(t),this.settings.referrerPolicy&&aR.setAttrib(o,"referrerpolicy",this.settings.referrerPolicy),o.onload=()=>{a(),r()},o.onerror=()=>{a(),n("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){let r=this;return r.queue.push(t),void 0===r.states[t]&&(r.states[t]=0),new Promise((n,o)=>{r.scriptLoadedCallbacks[t]||(r.scriptLoadedCallbacks[t]=[]),r.scriptLoadedCallbacks[t].push({resolve:n,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){let t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){let r=this,n=(t,n)=>{ej(r.scriptLoadedCallbacks,n).each(r=>{ed(r,r=>r[t](n))}),delete r.scriptLoadedCallbacks[n]},o=t=>{let r=em(t,t=>"rejected"===t.status);return r.length>0?Promise.reject(ey(r,({reason:t})=>P(t)?t:[t])):Promise.resolve()},a=t=>Promise.allSettled(es(t,t=>2===r.states[t]?(n("resolve",t),Promise.resolve()):3===r.states[t]?(n("reject",t),Promise.reject(t)):(r.states[t]=1,r.loadScript(t).then(()=>{r.states[t]=2,n("resolve",t);let l=r.queue;return l.length>0?(r.queue=[],a(l).then(o)):Promise.resolve()},()=>(r.states[t]=3,n("reject",t),Promise.reject(t)))))),l=t=>(r.loading=!0,a(t).then(t=>{r.loading=!1;let n=r.queueLoadedCallbacks.shift();return et.from(n).each(Q),o(t)})),i=eV(t);return r.loading?new Promise((t,n)=>{r.queueLoadedCallbacks.push(()=>{l(i).then(t,n)})}):l(i)}}aA.ScriptLoader=new aA;let aT={},aO=or("en"),aB=()=>ej(aT,aO.get()),aP={getData:()=>eD(aT,t=>({...t})),setCode:t=>{t&&aO.set(t)},getCode:()=>aO.get(),add:(t,r)=>{let n=aT[t];n||(aT[t]=n={});let o=es(eO(r),t=>t.toLowerCase());eP(r,(t,a)=>{let l=a.toLowerCase();l!==a&&((t,r)=>{let n=t.indexOf(r);return -1!==n&&t.indexOf(r,n+1)>n})(o,l)?(eH(r,l)||(n[l]=t),n[a]=t):n[l]=t})},translate:t=>{let r=aB().getOr({}),n=t=>U(t)?Object.prototype.toString.call(t):o(t)?"":""+t,o=t=>""===t||null==t,a=t=>{let o=n(t);return eH(r,o)?n(r[o]):ej(r,o.toLowerCase()).map(n).getOr(o)},l=t=>t.replace(/{context:\w+}$/,"");if(o(t))return"";if(O(t)&&eH(t,"raw"))return n(t.raw);if(P(t)&&t.length>1){let r=t.slice(1);return l(a(t[0]).replace(/\{([0-9]+)\}/g,(t,o)=>eH(r,o)?n(r[o]):t))}return l(a(t))},isRtl:()=>aB().bind(t=>ej(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>eH(aT,t)},aD=()=>{let t=[],r={},n={},o=[],a=(t,r)=>{ed(em(o,n=>n.name===t&&n.state===r),t=>t.resolve())},l=t=>eH(r,t),i=(t,n)=>{let o=aP.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||aA.ScriptLoader.add(r[t]+"/langs/"+o+".js")},s=(t,r="added")=>"added"===r&&eH(n,t)||"loaded"===r&&l(t)?Promise.resolve():new Promise(n=>{o.push({name:t,state:r,resolve:n})});return{items:t,urls:r,lookup:n,get:t=>{if(n[t])return n[t].instance},requireLangPack:(t,r)=>{!1!==aD.languageLoad&&(l(t)?i(t,r):s(t,"loaded").then(()=>i(t,r)))},add:(r,o)=>(t.push(o),n[r]={instance:o},a(r,"added"),o),remove:t=>{delete r[t],delete n[t]},createUrl:(t,r)=>T(r)?T(t)?{prefix:"",resource:r,suffix:""}:{prefix:t.prefix,resource:r,suffix:t.suffix}:r,load:(t,o)=>{if(r[t])return Promise.resolve();let l=T(o)?o:o.prefix+o.resource+o.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=aD.baseURL+"/"+l),r[t]=l.substring(0,l.lastIndexOf("/"));let i=()=>(a(t,"loaded"),Promise.resolve());return n[t]?i():aA.ScriptLoader.add(l).then(i)},waitFor:s}};aD.languageLoad=!0,aD.baseURL="",aD.PluginManager=aD(),aD.ThemeManager=aD(),aD.ModelManager=aD();let aL=(t,r)=>{let n=null;return{cancel:()=>{D(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{D(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},r))}}},aM=(t,r)=>{let n=null,o=()=>{D(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...a)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,a)},r)}}},aF=q("mce-annotation"),aI=q("data-mce-annotation"),aU=q("data-mce-annotation-uid"),az=q("data-mce-annotation-active"),aj=q("data-mce-annotation-classes"),aH=q("data-mce-annotation-attrs"),a$=t=>r=>ry(r,t),aV=(t,r)=>{let n=t.selection.getRng(),o=ru(n.startContainer),a=ru(t.getBody()),l=r.fold(()=>"."+aF(),t=>`[${aI()}="${t}"]`);return rZ(rB(o,n.startOffset).getOr(o),l,a$(a)).bind(r=>t9(r,`${aU()}`).bind(n=>t9(r,`${aI()}`).map(r=>{let o=aW(t,n);return{uid:n,name:r,elements:o}})))},aq=(t,r)=>t7(t,"data-mce-bogus")||rG(t,'[data-mce-bogus="all"]',a$(r)).isSome(),aW=(t,r)=>{let n=ru(t.getBody());return em(nw(n,`[${aU()}="${r}"]`),t=>!aq(t,n))},aK=(t,r)=>{let n=ru(t.getBody()),o=nw(n,`[${aI()}="${r}"]`),a={};return ed(o,t=>{if(!aq(t,n)){let r=t4(t,aU()),n=ej(a,r).getOr([]);a[r]=n.concat([t])}}),a},aY=0,aG=t=>{let r=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++aY+String(r)},aX=(t,r)=>ru(t.dom.cloneNode(r)),aZ=t=>aX(t,!1),aQ=t=>aX(t,!0),aJ=(t,r,n=J)=>{let o=new nS(t,r),a=t=>{let r;do r=o[t]();while(r&&!n$(r)&&!n(r));return et.from(r).filter(n$)};return{current:()=>et.from(o.current()).filter(n$),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},a0=(t,r)=>{let n=r||(r=>t.isBlock(r)||nG(r)||nQ(r)),o=(t,r,n,a)=>{if(n$(t)){let n=a(t,r,t.data);if(-1!==n)return et.some({container:t,offset:n})}return n().bind(t=>o(t.container,t.offset,n,a))};return{backwards:(r,a,l,i)=>{let s=aJ(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.prev().map(t=>({container:t,offset:t.length})),l).getOrNull()},forwards:(r,a,l,i)=>{let s=aJ(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.next().map(t=>({container:t,offset:0})),l).getOrNull()}}},a1=((t,r)=>{let n=r=>t(r)?et.from(r.dom.nodeValue):et.none();return{get:r=>{if(!t(r))throw Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,n)=>{if(!t(r))throw Error("Can only set raw text value of a text node");r.dom.nodeValue=n}}})(t0),a2=t=>a1.get(t),a3=t=>{let r;return n=>eH(r=r||ex(t,ee),tG(n))},a8=t=>tJ(t)&&"br"===tG(t),a5=a3(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),a6=a3(["ul","ol","dl"]),a4=a3(["li","dd","dt"]),a9=a3(["thead","tbody","tfoot"]),a7=a3(["td","th"]),le=a3(["pre","script","textarea","style"]),lt=()=>{let t=rg("br");return t5(t,"data-mce-bogus","1"),t},lr=t=>{na(t),nr(t,lt())},ln=t=>t.replace(/\uFEFF/g,""),lo=t=>(n$(t)&&(t=t.parentNode),nD(t)&&t.hasAttribute("data-mce-caret")),la=t=>n$(t)&&nN(t.data),ll=t=>lo(t)||la(t),li=t=>t.firstChild!==t.lastChild||!nG(t.firstChild),ls=t=>{let r=t.container();return!!n$(r)&&("\uFEFF"===r.data.charAt(t.offset())||t.isAtStart()&&la(r.previousSibling))},ld=t=>{let r=t.container();return!!n$(r)&&("\uFEFF"===r.data.charAt(t.offset()-1)||t.isAtEnd()&&la(r.nextSibling))},lc=t=>n$(t)&&"\uFEFF"===t.data[0],lu=t=>n$(t)&&"\uFEFF"===t.data[t.data.length-1],lm=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{var r;let n=t.getElementsByTagName("br"),o=n[n.length-1];nU(o)&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,lg=t=>lo(t.startContainer),lf=Math.round,lp=t=>t?{left:lf(t.left),top:lf(t.top),bottom:lf(t.bottom),right:lf(t.right),width:lf(t.width),height:lf(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},lh=(t,r)=>(t=lp(t),r||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),lb=(t,r,n)=>t>=0&&t<=Math.min(r.height,n.height)/2,lv=(t,r)=>{let n=Math.min(r.height/2,t.height/2);return t.bottom-n<r.top||!(t.top>r.bottom)&&lb(r.top-t.bottom,t,r)},ly=(t,r)=>t.top>r.bottom||!(t.bottom<r.top)&&lb(r.bottom-t.top,t,r),lC=(t,r,n)=>{let o=Math.max(Math.min(r,t.left+t.width),t.left),a=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((r-o)*(r-o)+(n-a)*(n-a))},lE=t=>{let r=t.startContainer,n=t.startOffset;return r===t.endContainer&&r.hasChildNodes()&&t.endOffset===n+1?r.childNodes[n]:null},lw=(t,r)=>{if(nD(t)&&t.hasChildNodes()){let n=t.childNodes,o=Math.min(Math.max(r,0),n.length-1);return n[o]}return t},lx=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),l_=t=>T(t)&&t.charCodeAt(0)>=768&&lx.test(t),lk=nF(["script","style","textarea"]),lS=nF(["img","input","textarea","hr","iframe","video","audio","object","embed"]),lN=nF(["table"]),lR=t=>!ll(t)&&(n$(t)?!lk(t.parentNode):lS(t)||nG(t)||lN(t)||lA(t)),lA=t=>!(nD(t)&&"true"===t.getAttribute("unselectable"))&&nQ(t),lT=(t,r)=>lR(t)&&((t,r)=>{for(let n=t.parentNode;n&&n!==r;n=n.parentNode){if(lA(n))return!1;if(nZ(n))break}return!0})(t,r),lO=nI("display","block table"),lB=((...t)=>r=>{for(let n=0;n<t.length;n++)if(!t[n](r))return!1;return!0})(nD,lR,G(nI("float","left right"))),lP=G(nI("white-space","pre pre-line pre-wrap")),lD=aN.nodeIndex,lL=(t,r)=>r<0&&nD(t)&&t.hasChildNodes()?void 0:lw(t,r),lM=t=>t?t.createRange():aN.DOM.createRng(),lF=t=>T(t)&&/[\r\n\t ]/.test(t),lI=t=>!!t.setStart&&!!t.setEnd,lU=t=>{let r=t.startContainer,n=t.startOffset;if(lF(t.toString())&&lP(r.parentNode)&&n$(r)){let t=r.data;if(lF(t[n-1])||lF(t[n+1]))return!0}return!1},lz=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,lj=t=>{var r;let n;let o=t.getClientRects();return n=o.length>0?lp(o[0]):lp(t.getBoundingClientRect()),!lI(t)&&nG(t)&&lz(n)?(t=>{let r=t.ownerDocument,n=lM(r),o=r.createTextNode("\xa0"),a=t.parentNode;a.insertBefore(o,t),n.setStart(o,0),n.setEnd(o,1);let l=lp(n.getBoundingClientRect());return a.removeChild(o),l})(t):lz(n)&&lI(t)&&null!==(r=(t=>{let r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset;if(r===n&&n$(n)&&0===o&&1===a){let r=t.cloneRange();return r.setEndAfter(n),lj(r)}return null})(t))&&void 0!==r?r:n},lH=(t,r)=>{let n=lh(t,r);return n.width=1,n.right=n.left+1,n},l$=(t,r,n)=>{let o=()=>(n||(n=(t=>{let r=[],n=t=>{var n;0!==t.height&&(r.length>0&&(n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(t))},o=(t,r)=>{let o=lM(t.ownerDocument);if(r<t.data.length){if(l_(t.data[r]))return;if(l_(t.data[r-1])&&(o.setStart(t,r),o.setEnd(t,r+1),!lU(o)))return void n(lH(lj(o),!1))}r>0&&(o.setStart(t,r-1),o.setEnd(t,r),lU(o)||n(lH(lj(o),!1))),r<t.data.length&&(o.setStart(t,r),o.setEnd(t,r+1),lU(o)||n(lH(lj(o),!0)))},a=t.container(),l=t.offset();if(n$(a))return o(a,l),r;if(nD(a)){if(t.isAtEnd()){let t=lL(a,l);n$(t)&&o(t,t.data.length),lB(t)&&!nG(t)&&n(lH(lj(t),!1))}else{let i=lL(a,l);if(n$(i)&&o(i,0),lB(i)&&t.isAtEnd())return n(lH(lj(i),!1)),r;let s=lL(t.container(),t.offset()-1);lB(s)&&!nG(s)&&(lO(s)||lO(i)||!lB(i))&&n(lH(lj(s),!1)),lB(i)&&n(lH(lj(i),!0))}}return r})(l$(t,r))),n);return{container:q(t),offset:q(r),toRange:()=>{let n=lM(t.ownerDocument);return n.setStart(t,r),n.setEnd(t,r),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(n$(t),0===r),isAtEnd:()=>n$(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:n=>n&&t===n.container()&&r===n.offset(),getNode:n=>lL(t,n?r-1:r)}};l$.fromRangeStart=t=>l$(t.startContainer,t.startOffset),l$.fromRangeEnd=t=>l$(t.endContainer,t.endOffset),l$.after=t=>l$(t.parentNode,lD(t)+1),l$.before=t=>l$(t.parentNode,lD(t)),l$.isAbove=(t,r)=>t$(eS(r.getClientRects()),eN(t.getClientRects()),lv).getOr(!1),l$.isBelow=(t,r)=>t$(eN(r.getClientRects()),eS(t.getClientRects()),ly).getOr(!1),l$.isAtStart=t=>!!t&&t.isAtStart(),l$.isAtEnd=t=>!!t&&t.isAtEnd(),l$.isTextPosition=t=>!!t&&n$(t.container()),l$.isElementPosition=t=>!l$.isTextPosition(t);let lV=(t,r)=>{n$(r)&&0===r.data.length&&t.remove(r)},lq=(t,r,n)=>{nY(n)?((t,r,n)=>{let o=et.from(n.firstChild),a=et.from(n.lastChild);r.insertNode(n),o.each(r=>lV(t,r.previousSibling)),a.each(r=>lV(t,r.nextSibling))})(t,r,n):(r.insertNode(n),lV(t,n.previousSibling),lV(t,n.nextSibling))},lW=aN.nodeIndex,lK=t=>{let r=t.parentNode;return nU(r)?lK(r):r},lY=t=>t?eX(t.childNodes,(t,r)=>(nU(r)&&"BR"!==r.nodeName?t=t.concat(lY(r)):t.push(r),t),[]):[],lG=t=>r=>t===r,lX=t=>(n$(t)?"text()":t.nodeName.toLowerCase())+"["+(t=>{let r,n;n=eZ(r=lY(lK(t)),lG(t),t);let o=eX(r=r.slice(0,n+1),(t,n,o)=>(n$(n)&&n$(r[o-1])&&t++,t),0);return(n=eZ(r=eG(r,nF([t.nodeName])),lG(t),t))-o})(t)+"]",lZ=(t,r)=>{let n,o=[],a=r.container(),l=r.offset();if(n$(a))n=((t,r)=>{let n=t;for(;(n=n.previousSibling)&&n$(n);)r+=n.data.length;return r})(a,l);else{let t=a.childNodes;l>=t.length?(n="after",l=t.length-1):n="before",a=t[l]}o.push(lX(a));let i=((t,r,n)=>{let o=[];for(let n=r.parentNode;n&&n!==t;n=n.parentNode)o.push(n);return o})(t,a);return i=eG(i,G(nU)),(o=o.concat(eY(i,t=>lX(t)))).reverse().join("/")+","+n},lQ=(t,r)=>{if(!r)return null;let n=r.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",l=eX(o,(t,r)=>{var n,o;let a;let l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(r);return l?("text()"===l[1]&&(l[1]="#text"),n=l[1],o=parseInt(l[2],10),a=eG(a=lY(t),(t,r)=>!n$(t)||!n$(a[r-1])),(a=eG(a,nF([n])))[o]):null},t);if(!l)return null;if(!n$(l)&&l.parentNode){let t;return t="after"===a?lW(l)+1:lW(l),l$(l.parentNode,t)}return((t,r)=>{let n=t,o=0;for(;n$(n);){let a=n.data.length;if(r>=o&&r<=o+a){t=n,r-=o;break}if(!n$(n.nextSibling)){t=n,r=a;break}o+=a,n=n.nextSibling}return n$(t)&&r>t.data.length&&(r=t.data.length),l$(t,r)})(l,parseInt(a,10))},lJ=(t,r,n,o,a)=>{let l=a?o.startContainer:o.endContainer,i=a?o.startOffset:o.endOffset,s=[],d=t.getRoot();if(n$(l))s.push(n?((t,r,n)=>{let o=t(r.data.slice(0,n)).length;for(let n=r.previousSibling;n&&n$(n);n=n.previousSibling)o+=t(n.data).length;return o})(r,l,i):i);else{let r=0,o=l.childNodes;i>=o.length&&o.length&&(r=1,i=Math.max(0,o.length-1)),s.push(t.nodeIndex(o[i],n)+r)}for(let r=l;r&&r!==d;r=r.parentNode)s.push(t.nodeIndex(r,n));return s},l0=(t,r,n)=>{let o=0;return tz.each(t.select(r),t=>"all"===t.getAttribute("data-mce-bogus")?void 0:t!==n&&void o++),o},l1=(t,r)=>{let n=r?t.startContainer:t.endContainer,o=r?t.startOffset:t.endOffset;if(nD(n)&&"TR"===n.nodeName){let a=n.childNodes;(n=a[Math.min(r?o:o-1,a.length-1)])&&(o=r?0:n.childNodes.length,r?t.setStart(n,o):t.setEnd(n,o))}},l2=t=>(l1(t,!0),l1(t,!1),t),l3=(t,r)=>{if(nD(t)&&nQ(t=lw(t,r)))return t;if(ll(t)){n$(t)&&lo(t)&&(t=t.parentNode);let r=t.previousSibling;if(nQ(r)||nQ(r=t.nextSibling))return r}},l8=(t,r,n)=>{let o=n.getNode(),a=n.getRng();if("IMG"===o.nodeName||nQ(o)){let t=o.nodeName;return{name:t,index:l0(n.dom,t,o)}}let l=l3(a.startContainer,a.startOffset)||l3(a.endContainer,a.endOffset);if(l){let t=l.tagName;return{name:t,index:l0(n.dom,t,l)}}return((t,r,n,o)=>{let a=r.dom,l=lJ(a,t,n,o,!0),i=r.isForward(),s=lg(o)?{isFakeCaret:!0}:{};return r.isCollapsed()?{start:l,forward:i,...s}:{start:l,end:lJ(a,t,n,o,!1),forward:i,...s}})(t,n,r,a)},l5=(t,r,n)=>{let o={"data-mce-type":"bookmark",id:r,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},l6=(t,r)=>{let n=t.dom,o=t.getRng(),a=n.uniqueId(),l=t.isCollapsed(),i=t.getNode(),s=i.nodeName,d=t.isForward();if("IMG"===s)return{name:s,index:l0(n,s,i)};let c=l2(o.cloneRange());if(!l){c.collapse(!1);let t=l5(n,a+"_end",r);lq(n,c,t)}(o=l2(o)).collapse(!0);let u=l5(n,a+"_start",r);return lq(n,o,u),t.moveToBookmark({id:a,keep:!0,forward:d}),{id:a,forward:d}},l4=Y(l8,W,!0),l9={value:t=>{let r=r=>r(t),n=q(t),o=()=>a,a={tag:!0,inner:t,fold:(r,n)=>n(t),isValue:ee,isError:J,map:r=>l9.value(r(t)),mapError:o,bind:r,exists:r,forall:r,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:r=>{r(t)},toOptional:()=>et.some(t)};return a},error:t=>{let r=()=>n,n={tag:!1,inner:t,fold:(r,n)=>r(t),isValue:J,isError:ee,map:r,mapError:r=>l9.error(r(t)),bind:r,exists:J,forall:ee,getOr:W,or:W,getOrThunk:Z,orThunk:Z,getOrDie:X(String(t)),each:H,toOptional:et.none};return n}},l7=t=>{if(!P(t))throw Error("cases must be an array");if(0===t.length)throw Error("there must be at least one case");let r=[],n={};return ed(t,(o,a)=>{let l=eO(o);if(1!==l.length)throw Error("one and only one name per case");let i=l[0],s=o[i];if(void 0!==n[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!P(s))throw Error("case arguments must be an array");r.push(i),n[i]=(...n)=>{let o=n.length;if(o!==s.length)throw Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+o);return{fold:(...r)=>{if(r.length!==t.length)throw Error("Wrong number of arguments to fold. Expected "+t.length+", got "+r.length);return r[a].apply(null,n)},match:t=>{let o=eO(t);if(r.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+o.join(","));if(!eC(r,t=>el(o,t)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+r.join(", "));return t[i].apply(null,n)},log:t=>{console.log(t,{constructors:r,constructor:i,params:n})}}}}),n};l7([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let ie=t=>"inline-command"===t.type||"inline-format"===t.type,it=t=>"block-command"===t.type||"block-format"===t.type,ir=t=>{var r;let n=r=>l9.error({message:r,pattern:t}),o=(r,o,a)=>{if(void 0!==t.format){let a;if(P(t.format)){if(!eC(t.format,T))return n(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!T(t.format))return n(r+" pattern has non-string `format` parameter");a=[t.format]}return l9.value(o(a))}return void 0!==t.cmd?T(t.cmd)?l9.value(a(t.cmd,t.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!O(t))return n("Raw pattern is not an object");if(!T(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!T(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let r=t.start,a=t.end;return 0===a.length&&(a=r,r=""),o("Inline",t=>({type:"inline-format",start:r,end:a,format:t}),(t,n)=>({type:"inline-command",start:r,end:a,cmd:t,value:n}))}if(void 0!==t.replacement)return T(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):l9.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{let a=null!==(r=t.trigger)&&void 0!==r?r:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:t.start,format:r[0],trigger:a}),(r,n)=>({type:"block-command",start:t.start,cmd:r,value:n,trigger:a}))}},io=t=>em(t,it),ia=t=>em(t,ie),il=(t,r)=>({...t,blockPatterns:em(t.blockPatterns,t=>("block-command"===t.type||"block-format"===t.type)&&t.trigger===r)}),ii=t=>{let r=(t=>{let r=[],n=[];return ed(t,t=>{t.fold(t=>{r.push(t)},t=>{n.push(t)})}),{errors:r,values:n}})(es(t,ir));return ed(r.errors,t=>console.error(t.message,t.pattern)),r.values},is=tA().deviceType,id=is.isTouch(),ic=aN.DOM,iu=t=>A(t,RegExp),im=t=>r=>r.options.get(t),ig=t=>T(t)||O(t),ip=(t,r="")=>n=>{let o=T(n);if(o)return -1!==n.indexOf("=")?{value:ej(ef(n.indexOf("=")>0?n.split(/[;,](?![^=;,]*(?:[;,]|$))/):n.split(","),(t,r)=>{let n=r.split("="),o=n[0],a=n.length>1?n[1]:o;return t[te(o)]=te(a),t},{}),t.id).getOr(r),valid:o}:{value:n,valid:o};return{valid:!1,message:"Must be a string."}},ih=im("iframe_attrs"),ib=im("doctype"),iv=im("document_base_url"),iy=im("body_id"),iC=im("body_class"),iE=im("content_security_policy"),iw=im("br_in_pre"),ix=im("forced_root_block"),i_=im("forced_root_block_attrs"),ik=im("newline_behavior"),iS=im("br_newline_selector"),iN=im("no_newline_selector"),iR=im("keep_styles"),iA=im("end_container_on_empty_block"),iT=im("automatic_uploads"),iO=im("images_reuse_filename"),iB=im("images_replace_blob_uris"),iP=im("icons"),iD=im("icons_url"),iL=im("images_upload_url"),iM=im("images_upload_base_path"),iF=im("images_upload_credentials"),iI=im("images_upload_handler"),iU=im("content_css_cors"),iz=im("referrer_policy"),ij=im("language"),iH=im("language_url"),i$=im("indent_use_margin"),iV=im("indentation"),iq=im("content_css"),iW=im("content_style"),iK=im("font_css"),iY=im("directionality"),iG=im("inline_boundaries_selector"),iX=im("object_resizing"),iZ=im("resize_img_proportional"),iQ=im("placeholder"),iJ=im("event_root"),i0=im("service_message"),i1=im("theme"),i2=im("theme_url"),i3=im("model"),i8=im("model_url"),i5=im("inline_boundaries"),i6=im("formats"),i4=im("preview_styles"),i9=im("format_empty_lines"),i7=im("format_noneditable_selector"),se=im("custom_ui_selector"),st=im("inline"),sr=im("hidden_input"),sn=im("submit_patch"),so=im("add_form_submit_trigger"),sa=im("add_unload_trigger"),sl=im("custom_undo_redo_levels"),si=im("disable_nodechange"),ss=im("readonly"),sd=im("editable_root"),sc=im("content_css_cors"),su=im("plugins"),sm=im("external_plugins"),sg=im("block_unsupported_drop"),sf=im("visual"),sp=im("visual_table_class"),sh=im("visual_anchor_class"),sb=im("iframe_aria_text"),sv=im("setup"),sy=im("init_instance_callback"),sC=im("urlconverter_callback"),sE=im("auto_focus"),sw=im("browser_spellcheck"),sx=im("protect"),s_=im("paste_block_drop"),sk=im("paste_data_images"),sS=im("paste_preprocess"),sN=im("paste_postprocess"),sR=im("newdocument_content"),sA=im("paste_webkit_styles"),sT=im("paste_remove_styles_if_webkit"),sO=im("paste_merge_formats"),sB=im("smart_paste"),sP=im("paste_as_text"),sD=im("paste_tab_spaces"),sL=im("allow_html_data_urls"),sM=im("text_patterns"),sF=im("text_patterns_lookup"),sI=im("noneditable_class"),sU=im("editable_class"),sz=im("noneditable_regexp"),sj=im("preserve_cdata"),sH=im("highlight_on_focus"),s$=im("xss_sanitization"),sV=im("init_content_sync"),sq=t=>tz.explode(t.options.get("images_file_types")),sW=im("table_tab_navigation"),sK=im("details_initial_state"),sY=im("details_serialized_state"),sG=im("sandbox_iframes"),sX=t=>t.options.get("sandbox_iframes_exclusions"),sZ=im("convert_unsafe_embeds"),sQ=im("license_key"),sJ=im("api_key"),s0=t=>{let r=t.parentNode;r&&r.removeChild(t)},s1=t=>{let r=ln(t);return{count:t.length-r.length,text:r}},s2=t=>{let r;for(;-1!==(r=t.data.lastIndexOf("\uFEFF"));)t.deleteData(r,1)},s3=(t,r)=>(s5(t),r),s8=(t,r)=>l$.isTextPosition(r)?n$(t)&&r.container()===t?((t,r)=>{let n=s1(t.data.substr(0,r.offset())),o=s1(t.data.substr(r.offset()));return(n.text+o.text).length>0?(s2(t),l$(t,r.offset()-n.count)):r})(t,r):s3(t,r):r.container()===t.parentNode?((t,r)=>{let n=r.container(),o=((t,r)=>{let n=ea(t,r);return -1===n?et.none():et.some(n)})(eR(n.childNodes),t).map(t=>t<r.offset()?l$(n,r.offset()-1):r).getOr(r);return s5(t),o})(t,r):s3(t,r),s5=t=>{nD(t)&&ll(t)&&(li(t)?t.removeAttribute("data-mce-caret"):s0(t)),n$(t)&&(s2(t),0===t.data.length&&s0(t))},s6=(t,r,n)=>{let o,a;let l=lh(r.getBoundingClientRect(),n);if("BODY"===t.tagName){let r=t.ownerDocument.documentElement;o=t.scrollLeft||r.scrollLeft,a=t.scrollTop||r.scrollTop}else{let r=t.getBoundingClientRect();o=t.scrollLeft-r.left,a=t.scrollTop-r.top}l.left+=o,l.right+=o,l.top+=a,l.bottom+=a,l.width=1;let i=r.offsetWidth-r.clientWidth;return i>0&&(n&&(i*=-1),l.left+=i,l.right+=i),l},s4=(t,r,n,o)=>{let a,l;let i=oo(),s=ix(t),d=t.dom,c=()=>{(t=>{var r,n;let o=nw(ru(t),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){let a=o[t].dom,l=a.previousSibling;if(lu(l)){let t=l.data;1===t.length?null===(r=l.parentNode)||void 0===r||r.removeChild(l):l.deleteData(t.length-1,1)}lc(l=a.nextSibling)&&(1===l.data.length?null===(n=l.parentNode)||void 0===n||n.removeChild(l):l.deleteData(0,1))}})(r),l&&(s5(l),l=null),i.on(t=>{d.remove(t.caret),i.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(t,u)=>{let m;if(c(),nJ(u))return null;if(!n(u))return l=((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF"),a=t.parentNode;if(r){let r=t.previousSibling;if(n$(r)){if(ll(r))return r;if(lu(r))return r.splitText(r.data.length-1)}null==a||a.insertBefore(o,t)}else{let r=t.nextSibling;if(n$(r)){if(ll(r))return r;if(lc(r))return r.splitText(1),r}t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o)}return o})(u,t),m=u.ownerDocument.createRange(),s7(l.nextSibling)?(m.setStart(l,0),m.setEnd(l,0)):(m.setStart(l,1),m.setEnd(l,1)),m;{let n=((t,r,n)=>{var o;let a=(null!==(o=r.ownerDocument)&&void 0!==o?o:document).createElement(t);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(lt().dom);let l=r.parentNode;return n?null==l||l.insertBefore(a,r):r.nextSibling?null==l||l.insertBefore(a,r.nextSibling):null==l||l.appendChild(a),a})(s,u,t),c=s6(r,u,t);d.setStyle(n,"top",c.top),d.setStyle(n,"caret-color","transparent"),l=n;let g=d.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});d.setStyles(g,{...c}),d.add(r,g),i.set({caret:g,element:u,before:t}),t&&d.addClass(g,"mce-visual-caret-before"),a=setInterval(()=>{i.on(t=>{o()?d.toggleClass(t.caret,"mce-visual-caret-hidden"):d.addClass(t.caret,"mce-visual-caret-hidden")})},500),(m=u.ownerDocument.createRange()).setStart(n,0),m.setEnd(n,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(t=>{let n=s6(r,t.element,t.before);d.setStyles(t.caret,{...n})})},destroy:()=>clearInterval(a)}},s9=()=>tM.browser.isFirefox(),s7=t=>nQ(t)||n1(t),de=t=>(s7(t)||nz(t)&&s9())&&rk(ru(t)).exists(rQ),dt=nI("display","block table table-cell table-caption list-item"),dr=t=>t>0,dn=t=>t<0,da=(t,r)=>{let n;for(;n=t(r);)if(!lo(n))return n;return null},dl=(t,r,n,o,a)=>{let l;let i=new nS(t,o),s=nQ(t)||lo(t);if(dn(r)){if(s&&n(l=da(i.prev.bind(i),!0)))return l;for(;l=da(i.prev.bind(i),a);)if(n(l))return l}if(dr(r)){if(s&&n(l=da(i.next.bind(i),!0)))return l;for(;l=da(i.next.bind(i),a);)if(n(l))return l}return null},di=(t,r)=>{for(;t&&t!==r;){if(dt(t))return t;t=t.parentNode}return null},ds=(t,r,n)=>di(t.container(),n)===di(r.container(),n),dd=(t,r)=>{if(!r)return et.none();let n=r.container(),o=r.offset();return nD(n)?et.from(n.childNodes[o+t]):et.none()},dc=(t,r)=>{var n;let o=(null!==(n=r.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),o},du=(t,r,n)=>di(r,t)===di(n,t),dm=(t,r,n)=>{let o=t?"previousSibling":"nextSibling",a=n;for(;a&&a!==r;){let t=a[o];if(t&&ll(t)&&(t=t[o]),nQ(t)||n1(t)){if(du(r,t,a))return t;break}if(lR(t))break;a=a.parentNode}return null},dg=Y(dc,!0),df=Y(dc,!1),dp=(t,r,n)=>{let o;let a=Y(dm,!0,r),l=Y(dm,!1,r),i=n.startContainer,s=n.startOffset;if(lo(i)){let t=n$(i)?i.parentNode:i,r=t.getAttribute("data-mce-caret");if("before"===r&&de(o=t.nextSibling))return dg(o);if("after"===r&&de(o=t.previousSibling))return df(o)}if(!n.collapsed)return n;if(n$(i)){if(ll(i)){if(1===t){if(o=l(i))return dg(o);if(o=a(i))return df(o)}if(-1===t){if(o=a(i))return df(o);if(o=l(i))return dg(o)}return n}if(lu(i)&&s>=i.data.length-1)return 1===t&&(o=l(i))?dg(o):n;if(lc(i)&&s<=1)return -1===t&&(o=a(i))?df(o):n;if(s===i.data.length)return(o=l(i))?dg(o):n;if(0===s)return(o=a(i))?df(o):n}return n},dh=(t,r)=>dd(t?0:-1,r).filter(nQ),db=(t,r,n)=>{let o=dp(t,r,n);return -1===t?l$.fromRangeStart(o):l$.fromRangeEnd(o)},dv=t=>et.from(t.getNode()).map(ru),dy=(t,r)=>{let n=r;for(;(n=t(n))&&!n.isVisible(););return n},dC=(t,r)=>{let n=ds(t,r);return!(n||!nG(t.getNode()))||n};(i=m||(m={}))[i.Backwards=-1]="Backwards",i[i.Forwards=1]="Forwards";let dE=t=>lS(t)||!!lA(t)&&!ef(eR(t.getElementsByTagName("*")),(t,r)=>t||nZ(r),!1),dw=(t,r)=>t.hasChildNodes()&&r<t.childNodes.length?t.childNodes[r]:null,dx=(t,r)=>{if(dr(t)){if(lR(r.previousSibling)&&!n$(r.previousSibling))return l$.before(r);if(n$(r))return l$(r,0)}if(dn(t)){if(lR(r.nextSibling)&&!n$(r.nextSibling))return l$.after(r);if(n$(r))return l$(r,r.data.length)}return dn(t)?nG(r)?l$.before(r):l$.after(r):l$.before(r)},d_=(t,r,n)=>{let o,a,l,i;if(!nD(n)||!r)return null;if(r.isEqual(l$.after(n))&&n.lastChild){if(i=l$.after(n.lastChild),dn(t)&&lR(n.lastChild)&&nD(n.lastChild))return nG(n.lastChild)?l$.before(n.lastChild):i}else i=r;let s=i.container(),d=i.offset();if(n$(s)){if(dn(t)&&d>0)return l$(s,--d);if(dr(t)&&d<s.length)return l$(s,++d);o=s}else{if(dn(t)&&d>0&&lR(a=dw(s,d-1)))return!dE(a)&&(l=dl(a,t,lT,a))?n$(l)?l$(l,l.data.length):l$.after(l):n$(a)?l$(a,a.data.length):l$.before(a);if(dr(t)&&d<s.childNodes.length&&lR(a=dw(s,d)))return nG(a)?((t,r)=>{let n=r.nextSibling;return n&&lR(n)?n$(n)?l$(n,0):l$.before(n):d_(m.Forwards,l$.after(r),t)})(n,a):!dE(a)&&(l=dl(a,t,lT,a))?n$(l)?l$(l,0):l$.before(l):n$(a)?l$(a,0):l$.after(a);o=a||i.getNode()}if(o&&(dr(t)&&i.isAtEnd()||dn(t)&&i.isAtStart())&&lT(o=dl(o,t,ee,n,!0),n))return dx(t,o);a=o?dl(o,t,lT,n):o;let c=eQ(em(((t,r)=>{let n=[],o=t;for(;o&&o!==r;)n.push(o),o=o.parentNode;return n})(s,n),nQ));return!c||a&&c.contains(a)?a?dx(t,a):null:i=dr(t)?l$.after(c):l$.before(c)},dk=t=>({next:r=>d_(m.Forwards,r,t),prev:r=>d_(m.Backwards,r,t)}),dS=t=>l$.isTextPosition(t)?0===t.offset():lR(t.getNode()),dN=t=>{if(l$.isTextPosition(t)){let r=t.container();return t.offset()===r.data.length}return lR(t.getNode(!0))},dR=(t,r)=>!l$.isTextPosition(t)&&!l$.isTextPosition(r)&&t.getNode()===r.getNode(!0),dA=(t,r,n)=>{let o=dk(r);return et.from(t?o.next(n):o.prev(n))},dT=(t,r,n)=>dA(t,r,n).bind(o=>ds(n,o,r)&&(t?!dR(n,o)&&!(!l$.isTextPosition(n)&&nG(n.getNode()))&&dN(n)&&dS(o):!dR(o,n)&&dS(n)&&dN(o))?dA(t,r,o):et.some(o)),dO=(t,r,n,o)=>dT(t,r,n).bind(n=>o(n)?dO(t,r,n,o):et.some(n)),dB=(t,r)=>{let n=t?r.firstChild:r.lastChild;return n$(n)?et.some(l$(n,t?0:n.data.length)):n?lR(n)?et.some(t?l$.before(n):nG(n)?l$.before(n):l$.after(n)):((t,r,n)=>{let o=t?l$.before(n):l$.after(n);return dA(t,r,o)})(t,r,n):et.none()},dP=Y(dA,!0),dD=Y(dA,!1),dL=Y(dB,!0),dM=Y(dB,!1),dF="_mce_caret",dI=t=>nD(t)&&t.id===dF,dU=(t,r)=>{let n=r;for(;n&&n!==t;){if(dI(n))return n;n=n.parentNode}return null},dz=t=>eH(t,"name"),dj=t=>tz.isArray(t.start),dH=t=>!(!dz(t)&&L(t.forward))||t.forward,d$=(t,r)=>(nD(r)&&t.isBlock(r)&&!r.innerHTML&&(r.innerHTML='<br data-mce-bogus="1" />'),r),dV=(t,r)=>dM(t).fold(J,t=>(r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),!0)),dq=(t,r,n)=>!(r.hasChildNodes()||!dU(t,r)||(((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF");t.appendChild(o),r.setStart(o,0),r.setEnd(o,0)})(r,n),0)),dW=(t,r,n,o)=>{let a=n[r?"start":"end"],l=t.getRoot();if(a){let t=l,n=a[0];for(let r=a.length-1;t&&r>=1;r--){let n=t.childNodes;if(dq(l,t,o))return!0;if(a[r]>n.length-1)return!!dq(l,t,o)||dV(t,o);t=n[a[r]]}n$(t)&&(n=Math.min(a[0],t.data.length)),nD(t)&&(n=Math.min(a[0],t.childNodes.length)),r?o.setStart(t,n):o.setEnd(t,n)}return!0},dK=t=>n$(t)&&t.data.length>0,dY=(t,r,n)=>{let o=t.get(n.id+"_"+r),a=null==o?void 0:o.parentNode,l=n.keep;if(o&&a){let i,s;if("start"===r?l?o.hasChildNodes()?(i=o.firstChild,s=1):dK(o.nextSibling)?(i=o.nextSibling,s=0):dK(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)+1):(i=a,s=t.nodeIndex(o)):l?o.hasChildNodes()?(i=o.firstChild,s=1):dK(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)):(i=a,s=t.nodeIndex(o)),!l){let a;let l=o.previousSibling,d=o.nextSibling;for(tz.each(tz.grep(o.childNodes),t=>{n$(t)&&(t.data=t.data.replace(/\uFEFF/g,""))});a=t.get(n.id+"_"+r);)t.remove(a,!0);if(n$(d)&&n$(l)&&!tM.browser.isOpera()){let r=l.data.length;l.appendData(d.data),t.remove(d),i=l,s=r}}return et.some(l$(i,s))}return et.none()},dG=(t,r,n)=>((t,r,n=!1)=>2===r?l8(ln,n,t):3===r?(t=>{let r=t.getRng();return{start:lZ(t.dom.getRoot(),l$.fromRangeStart(r)),end:lZ(t.dom.getRoot(),l$.fromRangeEnd(r)),forward:t.isForward()}})(t):r?{rng:t.getRng(),forward:t.isForward()}:l6(t,!1))(t,r,n),dX=(t,r)=>{((t,r)=>{let n=t.dom;if(r){if(dj(r))return((t,r)=>{let n=t.createRng();return dW(t,!0,r,n)&&dW(t,!1,r,n)?et.some({range:n,forward:dH(r)}):et.none()})(n,r);if(T(r.start))return t$(et.from(lQ(n.getRoot(),r.start)),et.from(lQ(n.getRoot(),r.end)),(t,o)=>{let a=n.createRng();return a.setStart(t.container(),t.offset()),a.setEnd(o.container(),o.offset()),{range:a,forward:dH(r)}});if(eH(r,"id"))return((t,r)=>{let n=dY(t,"start",r);return t$(n,dY(t,"end",r).or(n),(n,o)=>{let a=t.createRng();return a.setStart(d$(t,n.container()),n.offset()),a.setEnd(d$(t,o.container()),o.offset()),{range:a,forward:dH(r)}})})(n,r);if(dz(r))return et.from(n.select(r.name)[r.index]).map(t=>{let r=n.createRng();return r.selectNode(t),{range:r,forward:!0}});if(eH(r,"rng"))return et.some({range:r.rng,forward:dH(r)})}return et.none()})(t,r).each(({range:r,forward:n})=>{t.setRng(r,n)})},dZ=t=>nD(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),dQ=t=>"\xa0"===t,dJ=t=>""!==t&&-1!==" \f\n\r	\v".indexOf(t),d0=t=>!dJ(t)&&!dQ(t)&&!nN(t),d1=t=>{let r=[];if(t)for(let n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));return r},d2=(t,r)=>{let n=nw(r,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:em(ey(t,t=>{let r=lE(t);return r?[ru(r)]:[]}),a7)},d3=t=>d2(d1(t.selection.getSel()),ru(t.getBody())),d8=(t,r)=>rG(t,"table",r),d5=t=>rP(t).fold(q([t]),r=>[t].concat(d5(r))),d6=t=>rD(t).fold(q([t]),r=>"br"===tG(r)?rN(r).map(r=>[t].concat(d6(r))).getOr([]):[t].concat(d6(r))),d4=(t,r)=>t$((t=>{let r=t.startContainer,n=t.startOffset;return n$(r)?0===n?et.some(ru(r)):et.none():et.from(r.childNodes[n]).map(ru)})(r),(t=>{let r=t.endContainer,n=t.endOffset;return n$(r)?n===r.data.length?et.some(ru(r)):et.none():et.from(r.childNodes[n-1]).map(ru)})(r),(r,n)=>{let o=eh(d5(t),Y(ry,r)),a=eh(d6(t),Y(ry,n));return o.isSome()&&a.isSome()}).getOr(!1),d9=(t,r,n,o)=>{let a=new nS(n,n),l=eI(t.schema.getMoveCaretBeforeOnEnterElements(),(t,r)=>!el(["td","th","table"],r.toLowerCase())),i=n;do{if(n$(i)&&0!==tz.trim(i.data).length)return void(o?r.setStart(i,0):r.setEnd(i,i.data.length));if(l[i.nodeName])return void(o?r.setStartBefore(i):"BR"===i.nodeName?r.setEndBefore(i):r.setEndAfter(i))}while(i=o?a.next():a.prev());"BODY"===n.nodeName&&(o?r.setStart(n,0):r.setEnd(n,n.childNodes.length))},d7=t=>{let r=t.selection.getSel();return I(r)&&r.rangeCount>0},ce=(t,r)=>{let n=d3(t);n.length>0?ed(n,n=>{let o=n.dom,a=t.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),r(a,!0)}):r(t.selection.getRng(),!1)},ct=(t,r,n)=>{let o=l6(t,r);n(o),t.moveToBookmark(o)},cr=t=>z(null==t?void 0:t.nodeType),cn=t=>nD(t)&&!dZ(t)&&!dI(t)&&!nU(t),co=(t,r,n)=>{let{selection:o,dom:a}=t,l=o.getNode(),i=nQ(l);ct(o,!0,()=>{r()}),i&&nQ(l)&&a.isChildOf(l,t.getBody())?t.selection.select(l):n(o.getStart())&&ca(a,o)},ca=(t,r)=>{var n,o;let a=r.getRng(),{startContainer:l,startOffset:i}=a;if(!((t,r)=>{if(cn(r)&&!/^(TD|TH)$/.test(r.nodeName)){let n=parseInt(t.getAttrib(r,"data-mce-selected"),10);return!isNaN(n)&&n>0}return!1})(t,r.getNode())&&nD(l)){let s;let d=l.childNodes,c=t.getRoot();if(i<d.length){let r=d[i];s=new nS(r,null!==(n=t.getParent(r,t.isBlock))&&void 0!==n?n:c)}else{let r=d[d.length-1];(s=new nS(r,null!==(o=t.getParent(r,t.isBlock))&&void 0!==o?o:c)).next(!0)}for(let n=s.current();n;n=s.next()){if("false"===t.getContentEditable(n))return;if(n$(n)&&!cd(n))return a.setStart(n,0),void r.setRng(a)}}},cl=(t,r,n)=>{if(t){let o=r?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nD(t)||!cd(t))return t}},ci=(t,r)=>!!t.getTextBlockElements()[r.nodeName.toLowerCase()]||oE(t,r),cs=(t,r,n)=>t.schema.isValidChild(r,n),cd=(t,r=!1)=>!!(I(t)&&n$(t))&&nA(r?t.data.replace(/ /g,"\xa0"):t.data),cc=(t,r)=>{let n=t.dom;return cn(r)&&"false"===n.getContentEditable(r)&&((t,r)=>{let n="[data-mce-cef-wrappable]",o=i7(t),a=to(o)?n:`${n},${o}`;return rb(ru(r),a)})(t,r)&&0===n.select('[contenteditable="true"]',r).length},cu=(t,r)=>U(t)?t(r):(I(r)&&(t=t.replace(/%(\w+)/g,(t,n)=>r[n]||t)),t),cm=(t,r)=>(r=r||"",t=""+((t=t||"").nodeName||t),r=""+(r.nodeName||r),t.toLowerCase()===r.toLowerCase()),cg=(t,r)=>{if(F(t))return null;{let n=String(t);return"color"!==r&&"backgroundColor"!==r||(n=ai(n)),"fontWeight"===r&&700===t&&(n="bold"),"fontFamily"===r&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},cf=(t,r,n)=>cg(t.getStyle(r,n),n),cp=(t,r)=>{let n;return t.getParent(r,r=>!!nD(r)&&!!(n=t.getStyle(r,"text-decoration"))&&"none"!==n),n},ch=(t,r,n)=>t.getParents(r,n,t.getRoot()),cb=(t,r,n)=>{let o=t.formatter.get(r);return I(o)&&ei(o,n)},cv=t=>e$(t,"block"),cy=t=>e$(t,"selector"),cC=t=>e$(t,"inline"),cE=t=>cy(t)&&!1!==t.expand&&!cC(t),cw=t=>(t=>{let r=[],n=t;for(;n;){if(n$(n)&&"\uFEFF"!==n.data||n.childNodes.length>1)return[];nD(n)&&r.push(n),n=n.firstChild}return r})(t).length>0,cx=t=>dI(t.dom)&&cw(t.dom),c_=(t,r)=>{let n=r;for(;n;){if(nD(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:r;n=n.parentNode}return r},ck=(t,r,n,o)=>{let a=r.data;if(t){for(let t=n;t>0;t--)if(o(a.charAt(t-1)))return t}else for(let t=n;t<a.length;t++)if(o(a.charAt(t)))return t;return -1},cS=(t,r,n)=>ck(t,r,n,t=>dQ(t)||dJ(t)),cN=(t,r,n)=>ck(t,r,n,d0),cR=(t,r,n,o,a,l)=>{let i;let s=t.getParent(n,t.isBlock)||r,d=(r,n,o)=>{let l=a0(t),d=a?l.backwards:l.forwards;return et.from(d(r,n,(t,r)=>dZ(t.parentNode)?-1:(i=t,o(a,t,r)),s))};return d(n,o,cS).bind(t=>l?d(t.container,t.offset+(a?-1:0),cN):et.some(t)).orThunk(()=>i?et.some({container:i,offset:a?0:i.length}):et.none())},cA=(t,r,n,o,a)=>{let l=o[a];n$(o)&&to(o.data)&&l&&(o=l);let i=ch(t,o);for(let o=0;o<i.length;o++)for(let a=0;a<r.length;a++){let l=r[a];if((!I(l.collapsed)||l.collapsed===n.collapsed)&&cy(l)&&t.is(i[o],l.selector))return i[o]}return o},cT=(t,r,n,o)=>{var a;let l=n,i=t.getRoot(),s=r[0];if(cv(s)&&(l=s.wrapper?null:t.getParent(n,s.block,i)),!l){let r=null!==(a=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==a?a:i;l=t.getParent(n$(n)?n.parentNode:n,r=>r!==i&&ci(t.schema,r),r)}if(l&&cv(s)&&s.wrapper&&(l=ch(t,l,"ul,ol").reverse()[0]||l),!l)for(l=n;l&&l[o]&&!t.isBlock(l[o])&&!cm(l=l[o],"br"););return l||n},cO=(t,r,n,o)=>{let a=n.parentNode;return!I(n[o])&&(!(a!==r&&!F(a)&&!t.isBlock(a))||cO(t,r,a,o))},cB=(t,r,n,o,a)=>{var l;let i=n,s=a?"previousSibling":"nextSibling",d=t.getRoot();if(n$(n)&&!cd(n)&&(a?o>0:o<n.data.length))return n;for(;i;){if(!r[0].block_expand&&t.isBlock(i))return i;for(let r=i[s];r;r=r[s]){let n=n$(r)&&!cO(t,d,r,s);if(!dZ(r)&&(!nG(l=r)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!cd(r,n))return i}if(i===d||i.parentNode===d){n=i;break}i=i.parentNode}return n},cP=t=>dZ(t.parentNode)||dZ(t),cD=(t,r,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:s}=r,d=n[0];return nD(a)&&a.hasChildNodes()&&n$(a=lw(a,l))&&(l=0),nD(i)&&i.hasChildNodes()&&n$(i=lw(i,r.collapsed?s:s-1))&&(s=i.data.length),a=c_(t,a),i=c_(t,i),cP(a)&&(a=dZ(a)?a:a.parentNode,n$(a=r.collapsed?a.previousSibling||a:a.nextSibling||a)&&(l=r.collapsed?a.length:0)),cP(i)&&(i=dZ(i)?i:i.parentNode,n$(i=r.collapsed?i.nextSibling||i:i.previousSibling||i)&&(s=r.collapsed?0:i.length)),r.collapsed&&(cR(t,t.getRoot(),a,l,!0,o).each(({container:t,offset:r})=>{a=t,l=r}),cR(t,t.getRoot(),i,s,!1,o).each(({container:t,offset:r})=>{i=t,s=r})),(cC(d)||d.block_expand)&&(cC(d)&&n$(a)&&0!==l||(a=cB(t,n,a,l,!0)),cC(d)&&n$(i)&&s!==i.data.length||(i=cB(t,n,i,s,!1))),cE(d)&&(a=cA(t,n,r,a,"previousSibling"),i=cA(t,n,r,i,"nextSibling")),(cv(d)||cy(d))&&(a=cT(t,n,a,"previousSibling"),i=cT(t,n,i,"nextSibling"),cv(d)&&(t.isBlock(a)||n$(a=cB(t,n,a,l,!0))&&(l=0),t.isBlock(i)||n$(i=cB(t,n,i,s,!1))&&(s=i.data.length))),nD(a)&&a.parentNode&&(l=t.nodeIndex(a),a=a.parentNode),nD(i)&&i.parentNode&&(s=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:s}},cL=(t,r,n)=>{var o;let a=r.startOffset,l=lw(r.startContainer,a),i=r.endOffset,s=lw(r.endContainer,i-1),d=t=>{let r=t[0];n$(r)&&r===l&&a>=r.data.length&&t.splice(0,1);let n=t[t.length-1];return 0===i&&t.length>0&&n===s&&n$(n)&&t.splice(t.length-1,1),t},c=(t,r,n)=>{let o=[];for(;t&&t!==n;t=t[r])o.push(t);return o},u=(r,n)=>t.getParent(r,t=>t.parentNode===n,n),m=(t,r,o)=>{let a=o?"nextSibling":"previousSibling";for(let l=t,i=l.parentNode;l&&l!==r;l=i){i=l.parentNode;let r=c(l===t?l:l[a],a);r.length&&(o||r.reverse(),n(d(r)))}};if(l===s)return n(d([l]));let g=null!==(o=t.findCommonAncestor(l,s))&&void 0!==o?o:t.getRoot();if(t.isChildOf(l,s))return m(l,g,!0);if(t.isChildOf(s,l))return m(s,g);let f=u(l,g)||l,p=u(s,g)||s;m(l,f,!0);let h=c(f===l?f:f.nextSibling,"nextSibling",p===s?p.nextSibling:p);h.length&&n(d(h)),m(s,p)},cM=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cF=(t,r,n,o,a,l)=>{let{uid:i=r,...s}=n;ri(t,aF()),t5(t,`${aU()}`,i),t5(t,`${aI()}`,o);let{attributes:d={},classes:c=[]}=a(i,s);if(t6(t,d),ed(c,r=>{ri(t,r)}),l){c.length>0&&t5(t,`${aj()}`,c.join(","));let r=eO(d);r.length>0&&t5(t,`${aH()}`,r.join(","))}},cI=(t,r,n,o,a)=>{let l=rg("span",t);return cF(l,r,n,o,a,!1),l},cU=(t,r,n,o,a,l)=>{let i=[],s=cI(t.getDoc(),n,l,o,a),d=oo(),c=()=>{d.clear()},u=t=>{ed(t,m)},m=r=>{let m,g;switch(m="span",g=tG(r),r_(r).fold(()=>"skipping",n=>"br"===g||t0(r)&&"\uFEFF"===a2(r)?"valid":tJ(r)&&rc(r,aF())?"existing":dI(r.dom)?"caret":ei(cM,t=>rb(r,t))?"valid-block":cs(t,m,g)&&cs(t,tG(n),m)?"valid":"invalid-child")){case"invalid-child":c(),u(rO(r)),c();break;case"valid-block":c(),cF(r,n,l,o,a,!0);break;case"valid":nn(r,d.get().getOrThunk(()=>{let t=aZ(s);return i.push(t),d.set(t),t}))}};return cL(t.dom,r,t=>{c(),u(es(t,ru))}),i},cz=t=>{let r=(()=>{let t={};return{register:(r,n)=>{t[r]={name:r,settings:n}},lookup:r=>ej(t,r).map(t=>t.settings),getNames:()=>eO(t)}})();((t,r)=>{let n=aI(),o=t=>et.from(t.attr(n)).bind(r.lookup),a=t=>{var r,n;t.attr(aU(),null),t.attr(aI(),null),t.attr(az(),null);let o=et.from(t.attr(aH())).map(t=>t.split(",")).getOr([]),a=et.from(t.attr(aj())).map(t=>t.split(",")).getOr([]);ed(o,r=>t.attr(r,null));let l=ew(null!==(n=null===(r=t.attr("class"))||void 0===r?void 0:r.split(" "))&&void 0!==n?n:[],[aF()].concat(a));t.attr("class",l.length>0?l.join(" "):null),t.attr(aj(),null),t.attr(aH(),null)};t.serializer.addTempAttr(az()),t.serializer.addAttributeFilter(n,t=>{for(let r of t)o(r).each(t=>{!1===t.persistent&&("span"===r.name?r.unwrap():a(r))})})})(t,r);let n=((t,r)=>{let n=or({}),o=()=>({listeners:[],previous:oo()}),a=(t,r)=>{l(t,t=>(r(t),t))},l=(t,r)=>{let a=n.get(),l=r(ej(a,t).getOrThunk(o));a[t]=l,n.set(a)},i=(r,n)=>{ed(aW(t,r),t=>{n?t5(t,az(),"true"):re(t,az())})},s=aM(()=>{ed(e_(r.getNames()),r=>{l(r,n=>{let o=n.previous.get();return aV(t,et.some(r)).fold(()=>{o.each(t=>{a(r,t=>{ed(t.listeners,t=>t(!1,r))}),n.previous.clear(),i(t,!1)})},({uid:t,name:r,elements:l})=>{tj(o,t)||(o.each(t=>i(t,!1)),a(r,n=>{ed(n.listeners,n=>n(!0,r,{uid:t,nodes:es(l,t=>t.dom)}))}),n.previous.set(t),i(t,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return t.on("remove",()=>{s.cancel()}),t.on("NodeChange",()=>{s.throttle()}),{addListener:(t,r)=>{l(t,t=>({previous:t.previous,listeners:t.listeners.concat([r])}))}}})(t,r),o=t3("span"),a=t=>{ed(t,t=>{o(t)?ni(t):(t=>{rd(t,aF()),re(t,`${aU()}`),re(t,`${aI()}`),re(t,`${az()}`);let r=t9(t,`${aH()}`).map(t=>t.split(",")).getOr([]),n=t9(t,`${aj()}`).map(t=>t.split(",")).getOr([]);ed(r,r=>re(t,r)),ed(n,r=>{rd(t,r)}),re(t,`${aj()}`),re(t,`${aH()}`)})(t)})};return{register:(t,n)=>{r.register(t,n)},annotate:(n,o)=>{r.lookup(n).each(r=>{((t,r,n,o)=>{t.undoManager.transact(()=>{let a=t.selection,l=a.getRng(),i=d3(t).length>0,s=aG("mce-annotation");if(l.collapsed&&!i&&((t,r)=>{let n=cD(t.dom,r,[{inline:"span"}]);r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),t.selection.setRng(r)})(t,l),a.getRng().collapsed&&!i){let l=cI(t.getDoc(),s,o,r,n.decorate);nc(l,"\xa0"),a.getRng().insertNode(l.dom),a.select(l.dom)}else ct(a,!1,()=>{ce(t,a=>{cU(t,a,s,r,n.decorate,o)})})})})(t,n,r,o)})},annotationChanged:(t,r)=>{n.addListener(t,r)},remove:r=>{aV(t,et.some(r)).each(({elements:r})=>{let n=t.selection.getBookmark();a(r),t.selection.moveToBookmark(n)})},removeAll:r=>{let n=t.selection.getBookmark();eP(aK(t,r),(t,r)=>{a(t)}),t.selection.moveToBookmark(n)},getAll:r=>eD(aK(t,r),t=>es(t,t=>t.dom))}},cj=t=>({getBookmark:Y(dG,t),moveToBookmark:Y(dX,t)});cj.isBookmarkNode=dZ;let cH=(t,r,n)=>!n.collapsed&&ei(n.getClientRects(),n=>t>=n.left&&t<=n.right&&r>=n.top&&r<=n.bottom),c$=(t,r,n)=>{t.dispatch(r,n)},cV=(t,r,n,o)=>{t.dispatch("FormatApply",{format:r,node:n,vars:o})},cq=(t,r,n,o)=>{t.dispatch("FormatRemove",{format:r,node:n,vars:o})},cW=(t,r)=>t.dispatch("SetContent",r),cK=(t,r)=>t.dispatch("GetContent",r),cY=(t,r)=>{t.dispatch("AutocompleterUpdateActiveRange",r)},cG=(t,r)=>t.dispatch("PastePlainTextToggle",{state:r}),cX={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||cX.metaKeyPressed(t),metaKeyPressed:t=>tM.os.isMacOS()||tM.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},cZ="data-mce-selected",cQ=Math.abs,cJ=Math.round,c0={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},c1=(t,r)=>{let n,o,a,l,i,s,d,c,u,m,g,f,p,h,b;let v=r.dom,y=r.getDoc(),C=document,E=r.getBody(),w=t=>I(t)&&(nX(t)||v.is(t,"figure.image")),x=t=>n1(t)||v.hasClass(t,"mce-preview-object"),_=t=>{let n=t.target;((t,r)=>{if("longpress"===t.type||0===t.type.indexOf("touch")){let n=t.touches[0];return w(t.target)&&!cH(n.clientX,n.clientY,r)}return w(t.target)&&!cH(t.clientX,t.clientY,r)})(t,r.selection.getRng())&&!t.isDefaultPrevented()&&r.selection.select(n)},k=t=>v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?[t,t.firstElementChild]:v.is(t,"figure.image")?[t.querySelector("img")]:[t],S=t=>{let n=iX(r);return!!n&&"false"!==t.getAttribute("data-mce-resize")&&t!==r.getBody()&&(v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?rb(ru(t.firstElementChild),n):rb(ru(t),n))},N=(t,n,o)=>{I(o)&&ed(k(t),t=>{t.style[n]||!r.schema.isValid(t.nodeName.toLowerCase(),n)?v.setStyle(t,n,o):v.setAttrib(t,n,""+o)})},R=(t,r,n)=>{N(t,"width",r),N(t,"height",n)},A=t=>{let i,y,C,_;i=t.screenX-s,y=t.screenY-d,f=i*l[2]+c,p=y*l[3]+u,f=f<5?5:f,p=p<5?5:p,((w(n)||x(n))&&!1!==iZ(r)?!cX.modifierPressed(t):cX.modifierPressed(t))&&(cQ(i)>cQ(y)?(p=cJ(f*m),f=cJ(p/m)):(f=cJ(p/m),p=cJ(f*m))),R(o,f,p),C=l.startPos.x+i,_=l.startPos.y+y,C=C>0?C:0,_=_>0?_:0,v.setStyles(a,{left:C,top:_,display:"block"}),a.innerHTML=f+" &times; "+p,l[2]<0&&o.clientWidth<=f&&v.setStyle(o,"left",(void 0)+(c-f)),l[3]<0&&o.clientHeight<=p&&v.setStyle(o,"top",(void 0)+(u-p)),(i=E.scrollWidth-h)+(y=E.scrollHeight-b)!=0&&v.setStyles(a,{left:C-i,top:_-y}),g||(((t,r,n,o,a)=>{t.dispatch("ObjectResizeStart",{target:r,width:n,height:o,origin:a})})(r,n,c,u,"corner-"+l.name),g=!0)},T=()=>{let t=g;g=!1,t&&(N(n,"width",f),N(n,"height",p)),v.unbind(y,"mousemove",A),v.unbind(y,"mouseup",T),C!==y&&(v.unbind(C,"mousemove",A),v.unbind(C,"mouseup",T)),v.remove(o),v.remove(a),v.remove(i),O(n),t&&(((t,r,n,o,a)=>{t.dispatch("ObjectResized",{target:r,width:n,height:o,origin:a})})(r,n,f,p,"corner-"+l.name),v.setAttrib(n,"style",v.getAttrib(n,"style"))),r.nodeChanged()},O=t=>{M();let g=v.getPos(t,E),w=g.x,_=g.y,N=t.getBoundingClientRect(),O=N.width||N.right-N.left,B=N.height||N.bottom-N.top;n!==t&&(P(),n=t,f=p=0);let D=r.dispatch("ObjectSelected",{target:t});S(t)&&!D.isDefaultPrevented()?eP(c0,(t,r)=>{let g=v.get("mceResizeHandle"+r);g&&v.remove(g),g=v.add(E,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),v.bind(g,"mousedown",g=>{g.stopImmediatePropagation(),g.preventDefault(),(g=>{let f=k(n)[0];s=g.screenX,d=g.screenY,c=f.clientWidth,m=(u=f.clientHeight)/c,(l=t).name=r,l.startPos={x:O*t[0]+w,y:B*t[1]+_},h=E.scrollWidth,b=E.scrollHeight,i=v.add(E,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),v.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),o=((t,r)=>{if(x(r))return t.create("img",{src:tM.transparentSrc});if(nz(r)){let n=e4(l.name,"n")?eS:eN,o=r.cloneNode(!0);return n(t.select("tr",o)).each(r=>{let n=t.select("td,th",r);t.setStyle(r,"height",null),ed(n,r=>t.setStyle(r,"height",null))}),o}return r.cloneNode(!0)})(v,n),v.addClass(o,"mce-clonedresizable"),v.setAttrib(o,"data-mce-bogus","all"),o.contentEditable="false",v.setStyles(o,{left:w,top:_,margin:0}),R(o,O,B),o.removeAttribute(cZ),E.appendChild(o),v.bind(y,"mousemove",A),v.bind(y,"mouseup",T),C!==y&&(v.bind(C,"mousemove",A),v.bind(C,"mouseup",T)),a=v.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+u)})(g)}),t.elm=g,v.setStyles(g,{left:O*t[0]+w-g.offsetWidth/2,top:B*t[1]+_-g.offsetHeight/2})}):P(!1)},B=aL(O,0),P=(t=!0)=>{B.cancel(),M(),n&&t&&n.removeAttribute(cZ),eP(c0,(t,r)=>{let n=v.get("mceResizeHandle"+r);n&&(v.unbind(n),v.remove(n))})},D=(t,r)=>v.isChildOf(t,r),L=n=>{if(g||r.removed||r.composing)return;let o=rZ(ru("mousedown"===n.type?n.target:t.getNode()),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(t=>t.dom).filter(t=>v.isEditable(t.parentElement)||"IMG"===t.nodeName&&v.isEditable(t)).getOrUndefined(),a=I(o)?v.getAttrib(o,cZ,"1"):"1";if(ed(v.select(`img[${cZ}],hr[${cZ}]`),t=>{t.removeAttribute(cZ)}),I(o)&&D(o,E)&&r.hasFocus()&&(F(),D(t.getStart(!0),o)&&D(t.getEnd(!0),o)))return v.setAttrib(o,cZ,a),void B.throttle(o);P()},M=()=>{eP(c0,t=>{t.elm&&(v.unbind(t.elm),delete t.elm)})},F=()=>{try{r.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return r.on("init",()=>{F(),r.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),r.on("keyup compositionend",t=>{n&&"TABLE"===n.nodeName&&L(t)}),r.on("hide blur",P),r.on("contextmenu longpress",_,!0)}),r.on("remove",M),{isResizable:S,showResizeRect:O,hideResizeRect:P,updateResizeRect:L,destroy:()=>{B.cancel(),n=o=i=null}}},c2=(t,r,n)=>{let o=t.document.createRange();return r.fold(t=>{o.setStartBefore(t.dom)},(t,r)=>{o.setStart(t.dom,r)},t=>{o.setStartAfter(t.dom)}),((t,r)=>{r.fold(r=>{t.setEndBefore(r.dom)},(r,n)=>{t.setEnd(r.dom,n)},r=>{t.setEndAfter(r.dom)})})(o,n),o},c3=(t,r,n,o,a)=>{let l=t.document.createRange();return l.setStart(r.dom,n),l.setEnd(o.dom,a),l},c8=l7([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c5=(t,r,n)=>r(ru(n.startContainer),n.startOffset,ru(n.endContainer),n.endOffset);c8.ltr,c8.rtl;let c6=(t,r,n,o)=>({start:t,soffset:r,finish:n,foffset:o}),c4=document.caretPositionFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretPositionFromPoint)||void 0===a?void 0:a.call(o,r,n)).bind(r=>{if(null===r.offsetNode)return et.none();let n=t.dom.createRange();return n.setStart(r.offsetNode,r.offset),n.collapse(),et.some(n)})}:document.caretRangeFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretRangeFromPoint)||void 0===a?void 0:a.call(o,r,n))}:et.none,c9=l7([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),c7={before:c9.before,on:c9.on,after:c9.after,cata:(t,r,n,o)=>t.fold(r,n,o),getStart:t=>t.fold(W,W,W)},ue=l7([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ut={domRange:ue.domRange,relative:ue.relative,exact:ue.exact,exactFromRange:t=>ue.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>rx(t.match({domRange:t=>ru(t.startContainer),relative:(t,r)=>c7.getStart(t),exact:(t,r,n,o)=>t})),range:c6},ur=(t,r)=>{let n=tG(t);return"input"===n?c7.after(t):el(["br","img"],n)?0===r?c7.before(t):c7.after(t):c7.on(t,r)},un=(t,r)=>{let n=t.fold(c7.before,ur,c7.after),o=r.fold(c7.before,ur,c7.after);return ut.relative(n,o)},uo=(t,r,n,o)=>{let a=ur(t,r),l=ur(n,o);return ut.relative(a,l)},ua=(t,r)=>{let n=(r||document).createDocumentFragment();return ed(t,t=>{n.appendChild(t.dom)}),ru(n)},ul=t=>{let r=ut.getWin(t).dom,n=(t,n,o,a)=>c3(r,t,n,o,a);return((t,r)=>{let n=r.ltr();return n.collapsed?r.rtl().filter(t=>!1===t.collapsed).map(t=>c8.rtl(ru(t.endContainer),t.endOffset,ru(t.startContainer),t.startOffset)).getOrThunk(()=>c5(0,c8.ltr,n)):c5(0,c8.ltr,n)})(0,t.match({domRange:t=>{let r=ru(t.startContainer),n=ru(t.endContainer);return uo(r,t.startOffset,n,t.endOffset)},relative:un,exact:uo}).match({domRange:t=>({ltr:q(t),rtl:et.none}),relative:(t,n)=>({ltr:eJ(()=>c2(r,t,n)),rtl:eJ(()=>et.some(c2(r,n,t)))}),exact:(t,n,o,a)=>({ltr:eJ(()=>c3(r,t,n,o,a)),rtl:eJ(()=>et.some(c3(r,o,a,t,n)))})})).match({ltr:n,rtl:n})},ui=(t,r,n)=>{var o;return(o=rx(ru(n)).dom,c4(ru(o.document),t,r).map(t=>c6(ru(t.startContainer),t.startOffset,ru(t.endContainer),t.endOffset))).map(t=>{let r=n.createRange();return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),r}).getOrUndefined()},us=(t,r)=>I(t)&&I(r)&&t.startContainer===r.startContainer&&t.startOffset===r.startOffset&&t.endContainer===r.endContainer&&t.endOffset===r.endOffset,ud=(t,r,n)=>null!==((t,r,n)=>{let o=t;for(;o&&o!==r;){if(n(o))return o;o=o.parentNode}return null})(t,r,n),uc=(t,r,n)=>ud(t,r,t=>t.nodeName===n),uu=(t,r)=>ll(t)&&!ud(t,r,dI),um=(t,r,n)=>{let o=r.parentNode;if(o){let a;let l=new nS(r,t.getParent(o,t.isBlock)||t.getRoot());for(;a=l[n?"prev":"next"]();)if(nG(a))return!0}return!1},ug=(t,r,n,o,a)=>{let l,i;let s=t.getRoot(),d=t.schema.getNonEmptyElements(),c=a.parentNode;if(!c)return et.none();let u=t.getParent(c,t.isBlock)||s;if(o&&nG(a)&&r&&t.isEmpty(u))return et.some(l$(c,t.nodeIndex(a)));let m=new nS(a,u);for(;i=m[o?"prev":"next"]();){if("false"===t.getContentEditableParent(i)||uu(i,s))return et.none();if(n$(i)&&i.data.length>0)return uc(i,s,"A")?et.none():et.some(l$(i,o?i.data.length:0));if(t.isBlock(i)||d[i.nodeName.toLowerCase()])return et.none();l=i}return nW(l)?et.none():n&&l?et.some(l$(l,0)):et.none()},uf=(t,r,n,o)=>{var a;let l=t.getRoot(),i,s=!1,d=n?o.startContainer:o.endContainer,c=n?o.startOffset:o.endOffset,u=nD(d)&&c===d.childNodes.length,m=t.schema.getNonEmptyElements(),g=n;if(ll(d))return et.none();if(nD(d)&&c>d.childNodes.length-1&&(g=!1),nK(d)&&(d=l,c=0),d===l){if(g&&(i=d.childNodes[c>0?c-1:0])&&(ll(i)||m[i.nodeName]||nz(i)))return et.none();if(d.hasChildNodes()){if(c=Math.min(!g&&c>0?c-1:c,d.childNodes.length-1),c=n$(d=d.childNodes[c])&&u?d.data.length:0,!r&&d===l.lastChild&&nz(d)||((t,r)=>{let n=r;for(;n&&n!==t;){if(nQ(n))return!0;n=n.parentNode}return!1})(l,d)||ll(d)||n3(d))return et.none();if(d.hasChildNodes()&&!nz(d)){i=d;let r=new nS(d,l);do{if(nQ(i)||ll(i)){s=!1;break}if(n$(i)&&i.data.length>0){c=g?0:i.data.length,d=i,s=!0;break}if(m[i.nodeName.toLowerCase()]&&!n0(i)){c=t.nodeIndex(i),d=i.parentNode,g||c++,s=!0;break}}while(i=g?r.next():r.prev())}}}return r&&(n$(d)&&0===c&&ug(t,u,r,!0,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),nD(d)&&((i=d.childNodes[c])||(i=d.childNodes[c-1]),!i||!nG(i)||"A"===(null===(a=i.previousSibling)||void 0===a?void 0:a.nodeName)||um(t,i,!1)||um(t,i,!0)||ug(t,u,r,!0,i).each(t=>{d=t.container(),c=t.offset(),s=!0}))),g&&!r&&n$(d)&&c===d.data.length&&ug(t,u,r,!1,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),s&&d?et.some(l$(d,c)):et.none()},up=(t,r)=>{let n=r.collapsed,o=r.cloneRange(),a=l$.fromRangeStart(r);return uf(t,n,!0,o).each(t=>{n&&l$.isAbove(a,t)||o.setStart(t.container(),t.offset())}),n||uf(t,n,!1,o).each(t=>{o.setEnd(t.container(),t.offset())}),n&&o.collapse(!0),us(r,o)?et.none():et.some(o)},uh=(t,r)=>t.splitText(r),ub=t=>{let r=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset;if(r===o&&n$(r)){if(n>0&&n<r.data.length){if(r=(o=uh(r,n)).previousSibling,a>n){let t=uh(o,a-=n).previousSibling;r=o=t,a=t.data.length,n=0}else a=0}}else if(n$(r)&&n>0&&n<r.data.length&&(r=uh(r,n),n=0),n$(o)&&a>0&&a<o.data.length){let t=uh(o,a).previousSibling;o=t,a=t.data.length}return{startContainer:r,startOffset:n,endContainer:o,endOffset:a}},uv=t=>({walk:(r,n)=>cL(t,r,n),split:ub,expand:(r,n={type:"word"})=>{if("word"===n.type){let n=cD(t,r,[{inline:"span"}]),o=t.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return r},normalize:r=>up(t,r).fold(J,t=>(r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),!0))});uv.compareRanges=us,uv.getCaretRangeFromPoint=ui,uv.getSelectedNode=lE,uv.getNode=lw;let uy=((t,r)=>{let n=r=>{let n=(t=>{let r=t.dom;return rV(t)?r.getBoundingClientRect().height:r.offsetHeight})(r);return n<=0||null===n?parseFloat(r8(r,t))||0:n},o=(t,r)=>ef(r,(r,n)=>{let o=r8(t,n),a=void 0===o?0:parseInt(o,10);return isNaN(a)?r:r+a},0);return{set:(r,n)=>{if(!z(n)&&!n.match(/^[0-9]+$/))throw Error(t+".set accepts only positive integer values. Value was "+n);let o=r.dom;r0(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:(t,r,n)=>{let a=o(t,n);return r>a?r-a:0}}})("height"),uC=()=>ru(document),uE=(t,r)=>t.view(r).fold(q([]),r=>{let n=t.owner(r);return[r].concat(uE(t,n))});var uw=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?et.none():et.from(null===(r=t.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(ru)},owner:t=>rw(t)});let ux=t=>"textarea"===tG(t),u_=(t,r)=>{let n=(t=>{let r=t.dom.ownerDocument,n=r.body,o=r.defaultView,a=r.documentElement;if(n===t.dom)return ng(n.offsetLeft,n.offsetTop);let l=nf(null==o?void 0:o.pageYOffset,a.scrollTop),i=nf(null==o?void 0:o.pageXOffset,a.scrollLeft),s=nf(a.clientTop,n.clientTop),d=nf(a.clientLeft,n.clientLeft);return np(t).translate(i-d,l-s)})(t),o=uy.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:r}},uk=(t,r,n,o)=>{uA(t,(a,l)=>uN(t,r,n,o),n)},uS=(t,r,n,o,a)=>{let l={elm:o.element.dom,alignToTop:a};t.dispatch("ScrollIntoView",l).isDefaultPrevented()||(n(t,r,nh(r).top,o,a),((t,r)=>{t.dispatch("AfterScrollIntoView",r)})(t,l))},uN=(t,r,n,o)=>{let a=ru(t.getBody()),l=ru(t.getDoc());a.dom.offsetWidth;let i=((t,r)=>{let n=((t,r)=>{let n=rO(t);if(0===n.length||ux(t))return{element:t,offset:r};if(r<n.length&&!ux(n[r]))return{element:n[r],offset:0};{let o=n[n.length-1];return ux(o)?{element:t,offset:r}:"img"===tG(o)?{element:o,offset:1}:t0(o)?{element:o,offset:a2(o).length}:{element:o,offset:rO(o).length}}})(t,r),o=rm('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return r7(n.element,o),u_(o,()=>nl(o))})(ru(n.startContainer),n.startOffset);uS(t,l,r,i,o),i.cleanup()},uR=(t,r,n,o)=>{let a=ru(t.getDoc());uS(t,a,n,u_(ru(r),H),o)},uA=(t,r,n)=>{let o=n.startContainer,a=n.startOffset,l=n.endContainer,i=n.endOffset;r(ru(o),ru(l));let s=t.dom.createRng();s.setStart(o,a),s.setEnd(l,i),t.selection.setRng(n)},uT=(t,r,n,o,a)=>{let l=r.pos;if(o)nb(l.left,l.top,a);else{let o=l.top-n+r.height;nb(-t.getBody().getBoundingClientRect().left,o,a)}},uO=(t,r,n,o,a,l)=>{let i=o+n,s=a.pos.top,d=a.bottom,c=d-s>=o;s<n?uT(t,a,o,!1!==l,r):s>i?uT(t,a,o,c?!1!==l:!0===l,r):d>i&&!c&&uT(t,a,o,!0===l,r)},uB=(t,r,n,o,a)=>{let l=rx(r).dom.innerHeight;uO(t,r,n,l,o,a)},uP=(t,r,n,o,a)=>{let l=rx(r).dom.innerHeight;uO(t,r,n,l,o,a);let i=(t=>{let r=nh(uC()),n=((t,r)=>{let n=r.owner(t);return uE(r,n)})(t,uw),o=np(t),a=eg(n,(t,r)=>{let n=np(r);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return ng(a.left+o.left+r.left,a.top+o.top+r.top)})(o.element),s=nC(window);i.top<s.y?nv(o.element,!1!==a):i.top>s.bottom&&nv(o.element,!0===a)},uD=(t,r,n)=>uk(t,uB,r,n),uL=(t,r,n)=>uR(t,r,uB,n),uM=(t,r,n)=>uk(t,uP,r,n),uF=(t,r,n)=>uR(t,r,uP,n),uI=(t,r,n)=>{(t.inline?uD:uM)(t,r,n)},uU=(t,r=!1)=>t.dom.focus({preventScroll:r}),uz=t=>{let r=rU(t).dom;return t.dom===r.activeElement},uj=(t=uC())=>et.from(t.dom.activeElement).map(ru),uH=(t,r)=>{let n=t0(r)?a2(r).length:rO(r).length+1;return t>n?n:t<0?0:t},u$=t=>ut.range(t.start,uH(t.soffset,t.start),t.finish,uH(t.foffset,t.finish)),uV=(t,r)=>!nP(r.dom)&&(rC(t,r)||ry(t,r)),uq=t=>r=>uV(t,r.start)&&uV(t,r.finish),uW=t=>ut.range(ru(t.startContainer),t.startOffset,ru(t.endContainer),t.endOffset),uK=t=>{let r=document.createRange();try{return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),et.some(r)}catch(t){return et.none()}},uY=t=>{var r;let n=t.inline||tM.browser.isFirefox()?(t=>{let r=t.getSelection();return(r&&0!==r.rangeCount?et.from(r.getRangeAt(0)):et.none()).map(uW)})(rx(r=ru(t.getBody())).dom).filter(uq(r)):et.none();t.bookmark=n.isSome()?n:t.bookmark},uG=t=>(t.bookmark?t.bookmark:et.none()).bind(r=>{var n;return n=ru(t.getBody()),et.from(r).filter(uq(n)).map(u$)}).bind(uK),uX={isEditorUIElement:t=>{let r=t.className.toString();return -1!==r.indexOf("tox-")||-1!==r.indexOf("mce-")}},uZ={setEditorTimeout:(t,r,n)=>{let o,a;return o=()=>{t.removed||r()},z(a=n)||(a=0),setTimeout(o,a)},setEditorInterval:(t,r,n)=>{let o,a;let l=(o=()=>{t.removed?clearInterval(l):r()},z(a=n)||(a=0),setInterval(o,a));return l}},uQ=aN.DOM,uJ=t=>{let r=t.classList;return void 0!==r&&(r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body"))},u0=(t,r)=>{let n=se(t);return null!==uQ.getParent(r,r=>nD(r)&&uX.isEditorUIElement(r)||!!n&&t.dom.is(r,n))},u1=t=>{try{let r=rU(ru(t.getElement()));return uj(r).fold(()=>document.body,t=>t.dom)}catch(t){return document.body}},u2=(r,n)=>{let o=n.editor;(t=>{let r=aL(()=>{uY(t)},0);t.on("init",()=>{t.inline&&((t,r)=>{let n=()=>{r.throttle()};aN.DOM.bind(document,"mouseup",n),t.on("remove",()=>{aN.DOM.unbind(document,"mouseup",n)})})(t,r),((t,r)=>{t.on("mouseup touchend",t=>{r.throttle()})})(t,r),t.on("keyup NodeChange AfterSetSelectionRange",r=>{"nodechange"===r.type&&r.selectionChange||uY(t)})}),t.on("remove",()=>{r.cancel()})})(o);let a=(t,r)=>{sH(t)&&!0!==t.inline&&r(ru(t.getContainer()),"tox-edit-focus")};o.on("focusin",()=>{let t=r.focusedEditor;uJ(u1(o))&&a(o,ri),t!==o&&(t&&t.dispatch("blur",{focusedEditor:o}),r.setActive(o),r.focusedEditor=o,o.dispatch("focus",{blurredEditor:t}),o.focus(!0))}),o.on("focusout",()=>{uZ.setEditorTimeout(o,()=>{let t=r.focusedEditor;uJ(u1(o))&&t===o||a(o,rd),u0(o,u1(o))||t!==o||(o.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),t||(t=t=>{let n=r.activeEditor;n&&rH(t).each(t=>{t.ownerDocument===document&&(t===document.body||u0(n,t)||r.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null))})},uQ.bind(document,"focusin",t))},u3=(r,n)=>{r.focusedEditor===n.editor&&(r.focusedEditor=null),!r.activeEditor&&t&&(uQ.unbind(document,"focusin",t),t=null)},u8=(t,r)=>{var n;(n=ru(t.getBody()),(r.collapsed?et.from(lw(r.startContainer,r.startOffset)).map(ru):et.none()).bind(t=>a9(t)?et.some(t):rC(n,t)?et.none():et.some(n))).bind(t=>dL(t.dom)).fold(()=>{t.selection.normalize()},r=>t.selection.setRng(r.toRange()))},u5=t=>{if(t.setActive)try{t.setActive()}catch(r){t.focus()}else t.focus()},u6=t=>t.inline?(t=>{var r;let n=t.getBody();return n&&(uz(r=ru(n))||uj(rU(r)).filter(t=>r.dom.contains(t.dom)).isSome())})(t):I(t.iframeElement)&&uz(ru(t.iframeElement)),u4=t=>u6(t)||uj(rU(ru(t.getElement()))).filter(r=>!uJ(r.dom)&&u0(t,r.dom)).isSome(),u9=t=>t.editorManager.setActive(t),u7=(t,r)=>r.collapsed?t.isEditable(r.startContainer):t.isEditable(r.startContainer)&&t.isEditable(r.endContainer),me=(t,r,n,o,a)=>{let l=n?r.startContainer:r.endContainer,i=n?r.startOffset:r.endOffset;return et.from(l).map(ru).map(t=>o&&r.collapsed?t:rB(t,a(t,i)).getOr(t)).bind(t=>tJ(t)?et.some(t):r_(t).filter(tJ)).map(t=>t.dom).getOr(t)},mt=(t,r,n=!1)=>me(t,r,!0,n,(t,r)=>Math.min(rL(t),r)),mr=(t,r,n=!1)=>me(t,r,!1,n,(t,r)=>r>0?r-1:r),mn=(t,r)=>{let n=t;for(;t&&n$(t)&&0===t.length;)t=r?t.nextSibling:t.previousSibling;return t||n},mo=(t,r)=>es(r,r=>{let n=t.dispatch("GetSelectionRange",{range:r});return n.range!==r?n.range:r}),ma={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ml=(t,r,n)=>{let o=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[o])return t[o];if(t!==r){let n=t[a];if(n)return n;for(let o=t.parent;o&&o!==r;o=o.parent)if(n=o[a])return n}},mi=t=>{var r;let n=null!==(r=t.value)&&void 0!==r?r:"";if(!nA(n))return!1;let o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},ms=t=>{let r="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||r};class md{static create(t,r){let n=new md(t,ma[t]||1);return r&&eP(r,(t,r)=>{n.attr(r,t)}),n}constructor(t,r){this.name=t,this.type=r,1===r&&(this.attributes=[],this.attributes.map={})}replace(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this}attr(t,r){let n=this;if(!T(t))return I(t)&&eP(t,(t,r)=>{n.attr(r,t)}),n;let o=n.attributes;if(o){if(void 0!==r){if(null===r){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),n}return n}if(t in o.map){let n=o.length;for(;n--;)if(o[n].name===t){o[n].value=r;break}}else o.push({name:t,value:r});return o.map[t]=r,n}return o.map[t]}}clone(){let t=new md(this.name,this.type),r=this.attributes;if(r){let n=[];n.map={};for(let t=0,o=r.length;t<o;t++){let o=r[t];"id"!==o.name&&(n[n.length]={name:o.name,value:o.value},n.map[o.name]=o.value)}t.attributes=n}return t.value=this.value,t}wrap(t){return this.parent&&(this.parent.insert(t,this),t.append(this)),this}unwrap(){for(let t=this.firstChild;t;){let r=t.next;this.insert(t,this,!0),t=r}this.remove()}remove(){let t=this.parent,r=this.next,n=this.prev;return t&&(t.firstChild===this?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===this?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),this.parent=this.next=this.prev=null),this}append(t){t.parent&&t.remove();let r=this.lastChild;return r?(r.next=t,t.prev=r,this.lastChild=t):this.lastChild=this.firstChild=t,t.parent=this,t}insert(t,r,n){t.parent&&t.remove();let o=r.parent||this;return n?(r===o.firstChild?o.firstChild=t:r.prev&&(r.prev.next=t),t.prev=r.prev,t.next=r,r.prev=t):(r===o.lastChild?o.lastChild=t:r.next&&(r.next.prev=t),t.next=r.next,t.prev=r,r.next=t),t.parent=o,t}getAll(t){let r=[];for(let n=this.firstChild;n;n=ml(n,this))n.name===t&&r.push(n);return r}children(){let t=[];for(let r=this.firstChild;r;r=r.next)t.push(r);return t}empty(){if(this.firstChild){let t=[];for(let r=this.firstChild;r;r=ml(r,this))t.push(r);let r=t.length;for(;r--;){let n=t[r];n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(t,r={},n){var o;let a=this.firstChild;if(ms(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||ms(a))return!1}if(8===a.type||3===a.type&&!mi(a)||3===a.type&&a.parent&&r[a.parent.name]&&nA(null!==(o=a.value)&&void 0!==o?o:"")||n&&n(a))return!1}while(a=ml(a,this));return!0}walk(t){return ml(this,null,t)}}let mc=tz.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),mu=t=>T(t.nodeValue)&&t.nodeValue.includes("\uFEFF"),mm=t=>(0===t.length?"":`${es(t,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',mg=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,t=>mu(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),mf=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,t=>{if(mu(t)){let r=t.parentNode;return r&&eH(mc,r.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),mp=t=>null!==mg(t).nextNode(),mh=t=>null!==mf(t).nextNode(),mb=(t,r)=>null!==r.querySelector(mm(t)),mv=(t,r)=>{ed(r.querySelectorAll(mm(t)),r=>{let n=ru(r);"all"===t4(n,"data-mce-bogus")?nl(n):ed(t,t=>{t7(n,t)&&re(n,t)})})},my=t=>{let r=t.nextNode();for(;null!==r;)r.nodeValue=null,r=t.nextNode()},mC=$(my,mg),mE=$(my,mf),mw=(t,r)=>{let n=[{condition:Y(mb,r),action:Y(mv,r)},{condition:mp,action:mC},{condition:mh,action:mE}],o=t,a=!1;return ed(n,({condition:r,action:n})=>{r(o)&&(a||(o=t.cloneNode(!0),a=!0),n(o))}),o},mx=t=>{ed(nw(t,"[data-mce-bogus]"),t=>{"all"===t4(t,"data-mce-bogus")?nl(t):a8(t)?(r7(t,rf("\uFEFF")),nl(t)):ni(t)})},m_=t=>{ed(nw(t,"input"),t=>{re(t,"name")})},mk=(t,r,n)=>{let o;return o="raw"===r.format?tz.trim(ln(mw(n,t.serializer.getTempAttrs()).innerHTML)):"text"===r.format?((t,r)=>{let n=t.getDoc(),o=rU(ru(t.getBody())),a=rg("div",n);t5(a,"data-mce-bogus","all"),r3(a,{position:"fixed",left:"-9999999px",top:"0"}),nc(a,r.innerHTML),mx(a),m_(a),nr(rM(o)?o:ru(rw(o).dom.body),a);let l=ln(a.dom.innerText);return nl(a),l})(t,n):"tree"===r.format?t.serializer.serialize(n,r):((t,r)=>{let n=ix(t),o=RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return r.replace(o,"")})(t,t.serializer.serialize(n,r)),"text"!==r.format&&!le(ru(n))&&T(o)?tz.trim(o):o},mS=tz.makeMap,mN=t=>{let r=[],n=(t=t||{}).indent,o=mS(t.indent_before||""),a=mS(t.indent_after||""),l=oq.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(t,s,d)=>{if(n&&o[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}if(r.push("<",t),s)for(let t=0,n=s.length;t<n;t++){let n=s[t];r.push(" ",n.name,'="',l(n.value,!0),'"')}if(r[r.length]=!d||i?">":" />",d&&n&&a[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}},end:t=>{let o;r.push("</",t,">"),n&&a[t]&&r.length>0&&(o=r[r.length-1]).length>0&&"\n"!==o&&r.push("\n")},text:(t,n)=>{t.length>0&&(r[r.length]=n?t:l(t))},cdata:t=>{r.push("<![CDATA[",t,"]]>")},comment:t=>{r.push("<!--",t,"-->")},pi:(t,o)=>{o?r.push("<?",t," ",l(o),"?>"):r.push("<?",t,"?>"),n&&r.push("\n")},doctype:t=>{r.push("<!DOCTYPE",t,">",n?"\n":"")},reset:()=>{r.length=0},getContent:()=>r.join("").replace(/\n$/,"")}},mR=(t={},r=o9())=>{let n=mN(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{let a=t.validate,l={3:t=>{var r;n.text(null!==(r=t.value)&&void 0!==r?r:"",t.raw)},8:t=>{var r;n.comment(null!==(r=t.value)&&void 0!==r?r:"")},7:t=>{n.pi(t.name,t.value)},10:t=>{var r;n.doctype(null!==(r=t.value)&&void 0!==r?r:"")},4:t=>{var r;n.cdata(null!==(r=t.value)&&void 0!==r?r:"")},11:t=>{let r=t;if(r=r.firstChild)do i(r);while(r=r.next)}};n.reset();let i=t=>{var o;let s=l[t.type];if(s)s(t);else{let l=t.name,s=l in r.getVoidElements(),d=t.attributes;if(a&&d&&d.length>1){let n=[];n.map={};let o=r.getElementRule(t.name);if(o){for(let t=0,r=o.attributesOrder.length;t<r;t++){let r=o.attributesOrder[t];if(r in d.map){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}for(let t=0,r=d.length;t<r;t++){let r=d[t].name;if(!(r in n.map)){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}d=n}}if(n.start(l,d,s),ol(l))T(t.value)&&n.text(t.value,!0),n.end(l);else if(!s){let r=t.firstChild;if(r){"pre"!==l&&"textarea"!==l||3!==r.type||"\n"!==(null===(o=r.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do i(r);while(r=r.next)}n.end(l)}}};return 1!==o.type||t.inner?3===o.type?l[3](o):l[11](o):i(o),n.getContent()}}},mA=new Set;ed(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{mA.add(t)});let mT=["font","text-decoration","text-emphasis"],mO=(t,r)=>eO(t.parseStyle(t.getAttrib(r,"style"))),mB=(t,r,n)=>{let o=mO(t,r),a=mO(t,n),l=o=>{var a,l;let i=null!==(a=t.getStyle(r,o))&&void 0!==a?a:"",s=null!==(l=t.getStyle(n,o))&&void 0!==l?l:"";return tn(i)&&tn(s)&&i!==s};return ei(o,t=>{let r=r=>ei(r,r=>r===t);if(!r(a)&&r(mT)){let t=em(a,t=>ei(mT,r=>e4(t,r)));return ei(t,l)}return l(t)})},mP=(t,r,n)=>et.from(n.container()).filter(n$).exists(o=>r(o.data.charAt(n.offset()+(t?0:-1)))),mD=Y(mP,!0,dJ),mL=Y(mP,!1,dJ),mM=t=>{let r=t.container();return n$(r)&&(0===r.data.length||nN(r.data)&&cj.isBookmarkNode(r.parentNode))},mF=(t,r)=>n=>dd(t?0:-1,n).filter(r).isSome(),mI=t=>nX(t)&&"block"===r8(ru(t),"display"),mU=t=>nQ(t)&&!(nD(t)&&"all"===t.getAttribute("data-mce-bogus")),mz=mF(!0,mI),mj=mF(!1,mI),mH=mF(!0,n1),m$=mF(!1,n1),mV=mF(!0,nz),mq=mF(!1,nz),mW=mF(!0,mU),mK=mF(!1,mU),mY=(t,r)=>rC(r,t)?rS(t,t=>J(t)||ry(t,r)).slice(0,-1):[],mG=(t,r)=>[t].concat(mY(t,r)),mX=(t,r,n)=>dO(t,r,n,mM),mZ=(t,r,n)=>eh(mG(ru(r.container()),t),t=>n.isBlock(tG(t))),mQ=(t,r,n,o)=>mX(t,r.dom,n).forall(t=>mZ(r,n,o).fold(()=>!ds(t,n,r.dom),o=>!ds(t,n,r.dom)&&rC(o,ru(t.container())))),mJ=(t,r,n,o)=>mZ(r,n,o).fold(()=>mX(t,r.dom,n).forall(t=>!ds(t,n,r.dom)),r=>mX(t,r.dom,n).isNone()),m0=Y(mJ,!1),m1=Y(mJ,!0),m2=Y(mQ,!1),m3=Y(mQ,!0),m8=t=>dv(t).exists(a8),m5=(t,r,n,o)=>dA(t,eS(em(mG(ru(n.container()),r),t=>o.isBlock(tG(t)))).getOr(r).dom,n).filter(m8),m6=(t,r,n)=>dv(r).exists(a8)||m5(!0,t,r,n).isSome(),m4=(t,r,n)=>et.from(r.getNode(!0)).map(ru).exists(a8)||m5(!1,t,r,n).isSome(),m9=Y(m5,!1),m7=Y(m5,!0),ge=t=>l$.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),gt=(t,r,n)=>eS(em(mG(ru(r.container()),t),t=>n.isBlock(tG(t)))).getOr(t),gr=(t,r,n)=>ge(r)?mL(r):mL(r)||dD(gt(t,r,n).dom,r).exists(mL),gn=(t,r,n)=>ge(r)?mD(r):mD(r)||dP(gt(t,r,n).dom,r).exists(mD),go=t=>dv(t).bind(t=>rK(t,tJ)).exists(t=>el(["pre","pre-wrap"],r8(t,"white-space"))),ga=(t,r)=>n=>{var o;return I(o=new nS(n,t)[r]())&&nQ(o)&&dt(o)},gl=(t,r,n)=>!go(r)&&(dD(t.dom,r).isNone()||dP(t.dom,r).isNone()||m0(t,r,n)||m1(t,r,n)||m4(t,r,n)||m6(t,r,n)||gr(t,r,n)||gn(t,r,n)),gi=(t,r,n)=>!go(r)&&(m0(t,r,n)||m2(t,r,n)||m4(t,r,n)||gr(t,r,n)||((t,r)=>{let n=dD(t.dom,r).getOr(r),o=ga(t.dom,"prev");return r.isAtStart()&&(o(r.container())||o(n.container()))})(t,r)),gs=(t,r,n)=>!go(r)&&(m1(t,r,n)||m3(t,r,n)||m6(t,r,n)||gn(t,r,n)||((t,r)=>{let n=dP(t.dom,r).getOr(r),o=ga(t.dom,"next");return r.isAtEnd()&&(o(r.container())||o(n.container()))})(t,r)),gd=(t,r,n)=>gi(t,r,n)||gs(t,(t=>{let r=t.container(),n=t.offset();return n$(r)&&n<r.data.length?l$(r,n+1):t})(r),n),gc=(t,r)=>dQ(t.charAt(r)),gu=(t,r)=>dJ(t.charAt(r)),gm=(t,r,n,o)=>{let a=r.data,l=l$(r,0);return n||!gc(a,0)||gd(t,l,o)?!!(n&&gu(a,0)&&gi(t,l,o))&&(r.data="\xa0"+a.slice(1),!0):(r.data=" "+a.slice(1),!0)},gg=(t,r,n,o)=>{let a=r.data,l=l$(r,a.length-1);return n||!gc(a,a.length-1)||gd(t,l,o)?!!(n&&gu(a,a.length-1)&&gs(t,l,o))&&(r.data=a.slice(0,-1)+"\xa0",!0):(r.data=a.slice(0,-1)+" ",!0)},gf=(t,r,n)=>{let o=r.container();return n$(o)?(t=>{let r=t.container();return n$(r)&&e6(r.data,"\xa0")})(r)?tV(gm(t,o,!1,n)||(t=>{let r=t.data,n=(t=>{let r=t.split("");return es(r,(t,n)=>dQ(t)&&n>0&&n<r.length-1&&d0(r[n-1])&&d0(r[n+1])?" ":t).join("")})(r);return n!==r&&(t.data=n,!0)})(o)||gg(t,o,!1,n),r):gd(t,r,n)?tV(gm(t,o,!0,n)||gg(t,o,!0,n),r):et.none():et.none()},gp=(t,r,n,o)=>{if(0===n)return;let a=ru(t),l=rW(a,t=>o.isBlock(tG(t))).getOr(a),i=t.data.slice(r,r+n),s=r+n>=t.data.length&&gs(l,l$(t,t.data.length),o),d=0===r&&gi(l,l$(t,0),o);t.replaceData(r,n,nO(i,4,d,s))},gh=(t,r,n)=>{let o=t.data.slice(r);gp(t,r,o.length-tt(o).length,n)},gb=(t,r,n)=>{let o=t.data.slice(0,r),a=o.length-tr(o).length;gp(t,r-a,a,n)},gv=(t,r,n,o,a=!0)=>{let l=tr(t.data).length,i=a?t:r,s=a?r:t;return a?i.appendData(s.data):i.insertData(0,s.data),nl(ru(s)),o&&gh(i,l,n),i},gy=(t,r)=>((t,r)=>{let n=t.container(),o=t.offset();return!l$.isTextPosition(t)&&n===r.parentNode&&o>l$.before(r).offset()})(r,t)?l$(r.container(),r.offset()-1):r,gC=t=>{var r;return lR(t.previousSibling)?et.some(n$(r=t.previousSibling)?l$(r,r.data.length):l$.after(r)):t.previousSibling?dM(t.previousSibling):et.none()},gE=t=>{var r;return lR(t.nextSibling)?et.some(n$(r=t.nextSibling)?l$(r,0):l$.before(r)):t.nextSibling?dL(t.nextSibling):et.none()},gw=(t,r,n)=>(t?gE(n).orThunk(()=>gC(n)).orThunk(()=>dP(r,l$.after(n)).orThunk(()=>dD(r,l$.before(n)))):gC(n).orThunk(()=>gE(n)).orThunk(()=>et.from(n.previousSibling?n.previousSibling:n.parentNode).bind(t=>dD(r,l$.before(t))).orThunk(()=>dP(r,l$.after(n))))).map(Y(gy,n)),gx=(t,r,n)=>{n.fold(()=>{t.focus()},n=>{t.selection.setRng(n.toRange(),r)})},g_=(t,r)=>r&&eH(t.schema.getBlockElements(),tG(r)),gk=(t,r,n,o=!0,a=!1)=>{var l;let i=gw(r,t.getBody(),n.dom),s=rW(n,Y(g_,t),(l=t.getBody(),t=>t.dom===l)),d=((t,r,n,o)=>{var a;let l=rN(t).filter(t0),i=rR(t).filter(t0);return nl(t),(a=(t,r,a)=>{let l=t.dom,i=r.dom,s=l.data.length;return gv(l,i,n,o),a.container()===i?l$(l,s):a},l.isSome()&&i.isSome()&&r.isSome()?et.some(a(l.getOrDie(),i.getOrDie(),r.getOrDie())):et.none()).orThunk(()=>(o&&(l.each(t=>gb(t.dom,t.dom.length,n)),i.each(t=>gh(t.dom,0,n))),r))})(n,i,t.schema,eH(t.schema.getTextInlineElements(),tG(n)));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(r=>((t,r,n)=>{if(oe(t,r)){let t=rm('<br data-mce-bogus="1">');return n?ed(rO(r),t=>{cx(t)||nl(t)}):na(r),nr(r,t),et.some(l$.before(t.dom))}return et.none()})(t.schema,r,a)).fold(()=>{o&&gx(t,r,d)},n=>{o&&gx(t,r,et.some(n))})},gS=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,gN=(t,r)=>rb(ru(r),iG(t))&&!oE(t.schema,r)&&t.dom.isEditable(r),gR=t=>{var r;let n;return"rtl"===aN.DOM.getStyle(t,"direction",!0)||(n=null!==(r=t.textContent)&&void 0!==r?r:"",gS.test(n))},gA=(t,r,n)=>{let o=em(aN.DOM.getParents(n.container(),"*",r),t);return et.from(o[o.length-1])},gT=(t,r)=>{let n=r.container(),o=r.offset();return t?la(n)?n$(n.nextSibling)?l$(n.nextSibling,0):l$.after(n):ls(r)?l$(n,o+1):r:la(n)?n$(n.previousSibling)?l$(n.previousSibling,n.previousSibling.data.length):l$.before(n):ld(r)?l$(n,o-1):r},gO=Y(gT,!0),gB=Y(gT,!1),gP=(t,r)=>{let n=t=>t.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(r),t.off("beforeinput input",n)},gD=t=>gP(t,"Delete"),gL=t=>a5(t)||a4(t),gM=(t,r)=>rC(t,r)?rK(r,gL,r=>tj(r_(r),t,ry)):et.none(),gF=(t,r=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!r})},gI=(t,r,n)=>t$(dL(n),dM(n),(o,a)=>{let l=gT(!0,o),i=gT(!1,a),s=gT(!1,r);return t?dP(n,s).exists(t=>t.isEqual(i)&&r.isEqual(l)):dD(n,s).exists(t=>t.isEqual(l)&&r.isEqual(i))}).getOr(!0),gU=t=>(8===tX(t)||"#comment"===tG(t)?rN(t):rD(t)).bind(gU).orThunk(()=>et.some(t)),gz=(t,r,n,o=!0)=>{var a;r.deleteContents();let l=gU(n).getOr(n),i=ru(null!==(a=t.dom.getParent(l.dom,t.dom.isBlock))&&void 0!==a?a:n.dom);i.dom===t.getBody()?gF(t,o):oe(t.schema,i,{checkRootAsContent:!1})&&(lr(i),o&&t.selection.setCursorLocation(i.dom,0)),ry(n,i)||ed((tj(r_(i),n)?[]:r_(i).map(rO).map(t=>em(t,t=>!ry(i,t))).getOr([])).concat(rO(n)),r=>{ry(r,i)||rC(r,i)||!oe(t.schema,r)||nl(r)})},gj=t=>nw(t,"td,th"),gH=(t,r)=>d8(ru(t),r),g$=(t,r)=>({start:t,end:r}),gV=l7([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),gq=(t,r)=>rZ(ru(t),"td,th",r),gW=t=>!ry(t.start,t.end),gK=(t,r)=>d8(t.start,r).bind(n=>d8(t.end,r).bind(t=>tV(ry(n,t),n))),gY=t=>r=>gK(r,t).map(t=>({rng:r,table:t,cells:gj(t)})),gG=(t,r,n,o)=>{if(n.collapsed||!t.forall(gW))return et.none();if(r.isSameTable){let r=t.bind(gY(o));return et.some({start:r,end:r})}{let t=gq(n.startContainer,o),r=gq(n.endContainer,o),a=t.bind(t=>d8(t,o).bind(r=>eN(gj(r)).map(r=>g$(t,r)))).bind(gY(o)),l=r.bind(t=>d8(t,o).bind(r=>eS(gj(r)).map(r=>g$(r,t)))).bind(gY(o));return et.some({start:a,end:l})}},gX=(t,r)=>eb(t,t=>ry(t,r)),gZ=t=>t$(gX(t.cells,t.rng.start),gX(t.cells,t.rng.end),(r,n)=>t.cells.slice(r,n+1)),gQ=(t,r)=>{let{startTable:n,endTable:o}=r,a=t.cloneRange();return n.each(t=>a.setStartAfter(t.dom)),o.each(t=>a.setEndBefore(t.dom)),a},gJ=(t,r)=>{let n=r=>ry(t,r),o=t$(gq(r.startContainer,n),gq(r.endContainer,n),g$),a=((t,r)=>{let n;let o=gH(t.startContainer,r),a=gH(t.endContainer,r),l=o.isSome(),i=a.isSome(),s=t$(o,a,ry).getOr(!1);return t$((n={startTable:o,endTable:a,isStartInTable:l,isEndInTable:i,isSameTable:s,isMultiTable:!s&&l&&i}).startTable,n.endTable,(t,r)=>{let o=nk(t,t=>ry(t,r)),a=nk(r,r=>ry(r,t));return o||a?{...n,startTable:o?et.none():n.startTable,endTable:a?et.none():n.endTable,isSameTable:!1,isMultiTable:!1}:n}).getOr(n)})(r,n);return o.exists(t=>!gW(t)&&gK(t,n).exists(t=>{let r=t.dom.rows;return 1===r.length&&1===r[0].cells.length})&&d4(t.start,r))?o.map(t=>gV.singleCellTable(r,t.start)):a.isMultiTable?gG(o,a,r,n).bind(({start:t,end:n})=>{let o=t.bind(gZ).getOr([]),l=n.bind(gZ).getOr([]);if(o.length>0&&l.length>0){let t=gQ(r,a);return et.some(gV.multiTable(o,l,t))}return et.none()}):gG(o,a,r,n).bind(({start:t,end:r})=>t.or(r)).bind(t=>{let{isSameTable:n}=a,o=gZ(t).getOr([]);if(n&&t.cells.length===o.length)return et.some(gV.fullTable(t.table));if(o.length>0){if(n)return et.some(gV.partialTable(o,et.none()));{let t=gQ(r,a);return et.some(gV.partialTable(o,et.some({...a,rng:t})))}}return et.none()})},g0=t=>ed(t,t=>{re(t,"contenteditable"),lr(t)}),g1=(t,r,n,o)=>{let a=n.cloneRange();o?(a.setStart(n.startContainer,n.startOffset),a.setEndAfter(r.dom.lastChild)):(a.setStartBefore(r.dom.firstChild),a.setEnd(n.endContainer,n.endOffset)),g5(t,a,r,!1).each(t=>t())},g2=t=>{let r=d3(t),n=ru(t.selection.getNode());nJ(n.dom)&&oe(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),r.length>1&&ei(r,t=>ry(t,n))&&t5(n,"data-mce-selected","1")},g3=(t,r,n)=>et.some(()=>{let o=t.selection.getRng();g0(n.bind(({rng:n,isStartInTable:a})=>{let l;let i=(l=a?n.endContainer:n.startContainer,et.from(t.dom.getParent(l,t.dom.isBlock)).map(ru));n.deleteContents(),((t,r,n)=>{n.each(n=>{r?nl(n):(lr(n),t.selection.setCursorLocation(n.dom,0))})})(t,a,i.filter(Y(oe,t.schema)));let s=a?r[0]:r[r.length-1];return g1(t,s,o,a),oe(t.schema,s)?et.none():et.some(a?r.slice(1):r.slice(0,-1))}).getOr(r)),g2(t)}),g8=(t,r,n,o)=>et.some(()=>{let a=t.selection.getRng(),l=r[0],i=n[n.length-1];g1(t,l,a,!0),g1(t,i,a,!1);let s=oe(t.schema,l)?r:r.slice(1),d=oe(t.schema,i)?n:n.slice(0,-1);g0(s.concat(d)),o.deleteContents(),g2(t)}),g5=(t,r,n,o=!0)=>et.some(()=>{gz(t,r,n,o)}),g6=(t,r)=>et.some(()=>gk(t,!1,r)),g4=(t,r)=>eh(mG(r,t),a7),g9=(t,r)=>eh(mG(r,t),t3("caption")),g7=(t,r)=>et.some(()=>{lr(r),t.selection.setCursorLocation(r.dom,0)}),fe=(t,r)=>t?mV(r):mq(r),ft=(t,r,n)=>{let o=ru(t.getBody());return g9(o,n).fold(()=>((t,r,n,o)=>{let a=l$.fromRangeStart(t.selection.getRng());return g4(n,o).bind(o=>oe(t.schema,o,{checkRootAsContent:!1})?g7(t,o):dT(r,t.getBody(),a).bind(t=>g4(n,ru(t.getNode())).bind(t=>ry(t,o)?et.none():et.some(H))))})(t,r,o,n).orThunk(()=>tV(((t,r)=>{let n=l$.fromRangeStart(t.selection.getRng());return fe(r,n)||dA(r,t.getBody(),n).exists(t=>fe(r,t))})(t,r),H)),n=>((t,r,n,o)=>{let a=l$.fromRangeStart(t.selection.getRng());return oe(t.schema,o)?g7(t,o):dT(r,t.getBody(),a).fold(()=>et.some(H),l=>dL(o.dom).bind(t=>dM(o.dom).map(n=>r?a.isEqual(t)&&l.isEqual(n):a.isEqual(n)&&l.isEqual(t))).getOr(!0)?g7(t,o):g9(n,ru(l.getNode())).fold(()=>et.some(H),t=>tV(!ry(t,o),H)))})(t,r,o,n))},fr=(t,r)=>{let n=ru(t.selection.getStart(!0)),o=d3(t);return t.selection.isCollapsed()&&0===o.length?ft(t,r,n):((t,r,n)=>{let o=ru(t.getBody()),a=t.selection.getRng();return 0!==n.length?g3(t,n,et.none()):g9(o,r).fold(()=>gJ(o,a).bind(r=>r.fold(Y(g5,t),Y(g6,t),Y(g3,t),Y(g8,t))),r=>g7(t,r))})(t,n,o)},fn=(t,r)=>{let n=r;for(;n&&n!==t;){if(nZ(n)||nQ(n))return n;n=n.parentNode}return null},fo=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fa=tz.each,fl=t=>{let r=t.dom,n=new Set(t.serializer.getTempAttrs()),o=t=>ei(fo,r=>e4(t,r))||n.has(t);return{compare:(t,n)=>{if(t.nodeName!==n.nodeName||t.nodeType!==n.nodeType)return!1;let a=t=>{let n={};return fa(r.getAttribs(t),a=>{let l=a.nodeName.toLowerCase();"style"===l||o(l)||(n[l]=r.getAttrib(t,l))}),n},l=(t,r)=>{for(let n in t)if(eH(t,n)){let o=r[n];if(M(o)||t[n]!==o)return!1;delete r[n]}for(let t in r)if(eH(r,t))return!1;return!0};return(!(nD(t)&&nD(n))||!!l(a(t),a(n))&&!!l(r.parseStyle(r.getAttrib(t,"style")),r.parseStyle(r.getAttrib(n,"style"))))&&!dZ(t)&&!dZ(n)},isAttributeInternal:o}},fi=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),fs=(t,r,n,o)=>{let a=n.name;for(let r=0,l=t.length;r<l;r++){let l=t[r];if(l.name===a){let t=o.nodes[a];t?t.nodes.push(n):o.nodes[a]={filter:l,nodes:[n]}}}if(n.attributes)for(let t=0,a=r.length;t<a;t++){let a=r[t],l=a.name;if(l in n.attributes.map){let t=o.attributes[l];t?t.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},fd=(t,r)=>{let n=(t,n)=>{eP(t,t=>{let o=eR(t.nodes);ed(t.filter.callbacks,a=>{for(let r=o.length-1;r>=0;r--){let a=o[r];((n?void 0===a.attr(t.filter.name):a.name!==t.filter.name)||F(a.parent))&&o.splice(r,1)}o.length>0&&a(o,t.filter.name,r)})})};n(t.nodes,!1),n(t.attributes,!0)},fc=(t,r,n,o={})=>{fd(((t,r,n)=>{let o={nodes:{},attributes:{}};return n.firstChild&&((n,a)=>{let l=n;for(;l=l.walk();)fs(t,r,l,o)})(n),o})(t,r,n),o)},fu=(t,r,n,o)=>{if((t.pad_empty_with_br||r.insert)&&n(o)){let t=new md("br",1);r.insert&&t.attr("data-mce-bogus","1"),o.empty().append(t)}else o.empty().append(new md("#text",3)).value="\xa0"},fm=(t,r)=>{let n=null==t?void 0:t.firstChild;return I(n)&&n===t.lastChild&&n.name===r},fg=(t,r,n,o)=>o.isEmpty(r,n,r=>((t,r)=>{let n=t.getElementRule(r.name);return!0===(null==n?void 0:n.paddEmpty)})(t,r)),ff=t=>{let r;for(let n=t;n;n=n.parent){let t=n.attr("contenteditable");if("false"===t)break;"true"===t&&(r=n)}return et.from(r)},fp=(t,r,n=t.parent)=>{if(r.getSpecialElements()[t.name])t.empty().remove();else{for(let o of t.children())n&&!r.isValidChild(n.name,o.name)&&fp(o,r,n);t.unwrap()}},fh=(t,r,n,o=H)=>{let a=r.getTextBlockElements(),l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=tz.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),d=new Set,c=t=>t!==n&&!s[t.name];for(let n=0;n<t.length;n++){let s,u,m;let g=t[n];if(!g.parent||d.has(g))continue;if(a[g.name]&&"li"===g.parent.name){let t=g.next;for(;t&&a[t.name];)t.name="li",d.add(t),g.parent.insert(t,g.parent),t=t.next;g.unwrap();continue}let f=[g];for(s=g.parent;s&&!r.isValidChild(s.name,g.name)&&c(s);s=s.parent)f.push(s);if(s&&f.length>1){if(fb(r,g,s))fp(g,r);else{f.reverse(),o(u=f[0].clone());let t=u;for(let n=0;n<f.length-1;n++){r.isValidChild(t.name,f[n].name)&&n>0?(o(m=f[n].clone()),t.append(m)):m=t;for(let t=f[n].firstChild;t&&t!==f[n+1];){let r=t.next;m.append(t),t=r}t=m}fg(r,l,i,u)?s.insert(g,f[0],!0):(s.insert(u,f[0],!0),s.insert(g,u)),(fg(r,l,i,s=f[0])||fm(s,"br"))&&s.empty().remove()}}else if(g.parent){if("li"===g.name){let t=g.prev;if(t&&("ul"===t.name||"ol"===t.name)){t.append(g);continue}if((t=g.next)&&("ul"===t.name||"ol"===t.name)&&t.firstChild){t.insert(g,t.firstChild,!0);continue}let r=new md("ul",1);o(r),g.wrap(r);continue}if(r.isValidChild(g.parent.name,"div")&&r.isValidChild("div",g.name)){let t=new md("div",1);o(t),g.wrap(t)}else fp(g,r)}}},fb=(t,r,n=r.parent)=>!(!n||(!t.children[r.name]||t.isValidChild(n.name,r.name))&&("a"!==r.name||!((t,r)=>{let n=t;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n))&&("summary"!==n.name||!fi(r)||(null==n?void 0:n.firstChild)===r&&(null==n?void 0:n.lastChild)===r)),fv=t=>t.collapsed?t:(t=>{let r=l$.fromRangeStart(t),n=l$.fromRangeEnd(t),o=t.commonAncestorContainer;return dA(!1,o,n).map(a=>!ds(r,n,o)&&ds(r,a,o)?((t,r,n,o)=>{let a=document.createRange();return a.setStart(t,r),a.setEnd(n,o),a})(r.container(),r.offset(),a.container(),a.offset()):t).getOr(t)})(t),fy=(t,r)=>{let n=r.firstChild,o=r.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((t,r)=>{let n,o;let a=t.getNonEmptyElements();return I(r)&&(r.isEmpty(a)||t.getBlockElements()[r.name]&&I((n=r).firstChild)&&n.firstChild===n.lastChild&&("br"===(o=r.firstChild).name||"\xa0"===o.value))})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},fC=t=>{var r;let n;return t.length>0&&(!(r=t[t.length-1]).firstChild||I(null==r?void 0:r.firstChild)&&r.firstChild===r.lastChild&&("\xa0"===(n=r.firstChild).data||nG(n)))?t.slice(0,-1):t},fE=(t,r)=>{let n=t.getParent(r,t.isBlock);return n&&"LI"===n.nodeName?n:null},fw=(t,r)=>{let n=l$.after(t),o=dk(r).prev(n);return o?o.toRange():null},fx=(t,r,n,o)=>{var a,l;let i=((t,r,n)=>{let o=r.serialize(n);return(t=>{var r,n;let o=t.firstChild,a=t.lastChild;return o&&"META"===o.nodeName&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),a&&"mce_marker"===a.id&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a)),t})(t.createFragment(o))})(r,t,o),s=fE(r,n.startContainer),d=fC(em(null!==(l=null==(a=i.firstChild)?void 0:a.childNodes)&&void 0!==l?l:[],t=>"LI"===t.nodeName)),c=r.getRoot(),u=t=>{let o=l$.fromRangeStart(n),a=dk(r.getRoot()),l=1===t?a.prev(o):a.next(o),i=null==l?void 0:l.getNode();return!i||fE(r,i)!==s};return s?u(1)?((t,r,n)=>{let o=t.parentNode;return o&&tz.each(r,r=>{o.insertBefore(r,t)}),((t,r)=>{let n=l$.before(t),o=dk(r).next(n);return o?o.toRange():null})(t,n)})(s,d,c):u(2)?(r.insertAfter(d.reverse(),s),fw(d[0],c)):((t,r,n,o)=>{let a=((t,r)=>{let n=r.cloneRange(),o=r.cloneRange();return n.setStartBefore(t),o.setEndAfter(t),[n.cloneContents(),o.cloneContents()]})(t,o),l=t.parentNode;return l&&(l.insertBefore(a[0],t),tz.each(r,r=>{l.insertBefore(r,t)}),l.insertBefore(a[1],t),l.removeChild(t)),fw(r[r.length-1],n)})(s,d,c,n):null},f_=["pre"],fk=(t,r,n)=>{var o,a,l,i;let s;let d=t.selection,c=t.dom,u=t.parser,m=n.merge,g=mR({validate:!0},t.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(r=ln(r)),-1===r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,f);let p=d.getRng(),h=p.startContainer,b=t.getBody();h===b&&d.isCollapsed()&&c.isBlock(b.firstChild)&&I(s=b.firstChild)&&!t.schema.getVoidElements()[s.nodeName]&&c.isEmpty(b.firstChild)&&((p=c.createRng()).setStart(b.firstChild,0),p.setEnd(b.firstChild,0),d.setRng(p)),d.isCollapsed()||(t=>{let r=t.dom,n=fv(t.selection.getRng());t.selection.setRng(n);let o=r.getParent(n.startContainer,nJ);I(o)&&o===r.getParent(n.endContainer,nJ)&&d4(ru(o),n)?g5(t,n,ru(o)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&n$(n.startContainer.childNodes[n.startOffset])?n.deleteContents():t.getDoc().execCommand("Delete",!1)})(t);let v=d.getNode(),y={context:v.nodeName.toLowerCase(),data:n.data,insert:!0},C=u.parse(r,y);if(!0===n.paste&&fy(t.schema,C)&&fE(c,v))return(p=fx(g,c,d.getRng(),C))&&d.setRng(p),r;!0===n.paste&&((t,r,n,o)=>{var a;let l=r.firstChild,i=r.lastChild,s=l===("bookmark"===i.attr("data-mce-type")?i.prev:i),d=el(f_,l.name);if(s&&d){let r="false"!==l.attr("contenteditable"),i=(null===(a=t.getParent(n,t.isBlock))||void 0===a?void 0:a.nodeName.toLowerCase())===l.name,s=et.from(fn(o,n)).forall(nZ);return r&&i&&s}return!1})(c,C,v,t.getBody())&&(null===(o=C.firstChild)||void 0===o||o.unwrap()),(t=>{let r=t;for(;r=r.walk();)1===r.type&&r.attr("data-mce-fragment","1")})(C);let E=C.lastChild;if(E&&"mce_marker"===E.attr("id")){let r=E;for(E=E.prev;E;E=E.walk(!0))if(3===E.type||!c.isBlock(E.name)){E.parent&&t.schema.isValidChild(E.parent.name,"span")&&E.parent.insert(r,E,"br"===E.name);break}}if(t._selectionOverrides.showBlockCaretContainer(v),y.invalid||ei(C.children(),fi)&&"SUMMARY"===(null===(i=c.getParent(v,c.isBlock))||void 0===i?void 0:i.nodeName)){t.selection.setContent(f);let n,o=d.getNode(),l=t.getBody();for(nK(o)?o=n=l:n=o;n&&n!==l;)o=n,n=n.parentNode;r=o===l?l.innerHTML:c.getOuterHTML(o);let i=u.parse(r),s=(t=>{for(let r=t;r;r=r.walk())if("mce_marker"===r.attr("id"))return et.some(r);return et.none()})(i),m=s.bind(ff).getOr(i);s.each(t=>t.replace(C));let p=C.children(),h=null!==(a=C.parent)&&void 0!==a?a:i;C.unwrap(),fh(em(p,r=>fb(t.schema,r,h)),t.schema,m),fc(u.getNodeFilters(),u.getAttributeFilters(),i),r=g.serialize(i),o===l?c.setHTML(l,r):c.setOuterHTML(o,r)}else((t,r,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(t.dom.createFragment(r),n);else{let o=n.firstChild,a=n.lastChild;o&&(o!==a||"BR"!==o.nodeName)?t.selection.setContent(r,{no_events:!0}):t.dom.setHTML(n,r)}})(t,r=g.serialize(C),v);return((t,r)=>{let n=t.schema.getTextInlineElements(),o=t.dom;if(r){let r=t.getBody(),a=fl(t);tz.each(o.select("*[data-mce-fragment]"),t=>{if(I(n[t.nodeName.toLowerCase()])&&eC(mO(o,t),t=>!mA.has(t))){for(let n=t.parentElement;I(n)&&n!==r&&!mB(o,t,n);n=n.parentElement)if(a.compare(n,t)){o.remove(t,!0);break}}})}})(t,m),((t,r)=>{var n,o,a,l;let i;let s=t.dom,d=t.selection;if(!r)return;d.scrollIntoView(r);let c=fn(t.getBody(),r);if(c&&"false"===s.getContentEditable(c))return s.remove(r),void d.select(c);let u=s.createRng(),m=r.previousSibling;if(n$(m)){u.setStart(m,null!==(o=null===(n=m.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);let t=r.nextSibling;n$(t)&&(m.appendData(t.data),null===(a=t.parentNode)||void 0===a||a.removeChild(t))}else u.setStartBefore(r),u.setEndBefore(r);let g=s.getParent(r,s.isBlock);if(s.remove(r),g&&s.isEmpty(g)){let r;let n=nJ(g);na(ru(g)),u.setStart(g,0),u.setEnd(g,0),n||g.getAttribute("data-mce-fragment")||(l=u,r=l$.fromRangeStart(l),!(i=null==(r=dk(t.getBody()).next(r))?void 0:r.toRange()))?s.add(g,s.create("br",n?{}:{"data-mce-bogus":"1"})):(u=i,s.remove(g))}d.setRng(u)})(t,c.get("mce_marker")),l=t.getBody(),tz.each(l.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")}),((t,r,n)=>{et.from(t.getParent(r,"td,th")).map(ru).each(t=>((t,r)=>{rD(t).each(n=>{rN(n).each(o=>{r.isBlock(tG(t))&&a8(n)&&r.isBlock(tG(o))&&nl(n)})})})(t,n))})(c,d.getStart(),t.schema),((t,r,n)=>{let o=rS(ru(n),t=>ry(t,ru(r)));ek(o,o.length-2).filter(tJ).fold(()=>oh(t,r),r=>oh(t,r.dom))})(t.schema,t.getBody(),d.getStart()),r},fS=t=>t instanceof md,fN=(t,r,n)=>{t.dom.setHTML(t.getBody(),r),!0!==n&&u6(t)&&dL(t.getBody()).each(r=>{let n=r.getNode(),o=nz(n)?dL(n).getOr(r):r;t.selection.setRng(o.toRange())})},fR=t=>U(t)?t:J,fA=(t,r,n)=>{let o=r(t),a=fR(n);return o.orThunk(()=>a(t)?et.none():((t,r,n)=>{let o=t.dom,a=fR(n);for(;o.parentNode;){let t=ru(o=o.parentNode),n=r(t);if(n.isSome())return n;if(a(t))break}return et.none()})(t,r,a))},fT=(t,r,n)=>{let o=t.formatter.get(n);if(o)for(let n=0;n<o.length;n++){let a=o[n];if(cy(a)&&!1===a.inherit&&t.dom.is(r,a.selector))return!0}return!1},fO=(t,r,n,o,a)=>{let l=t.dom.getRoot();if(r===l)return!1;let i=t.dom.getParent(r,r=>!!fT(t,r,n)||r.parentNode===l||!!fD(t,r,n,o,!0));return!!fD(t,i,n,o,a)},fB=(t,r,n)=>!(!cC(n)||!cm(r,n.inline))||!(!cv(n)||!cm(r,n.block))||!!cy(n)&&nD(r)&&t.is(r,n.selector),fP=(t,r,n,o,a,l)=>{let i=n[o],s="attributes"===o;if(U(n.onmatch))return n.onmatch(r,n,o);if(i){if(eq(i))for(let n=0;n<i.length&&(s?!t.getAttrib(r,i[n]):!cf(t,r,i[n]));n++);else for(let o in i)if(eH(i,o)){let d=s?t.getAttrib(r,o):cf(t,r,o),c=cu(i[o],l),u=F(d)||to(d);if(u&&F(c))continue;if(a&&u&&!n.exact||(!a||n.exact)&&!cm(d,cg(c,o)))return!1}}return!0},fD=(t,r,n,o,a)=>{let l=t.formatter.get(n),i=t.dom;if(l&&nD(r))for(let n=0;n<l.length;n++){let s=l[n];if(fB(t.dom,r,s)&&fP(i,r,s,"attributes",a,o)&&fP(i,r,s,"styles",a,o)){let n=s.classes;if(n){for(let a=0;a<n.length;a++)if(!t.dom.hasClass(r,cu(n[a],o)))return}return s}}},fL=(t,r,n,o,a)=>{if(o)return fO(t,o,r,n,a);if(o=t.selection.getNode(),fO(t,o,r,n,a))return!0;let l=t.selection.getStart();return!(l===o||!fO(t,l,r,n,a))},fM=t=>{if(t){let r=new nS(t,t);for(let t=r.current();t;t=r.next())if(n$(t))return t}return null},fF=t=>{let r=rg("span");return t6(r,{id:dF,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&nr(r,rf("\uFEFF")),r},fI=(t,r,n)=>{let o=t.dom,a=t.selection;if(cw(r))gk(t,!1,ru(r),n,!0);else{let t=a.getRng(),n=o.getParent(r,o.isBlock),l=t.startContainer,i=t.startOffset,s=t.endContainer,d=t.endOffset,c=(t=>{let r=fM(t);return r&&"\uFEFF"===r.data.charAt(0)&&r.deleteData(0,1),r})(r);o.remove(r,!0),l===c&&i>0&&t.setStart(c,i-1),s===c&&d>0&&t.setEnd(c,d-1),n&&o.isEmpty(n)&&lr(ru(n)),a.setRng(t)}},fU=(t,r,n)=>{let o=t.dom,a=t.selection;if(r)fI(t,r,n);else if(!(r=dU(t.getBody(),a.getStart())))for(;r=o.get(dF);)fI(t,r,n)},fz=(t,r)=>(t.appendChild(r),r),fj=(t,r)=>{var n;let o=eg(t,(t,r)=>fz(t,r.cloneNode(!1)),r),a=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return fz(o,a.createTextNode("\uFEFF"))},fH=(t,r,n,o)=>{let a;let l=t.dom,i=t.selection,s=!1,d=t.formatter.get(r);if(!d)return;let c=i.getRng(),u=c.startContainer,m=c.startOffset,g=u;n$(u)&&(m!==u.data.length&&(s=!0),g=g.parentNode);let f=[];for(;g;){if(fD(t,g,r,n,o)){a=g;break}g.nextSibling&&(s=!0),f.push(g),g=g.parentNode}if(a){if(s){let a=i.getBookmark();c.collapse(!0);let s=cD(l,c,d,!0);s=ub(s),t.formatter.remove(r,n,s,o),i.moveToBookmark(a)}else{let s=dU(t.getBody(),a),d=I(s)?l.getParents(a.parentNode,ee,s):[],c=fF(!1).dom;((t,r,n)=>{var o,a;let l=t.dom,i=l.getParent(n,Y(ci,t.schema));i&&l.isEmpty(i)?null===(o=n.parentNode)||void 0===o||o.replaceChild(r,n):((t=>{let r=nw(t,"br"),n=em((t=>{let r=[],n=t.dom;for(;n;)r.push(ru(n)),n=n.lastChild;return r})(t).slice(-1),a8);r.length===n.length&&ed(n,nl)})(ru(n)),l.isEmpty(n)?null===(a=n.parentNode)||void 0===a||a.replaceChild(r,n):l.insertAfter(r,n))})(t,c,null!=s?s:a);let u=fj([...f,...((t,r,n,o,a,l)=>{let i=t.formatter,s=t.dom,d=em(eO(i.get()),t=>t!==o&&!e6(t,"removeformat"));if(em(ef(d,(r,o)=>{let a=cb(t,o,t=>{let r=t=>U(t)||t.length>1&&"%"===t.charAt(0);return ei(["styles","attributes"],n=>ej(t,n).exists(t=>ei(P(t)?t:ez(t),r)))});return t.formatter.matchNode(n,o,{},a)?r.concat([o]):r},[]),r=>!((t,r,n)=>{let o=["inline","block","selector","attributes","styles","classes"],a=t=>eI(t,(t,r)=>ei(o,t=>t===r));return cb(t,r,r=>{let o=a(r);return cb(t,n,t=>((t,r,n=x)=>w(n).eq(t,r))(o,a(t)))})})(t,r,o)).length>0){let t=n.cloneNode(!1);return s.add(r,t),i.remove(o,a,t,l),s.remove(t),et.some(t)}return et.none()})(t,c,a,r,n,o).toArray(),...d],c);s&&fI(t,s,I(s)),i.setCursorLocation(u,1),l.isEmpty(a)&&l.remove(a)}}},f$=t=>{let r=fF(!1),n=fj(t,r.dom);return{caretContainer:r,caretPosition:l$(n,0)}},fV=(t,r)=>{let{caretContainer:n,caretPosition:o}=f$(r);return r7(ru(t),n),nl(ru(t)),o},fq=(t,r)=>!dI(r.dom)&&eH(t.schema.getTextInlineElements(),tG(r))&&!dI(r.dom)&&!nU(r.dom),fW={},fK=nF(["pre"]);fW.pre||(fW.pre=[]),fW.pre.push(t=>{if(!t.selection.getRng().collapsed){let r=t.selection.getSelectedBlocks();ed(em(em(r,fK),t=>{let n=t.previousSibling;return fK(n)&&el(r,n)}),t=>{((t,r)=>{let n=ru(r),o=rw(n).dom;nl(n),no(ru(t),[rg("br",o),rg("br",o),...rO(n)])})(t.previousSibling,t)})}});let fY=["fontWeight","fontStyle","color","fontSize","fontFamily"],fG=(t,r)=>{let n=t.get(r);return P(n)?eh(n,t=>{let r;return cC(t)&&"span"===t.inline&&O((r=t).styles)&&ei(eO(r.styles),t=>el(fY,t))}):et.none()},fX=(t,r)=>dD(r,l$.fromRangeStart(t)).isNone(),fZ=(t,r)=>!1===dP(r,l$.fromRangeEnd(t)).exists(t=>!nG(t.getNode())||dP(r,t).isSome()),fQ=t=>r=>n2(r)&&t.isEditable(r),fJ=t=>em(t.getSelectedBlocks(),fQ(t.dom)),f0=tz.each,f1=t=>nD(t)&&!dZ(t)&&!dI(t)&&!nU(t),f2=(t,r)=>{for(let n=t;n&&!(n$(n)&&tn(n.data));n=n[r])if(nD(n)&&!dZ(n))return n;return t},f3=(t,r,n)=>{let o=fl(t),a=nL(r)&&t.dom.isEditable(r),l=nL(n)&&t.dom.isEditable(n);if(a&&l){let a=f2(r,"previousSibling"),l=f2(n,"nextSibling");if(o.compare(a,l)){for(let t=a.nextSibling;t&&t!==l;){let r=t;t=t.nextSibling,a.appendChild(r)}return t.dom.remove(l),tz.each(tz.grep(l.childNodes),t=>{a.appendChild(t)}),a}}return n},f8=(t,r,n,o)=>{var a;if(o&&!1!==r.merge_siblings){let r=null!==(a=f3(t,cl(o),o))&&void 0!==a?a:o;f3(t,r,cl(r,!0))}},f5=(t,r,n)=>{f0(t.childNodes,t=>{f1(t)&&(r(t)&&n(t),t.hasChildNodes()&&f5(t,r,n))})},f6=(t,r)=>n=>!(!n||!cf(t,n,r)),f4=(t,r,n)=>o=>{t.setStyle(o,r,n),""===o.getAttribute("style")&&o.removeAttribute("style"),"SPAN"===o.nodeName&&0===t.getAttribs(o).length&&t.remove(o,!0)},f9=l7([{keep:[]},{rename:["name"]},{removed:[]}]),f7=/^(src|href|style)$/,pe=tz.each,pt=(t,r,n)=>t.isChildOf(r,n)&&r!==n&&!t.isBlock(n),pr=(t,r,n)=>{let o=r[n?"startContainer":"endContainer"],a=r[n?"startOffset":"endOffset"];if(nD(o)){let t=o.childNodes.length-1;!n&&a&&a--,o=o.childNodes[a>t?t:a]}return n$(o)&&n&&a>=o.data.length&&(o=new nS(o,t.getBody()).next()||o),n$(o)&&!n&&0===a&&(o=new nS(o,t.getBody()).prev()||o),o},pn=(t,r)=>{let n=r?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},po=(t,r,n,o)=>{var a;let l=t.create(n,o);return null===(a=r.parentNode)||void 0===a||a.insertBefore(l,r),l.appendChild(r),l},pa=(t,r,n,o,a)=>{let l=ru(r),i=ru(t.create(o,a));return no(i,n?rT(l):rA(l)),n?(r7(l,i),nt(i,l)):(ne(l,i),nr(i,l)),i.dom},pl=(t,r,n)=>{let o;let a=r.parentNode,l=t.dom,i=ix(t);cv(n)&&a===l.getRoot()&&(n.list_block&&cm(r,n.list_block)||ed(eR(r.childNodes),r=>{cs(t,i,r.nodeName.toLowerCase())?o?o.appendChild(r):(o=po(l,r,i),l.setAttribs(o,i_(t))):o=null})),cy(n)&&cC(n)&&tj(ej(n,"mixed"),!0)&&!cm(n.inline,r)||l.remove(r,!0)},pi=(t,r,n)=>z(t)?{name:r,value:null}:{name:t,value:cu(r,n)},ps=(t,r)=>{""===t.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style"))},pd=(t,r,n,o,a)=>{let l=!1;pe(n.styles,(i,s)=>{let{name:d,value:c}=pi(s,i,o),u=cg(c,d);(n.remove_similar||D(c)||!nD(a)||cm(cf(t,a,d),u))&&t.setStyle(r,d,""),l=!0}),l&&ps(t,r)},pc=(t,r,n,o,a)=>{let l=t.dom,i=fl(t),s=t.schema;if(cC(r)&&oy(s,r.inline)&&oE(s,o)&&o.parentElement===t.getBody())return pl(t,o,r),f9.removed();if(!r.ceFalseOverride&&o&&"false"===l.getContentEditableParent(o)||o&&!fB(l,o,r)&&(!r.links||"A"!==o.nodeName))return f9.keep();let d=r.preserve_attributes;if(cC(r)&&"all"===r.remove&&P(d)){let t=em(l.getAttribs(o),t=>el(d,t.name.toLowerCase()));if(l.removeAllAttribs(o),ed(t,t=>l.setAttrib(o,t.name,t.value)),t.length>0)return f9.rename("span")}if("all"!==r.remove){pd(l,o,r,n,a),pe(r.attributes,(t,i)=>{let{name:s,value:d}=pi(i,t,n);if(r.remove_similar||D(d)||!nD(a)||cm(l.getAttrib(a,s),d)){if("class"===s){let t=l.getAttrib(o,s);if(t){let r="";if(ed(t.split(/\s+/),t=>{/mce\-\w+/.test(t)&&(r+=(r?" ":"")+t)}),r)return void l.setAttrib(o,s,r)}}if(f7.test(s)&&o.removeAttribute("data-mce-"+s),"style"===s&&nF(["li"])(o)&&"none"===l.getStyle(o,"list-style-type"))return o.removeAttribute(s),void l.setStyle(o,"list-style-type","none");"class"===s&&o.removeAttribute("className"),o.removeAttribute(s)}}),pe(r.classes,t=>{t=cu(t,n),nD(a)&&!l.hasClass(a,t)||l.removeClass(o,t)});let t=l.getAttribs(o);for(let r=0;r<t.length;r++){let n=t[r].nodeName;if(!i.isAttributeInternal(n))return f9.keep()}}return"none"!==r.remove?(pl(t,o,r),f9.removed()):f9.keep()},pu=(t,r,n,o)=>pc(t,r,n,o,o).fold(q(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),q(null)),pm=(t,r,n,o,a)=>{(o||t.selection.isEditable())&&((t,r,n,o,a)=>{let l=t.formatter.get(r),i=l[0],s=t.dom,d=t.selection,c=o=>{let s;let d=(o.parentNode&&ed(ch(t.dom,o.parentNode).reverse(),o=>{if(!s&&nD(o)&&"_start"!==o.id&&"_end"!==o.id){let l=fD(t,o,r,n,a);l&&!1!==l.split&&(s=o)}}),s);return((t,r,n,o,a,l,i,s)=>{var d,c;let u,m;let g=t.dom;if(n){let l=n.parentNode;for(let n=o.parentNode;n&&n!==l;n=n.parentNode){let o=g.clone(n,!1);for(let n=0;n<r.length&&null!==(o=pu(t,r[n],s,o));n++);o&&(u&&o.appendChild(u),m||(m=o),u=o)}i.mixed&&g.isBlock(n)||(o=null!==(d=g.split(n,o))&&void 0!==d?d:o),u&&m&&(null===(c=a.parentNode)||void 0===c||c.insertBefore(u,a),m.appendChild(a),cC(i)&&f8(t,i,0,u))}return o})(t,l,d,o,o,0,i,n)},u=r=>ei(l,o=>pg(t,o,n,r,r)),m=r=>{let n=eR(r.childNodes),o=u(r)||ei(l,t=>fB(s,r,t)),a=r.parentNode;if(!o&&I(a)&&cE(i)&&u(a),i.deep&&n.length)for(let t=0;t<n.length;t++)m(n[t]);ed(["underline","line-through","overline"],n=>{nD(r)&&t.dom.getStyle(r,"text-decoration")===n&&r.parentNode&&cp(s,r.parentNode)===n&&pg(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,r)})},g=t=>{let r=s.get(t?"_start":"_end");if(r){let n,o=r[t?"firstChild":"lastChild"];return dZ(n=o)&&nD(n)&&("_start"===n.id||"_end"===n.id)&&(o=o[t?"firstChild":"lastChild"]),n$(o)&&0===o.data.length&&(o=t?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),s.remove(r,!0),o}return null},f=r=>{let n,o,a=cD(s,r,l,r.collapsed);if(i.split){if((n=pr(t,a=ub(a),!0))!==(o=pr(t,a))){if(pt(s,n=pn(n,!0),o=pn(o,!1)))return c(pa(s,et.from(n.firstChild).getOr(n),!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0);if(pt(s,o,n))return c(pa(s,et.from(o.lastChild).getOr(o),!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1);n=po(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=po(s,o,"span",{id:"_end","data-mce-type":"bookmark"});let t=s.createRng();t.setStartAfter(n),t.setEndBefore(o),cL(s,t,t=>{ed(t,t=>{dZ(t)||dZ(t.parentNode)||c(t)})}),c(n),c(o),n=g(!0),o=g()}else n=o=c(n);a.startContainer=n.parentNode?n.parentNode:n,a.startOffset=s.nodeIndex(n),a.endContainer=o.parentNode?o.parentNode:o,a.endOffset=s.nodeIndex(o)+1}cL(s,a,t=>{ed(t,m)})};if(o){if(cr(o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),f(t)}else f(o);cq(t,r,o,n)}else d.isCollapsed()&&cC(i)&&!d3(t).length?fH(t,r,n,a):(co(t,()=>ce(t,f),o=>cC(i)&&fL(t,r,n,o)),t.nodeChanged()),"removeformat"===r?ed(fJ(t.selection),r=>{ed(fY,n=>t.dom.setStyle(r,n,"")),ps(t.dom,r)}):fG(t.formatter,r).each(r=>{ed(fJ(t.selection),o=>pd(t.dom,o,r,n,null))}),cq(t,r,o,n)})(t,r,n,o,a)},pg=(t,r,n,o,a)=>pc(t,r,n,o,a).fold(J,r=>(t.dom.rename(o,r),!0),ee),pf=tz.each,pp=tz.each,ph=(t,r,n,o)=>{if(pp(n.styles,(n,a)=>{t.setStyle(r,a,cu(n,o))}),n.styles){let n=t.getAttrib(r,"style");n&&t.setAttrib(r,"data-mce-style",n)}},pb=(t,r,n,o)=>{let a=t.formatter.get(r),l=a[0],i=!o&&t.selection.isCollapsed(),s=t.dom,d=t.selection,c=(t,r=l)=>{U(r.onformat)&&r.onformat(t,r,n,o),ph(s,t,r,n),pp(r.attributes,(r,o)=>{s.setAttrib(t,o,cu(r,n))}),pp(r.classes,r=>{let o=cu(r,n);s.hasClass(t,o)||s.addClass(t,o)})},u=(t,r)=>{let n=!1;return pp(t,t=>!(!cy(t)||("false"!==s.getContentEditable(r)||t.ceFalseOverride)&&(!I(t.collapsed)||t.collapsed===i)&&s.is(r,t.selector)&&!dI(r)&&(c(r,t),n=!0,1))),n},m=t=>{if(T(t)){let r=s.create(t);return c(r),r}return null},g=(o,i,s)=>{let d=[],g=!0,f=l.inline||l.block,p=m(f);cL(o,i,i=>{let m;let h=i=>{let b=!1,v=g,y=!1,C=i.parentNode,E=C.nodeName.toLowerCase(),w=o.getContentEditable(i);I(w)&&(v=g,g="true"===w,b=!0,y=cc(t,i));let x=g&&!b;if(nG(i)&&!((t,r,n,o)=>{if(i9(t)&&cC(r)&&n.parentNode){let r=o6(t.schema),a=n_(ru(n),t=>dI(t.dom));return e$(r,o)&&n7(t.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!a}return!1})(t,l,i,E))return m=null,void(cv(l)&&o.remove(i));if(cv(l)&&!0===l.wrapper&&fD(t,i,r,n))m=null;else{if(((r,n,o)=>{let a=cv(l)&&!0!==l.wrapper&&ci(t.schema,r)&&cs(t,n,f);return o&&a})(i,E,x)){let t=o.rename(i,f);return c(t),d.push(t),void(m=null)}if(cy(l)){let t=u(a,i);if(!t&&I(C)&&cE(l)&&(t=u(a,C)),!cC(l)||t)return void(m=null)}I(p)&&((r,n,a,i)=>{let d=cs(t,f,r.nodeName.toLowerCase())&&cs(t,n,f),c=!s&&n$(r)&&nN(r.data),u=dI(r),m=!cC(l)||!o.isBlock(r);return(a||i)&&d&&!c&&!u&&m})(i,E,x,y)?(m||(m=o.clone(p,!1),C.insertBefore(m,i),d.push(m)),y&&b&&(g=v),m.appendChild(i)):(m=null,ed(eR(i.childNodes),h),b&&(g=v),m=null)}};ed(i,h)}),!0===l.links&&ed(d,t=>{let r=t=>{"A"===t.nodeName&&c(t,l),ed(eR(t.childNodes),r)};r(t)}),ed(d,i=>{var s,u;let m;let g=(m=0,ed(i.childNodes,t=>{I(t)&&n$(t)&&0===t.length||dZ(t)||m++}),m);!(d.length>1)&&o.isBlock(i)||0!==g?(cC(l)||cv(l)&&l.wrapper)&&(l.exact||1!==g||(i=eh((s=i).childNodes,cn).filter(t=>"false"!==o.getContentEditable(t)&&fB(o,t,l)).map(t=>{let r=o.clone(t,!1);return c(r),o.replace(r,s,!0),o.remove(t,!0),r}).getOr(s)),u=i,pf(a,r=>{cC(r)&&pf(t.dom.select(r.inline,u),o=>{f1(o)&&pg(t,r,n,o,r.exact?o:null)}),((t,r,n)=>{if(r.clear_child_styles){let o=r.links?"*:not(a)":"*";f0(t.select(o,n),n=>{f1(n)&&t.isEditable(n)&&f0(r.styles,(r,o)=>{t.setStyle(n,o,"")})})}})(t.dom,r,u)}),((t,r,n,o,a)=>{let l=a.parentNode;fD(t,l,n,o)&&pg(t,r,o,a)||r.merge_with_parents&&l&&t.dom.getParent(l,l=>!!fD(t,l,n,o)&&(pg(t,r,o,a),!0))})(t,l,r,n,i),((t,r,n,o)=>{if(r.styles&&r.styles.backgroundColor){let a=f6(t,"fontSize");f5(o,r=>a(r)&&t.isEditable(r),f4(t,"backgroundColor",cu(r.styles.backgroundColor,n)))}})(o,l,n,i),((t,r,n,o)=>{let a=r=>{if(nL(r)&&nD(r.parentNode)&&t.isEditable(r)){let n=cp(t,r.parentNode);t.getStyle(r,"color")&&n?t.setStyle(r,"text-decoration",n):t.getStyle(r,"text-decoration")===n&&t.setStyle(r,"text-decoration",null)}};r.styles&&(r.styles.color||r.styles.textDecoration)&&(tz.walk(o,a,"childNodes"),a(o))})(o,l,0,i),((t,r,n,o)=>{if(cC(r)&&("sub"===r.inline||"sup"===r.inline)){let n=f6(t,"fontSize");f5(o,r=>n(r)&&t.isEditable(r),f4(t,"fontSize",""));let a=em(t.select("sup"===r.inline?"sub":"sup",o),t.isEditable);t.remove(a,!0)}})(o,l,0,i),f8(t,l,0,i)):o.remove(i,!0)})},f=cr(o)?o:d.getNode();if("false"===s.getContentEditable(f)&&!cc(t,f))return u(a,o=f),void cV(t,r,o,n);if(l){if(o){if(cr(o)){if(!u(a,o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),g(s,cD(s,t,a),!0)}}else g(s,o,!0)}else i&&cC(l)&&!d3(t).length?((t,r,n)=>{var o,a;let l;let i=t.selection,s=t.formatter.get(r);if(!s)return;let d=i.getRng(),c=d.startOffset,u=d.startContainer.nodeValue;l=dU(t.getBody(),i.getStart());let m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&c>0&&c<u.length&&m.test(u.charAt(c))&&m.test(u.charAt(c-1))){let o=i.getBookmark();d.collapse(!0);let a=cD(t.dom,d,s);a=ub(a),t.formatter.apply(r,n,a),i.moveToBookmark(o)}else{let s=l?fM(l):null;l&&(null==s?void 0:s.data)==="\uFEFF"||(o=t.getDoc(),a=fF(!0).dom,s=(l=o.importNode(a,!0)).firstChild,d.insertNode(l),c=1),t.formatter.apply(r,n,l),i.setCursorLocation(s,c)}})(t,r,n):(d.setRng(fv(d.getRng())),co(t,()=>{ce(t,(t,r)=>{let n=r?t:cD(s,t,a);g(s,n,!1)})},ee),t.nodeChanged()),fG(t.formatter,r).each(r=>{let o;ed(em((t=>{let r=t.getSelectedBlocks(),n=t.getRng();if(t.isCollapsed())return[];if(1===r.length)return fX(n,r[0])&&fZ(n,r[0])?r:[];{let t=eS(r).filter(t=>fX(n,t)).toArray(),o=eN(r).filter(t=>fZ(n,t)).toArray(),a=r.slice(1,-1);return t.concat(a).concat(o)}})(o=t.selection),fQ(o.dom)),t=>ph(s,t,r,n))});eH(fW,r)&&ed(fW[r],r=>{r(t)})}cV(t,r,o,n)},pv=(t,r,n,o)=>{(o||t.selection.isEditable())&&pb(t,r,n,o)},py=t=>eH(t,"vars"),pC=t=>t.selection.getStart(),pE=(t,r,n,o,a)=>ep(r,r=>!M(t.formatter.matchNode(r,n,null!=a?a:{},o)),r=>!!fT(t,r,n)||!o&&I(t.formatter.matchNode(r,n,a,!0))),pw=(t,r)=>{let n=null!=r?r:pC(t);return em(ch(t.dom,n),t=>nD(t)&&!nU(t))},px=(t,r,n)=>{let o=pw(t,r);eP(n,(n,a)=>{let l=n=>{let l=pE(t,o,a,n.similar,py(n)?n.vars:void 0),i=l.isSome();if(n.state.get()!==i){n.state.set(i);let t=l.getOr(r);py(n)?n.callback(i,{node:t,format:a,parents:o}):ed(n.callbacks,r=>r(i,{node:t,format:a,parents:o}))}};ed([n.withSimilar,n.withoutSimilar],l),ed(n.withVars,l)})},p_=tz.explode,pk=()=>{let t={};return{addFilter:(r,n)=>{ed(p_(r),r=>{eH(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>ez(t),removeFilter:(r,n)=>{ed(p_(r),r=>{if(eH(t,r)){if(I(n)){let o=t[r],a=em(o.callbacks,t=>t!==n);a.length>0?o.callbacks=a:delete t[r]}else delete t[r]}})}}},pS=(t,r,n)=>{var o;let a=as();r.convert_fonts_to_spans&&((t,r,n)=>{t.addNodeFilter("font",t=>{ed(t,t=>{let o=r.parse(t.attr("style")),a=t.attr("color"),l=t.attr("face"),i=t.attr("size");a&&(o.color=a),l&&(o["font-family"]=l),i&&ta(i).each(t=>{o["font-size"]=n[t-1]}),t.name="span",t.attr("style",r.serialize(o)),ed(["color","face","size"],r=>{t.attr(r,null)})})})})(t,a,tz.explode(null!==(o=r.font_size_legacy_values)&&void 0!==o?o:"")),((t,r,n)=>{t.addNodeFilter("strike",t=>{let o="html4"!==r.type;ed(t,t=>{if(o)t.name="s";else{let r=n.parse(t.attr("style"));r["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(r))}})})})(t,n,a)},pN=t=>{let[r,...n]=t.split(","),o=n.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(a){let t=";base64"===a[2],r=t?(t=>{let r=/([a-z0-9+\/=\s]+)/i.exec(t);return r?r[1]:""})(o):decodeURIComponent(o);return et.some({type:a[1],data:r,base64Encoded:t})}return et.none()},pR=(t,r,n=!0)=>{let o=r;if(n)try{o=atob(r)}catch(t){return et.none()}let a=new Uint8Array(o.length);for(let t=0;t<a.length;t++)a[t]=o.charCodeAt(t);return et.some(new Blob([a],{type:t}))},pA=t=>new Promise((r,n)=>{let o=new FileReader;o.onloadend=()=>{r(o.result)},o.onerror=()=>{var t;n(null===(t=o.error)||void 0===t?void 0:t.message)},o.readAsDataURL(t)}),pT=0,pO=(t,r,n)=>pN(t).bind(({data:t,type:o,base64Encoded:a})=>r&&!a?et.none():n(a?t:btoa(t),o)),pB=(t,r,n)=>{let o=t.create("blobid"+pT++,r,n);return t.add(o),o},pP=(t,r,n=!1)=>pO(r,n,(r,n)=>et.from(t.getByData(r,n)).orThunk(()=>pR(n,r).map(n=>pB(t,n,r)))),pD=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,pL=t=>et.from(t.match(pD)).bind(t=>ek(t,1)).map(t=>e4(t,"www.")?t.substring(4):t),pM=(t,r)=>{et.from(t.attr("src")).bind(pL).forall(t=>!el(r,t))&&t.attr("sandbox","")},pF=(t,r)=>e4(t,`${r}/`),{entries:pI,setPrototypeOf:pU,isFrozen:pz,getPrototypeOf:pj,getOwnPropertyDescriptor:pH}=Object,{freeze:p$,seal:pV,create:pq}=Object,{apply:pW,construct:pK}="undefined"!=typeof Reflect&&Reflect;pW||(pW=function(t,r,n){return t.apply(r,n)}),p$||(p$=function(t){return t}),pV||(pV=function(t){return t}),pK||(pK=function(t,r){return new t(...r)});let pY=p5(Array.prototype.forEach),pG=p5(Array.prototype.pop),pX=p5(Array.prototype.push),pZ=p5(String.prototype.toLowerCase),pQ=p5(String.prototype.toString),pJ=p5(String.prototype.match),p0=p5(String.prototype.replace),p1=p5(String.prototype.indexOf),p2=p5(String.prototype.trim),p3=p5(RegExp.prototype.test),p8=(g=TypeError,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return pK(g,r)});function p5(t){return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return pW(t,r,o)}}function p6(t,r,n){var o;n=null!==(o=n)&&void 0!==o?o:pZ,pU&&pU(t,null);let a=r.length;for(;a--;){let o=r[a];if("string"==typeof o){let t=n(o);t!==o&&(pz(r)||(r[a]=t),o=t)}t[o]=!0}return t}function p4(t){let r=pq(null);for(let[n,o]of pI(t))r[n]=o;return r}function p9(t,r){for(;null!==t;){let n=pH(t,r);if(n){if(n.get)return p5(n.get);if("function"==typeof n.value)return p5(n.value)}t=pj(t)}return function(t){return console.warn("fallback value for",t),null}}let p7=p$(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),he=p$(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ht=p$(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hr=p$(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hn=p$(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ho=p$(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ha=p$(["#text"]),hl=p$(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hi=p$(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hs=p$(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=p$(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hc=pV(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hu=pV(/<%[\w\W]*|[\w\W]*%>/gm),hm=pV(/\${[\w\W]*}/gm),hg=pV(/^data-[\-\w.\u00B7-\uFFFF]/),hf=pV(/^aria-[\-\w]+$/),hp=pV(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hh=pV(/^(?:\w+script|data):/i),hb=pV(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hv=pV(/^html$/i);var hy=Object.freeze({__proto__:null,MUSTACHE_EXPR:hc,ERB_EXPR:hu,TMPLIT_EXPR:hm,DATA_ATTR:hg,ARIA_ATTR:hf,IS_ALLOWED_URI:hp,IS_SCRIPT_OR_DATA:hh,ATTR_WHITESPACE:hb,DOCTYPE_NAME:hv});let hC=()=>"undefined"==typeof window?null:window;var hE=function t(){let r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hC(),o=r=>t(r);if(o.version="3.0.5",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;let a=n.document,l=a.currentScript,{document:i}=n,{DocumentFragment:s,HTMLTemplateElement:d,Node:c,Element:u,NodeFilter:m,NamedNodeMap:g=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=n,b=u.prototype,v=p9(b,"cloneNode"),y=p9(b,"nextSibling"),C=p9(b,"childNodes"),E=p9(b,"parentNode");if("function"==typeof d){let t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let w,x="",{implementation:_,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:N}=i,{importNode:R}=a,A={};o.isSupported="function"==typeof pI&&"function"==typeof E&&_&&void 0!==_.createHTMLDocument;let{MUSTACHE_EXPR:T,ERB_EXPR:O,TMPLIT_EXPR:B,DATA_ATTR:P,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:M}=hy,{IS_ALLOWED_URI:F}=hy,I=null,U=p6({},[...p7,...he,...ht,...hn,...ha]),z=null,j=p6({},[...hl,...hi,...hs,...hd]),H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,V=null,q=!0,W=!0,K=!1,Y=!0,G=!1,X=!1,Z=!1,Q=!1,J=!1,ee=!1,et=!1,er=!0,en=!1,eo=!0,ea=!1,el={},ei=null,es=p6({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ed=null,ec=p6({},["audio","video","img","source","image","track"]),eu=null,em=p6({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eg="http://www.w3.org/1998/Math/MathML",ef="http://www.w3.org/2000/svg",ep="http://www.w3.org/1999/xhtml",eh=ep,eb=!1,ev=null,ey=p6({},[eg,ef,ep],pQ),eC=["application/xhtml+xml","text/html"],eE,ew=null,ex=i.createElement("form"),e_=function(t){return t instanceof RegExp||t instanceof Function},ek=function(t){if(!ew||ew!==t){if(t&&"object"==typeof t||(t={}),t=p4(t),eE="application/xhtml+xml"===(r=r=-1===eC.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?pQ:pZ,I="ALLOWED_TAGS"in t?p6({},t.ALLOWED_TAGS,eE):U,z="ALLOWED_ATTR"in t?p6({},t.ALLOWED_ATTR,eE):j,ev="ALLOWED_NAMESPACES"in t?p6({},t.ALLOWED_NAMESPACES,pQ):ey,eu="ADD_URI_SAFE_ATTR"in t?p6(p4(em),t.ADD_URI_SAFE_ATTR,eE):em,ed="ADD_DATA_URI_TAGS"in t?p6(p4(ec),t.ADD_DATA_URI_TAGS,eE):ec,ei="FORBID_CONTENTS"in t?p6({},t.FORBID_CONTENTS,eE):es,$="FORBID_TAGS"in t?p6({},t.FORBID_TAGS,eE):{},V="FORBID_ATTR"in t?p6({},t.FORBID_ATTR,eE):{},el="USE_PROFILES"in t&&t.USE_PROFILES,q=!1!==t.ALLOW_ARIA_ATTR,W=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,X=t.WHOLE_DOCUMENT||!1,J=t.RETURN_DOM||!1,ee=t.RETURN_DOM_FRAGMENT||!1,et=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,er=!1!==t.SANITIZE_DOM,en=t.SANITIZE_NAMED_PROPS||!1,eo=!1!==t.KEEP_CONTENT,ea=t.IN_PLACE||!1,F=t.ALLOWED_URI_REGEXP||hp,eh=t.NAMESPACE||ep,H=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(W=!1),ee&&(J=!0),el&&(I=p6({},[...ha]),z=[],!0===el.html&&(p6(I,p7),p6(z,hl)),!0===el.svg&&(p6(I,he),p6(z,hi),p6(z,hd)),!0===el.svgFilters&&(p6(I,ht),p6(z,hi),p6(z,hd)),!0===el.mathMl&&(p6(I,hn),p6(z,hs),p6(z,hd))),t.ADD_TAGS&&(I===U&&(I=p4(I)),p6(I,t.ADD_TAGS,eE)),t.ADD_ATTR&&(z===j&&(z=p4(z)),p6(z,t.ADD_ATTR,eE)),t.ADD_URI_SAFE_ATTR&&p6(eu,t.ADD_URI_SAFE_ATTR,eE),t.FORBID_CONTENTS&&(ei===es&&(ei=p4(ei)),p6(ei,t.FORBID_CONTENTS,eE)),eo&&(I["#text"]=!0),X&&p6(I,["html","head","body"]),I.table&&(p6(I,["tbody"]),delete $.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw p8('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw p8('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(w=t.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===w&&(w=function(t,r){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null,o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(n=r.getAttribute(o));let a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(h,l)),null!==w&&"string"==typeof x&&(x=w.createHTML(""));p$&&p$(t),ew=t}},eS=p6({},["mi","mo","mn","ms","mtext"]),eN=p6({},["foreignobject","desc","title","annotation-xml"]),eR=p6({},["title","style","font","a","script"]),eA=p6({},he);p6(eA,ht),p6(eA,hr);let eT=p6({},hn);p6(eT,ho);let eO=function(t){pX(o.removed,{element:t});try{t.parentNode.removeChild(t)}catch(r){t.remove()}},eB=function(t,r){try{pX(o.removed,{attribute:r.getAttributeNode(t),from:r})}catch(t){pX(o.removed,{attribute:null,from:r})}if(r.removeAttribute(t),"is"===t&&!z[t]){if(J||ee)try{eO(r)}catch(t){}else try{r.setAttribute(t,"")}catch(t){}}},eP=function(t){let n,o;if(Q)t="<remove></remove>"+t;else{let r=pJ(t,/^[\r\n\t ]+/);o=r&&r[0]}"application/xhtml+xml"===r&&eh===ep&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let a=w?w.createHTML(t):t;if(eh===ep)try{n=(new p).parseFromString(a,r)}catch(t){}if(!n||!n.documentElement){n=_.createDocument(eh,"template",null);try{n.documentElement.innerHTML=eb?x:a}catch(t){}}let l=n.body||n.documentElement;return t&&o&&l.insertBefore(i.createTextNode(o),l.childNodes[0]||null),eh===ep?N.call(n,X?"html":"body")[0]:X?n.documentElement:l},eD=function(t){return k.call(t.ownerDocument||t,t,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},eL=function(t){return"object"==typeof c?t instanceof c:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},eM=function(t,r,n){A[t]&&pY(A[t],t=>{t.call(o,r,n,ew)})},eF=function(t){let n;if(eM("beforeSanitizeElements",t,null),t instanceof f&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof g)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return eO(t),!0;let a=eE(t.nodeName);if(eM("uponSanitizeElement",t,{tagName:a,allowedTags:I}),t.hasChildNodes()&&!eL(t.firstElementChild)&&(!eL(t.content)||!eL(t.content.firstElementChild))&&p3(/<[/\w]/g,t.innerHTML)&&p3(/<[/\w]/g,t.textContent))return eO(t),!0;if(!I[a]||$[a]){if(!$[a]&&eU(a)&&(H.tagNameCheck instanceof RegExp&&p3(H.tagNameCheck,a)||H.tagNameCheck instanceof Function&&H.tagNameCheck(a)))return!1;if(eo&&!ei[a]){let r=E(t)||t.parentNode,n=C(t)||t.childNodes;if(n&&r)for(let o=n.length-1;o>=0;--o)r.insertBefore(v(n[o],!0),y(t))}return eO(t),!0}return t instanceof u&&!function(t){let n=E(t);n&&n.tagName||(n={namespaceURI:eh,tagName:"template"});let o=pZ(t.tagName),a=pZ(n.tagName);return!!ev[t.namespaceURI]&&(t.namespaceURI===ef?n.namespaceURI===ep?"svg"===o:n.namespaceURI===eg?"svg"===o&&("annotation-xml"===a||eS[a]):!!eA[o]:t.namespaceURI===eg?n.namespaceURI===ep?"math"===o:n.namespaceURI===ef?"math"===o&&eN[a]:!!eT[o]:t.namespaceURI===ep?!(n.namespaceURI===ef&&!eN[a])&&!(n.namespaceURI===eg&&!eS[a])&&!eT[o]&&(eR[o]||!eA[o]):!("application/xhtml+xml"!==r||!ev[t.namespaceURI]))}(t)?(eO(t),!0):("noscript"===a||"noembed"===a||"noframes"===a)&&p3(/<\/no(script|embed|frames)/i,t.innerHTML)?(eO(t),!0):(G&&3===t.nodeType&&(n=p0(n=t.textContent,T," "),n=p0(n,O," "),n=p0(n,B," "),t.textContent!==n&&(pX(o.removed,{element:t.cloneNode()}),t.textContent=n)),eM("afterSanitizeElements",t,null),!1)},eI=function(t,r,n){if(er&&("id"===r||"name"===r)&&(n in i||n in ex))return!1;if(W&&!V[r]&&p3(P,r));else if(q&&p3(D,r));else if(!z[r]||V[r]){if(!(eU(t)&&(H.tagNameCheck instanceof RegExp&&p3(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&p3(H.attributeNameCheck,r)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(r))||"is"===r&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&p3(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(eu[r]);else if(p3(F,p0(n,M,"")));else if("src"!==r&&"xlink:href"!==r&&"href"!==r||"script"===t||0!==p1(n,"data:")||!ed[t]){if(K&&!p3(L,p0(n,M,"")));else if(n)return!1}return!0},eU=function(t){return t.indexOf("-")>0},ez=function(t){let r,n,o,a;eM("beforeSanitizeAttributes",t,null);let{attributes:l}=t;if(!l)return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(a=l.length;a--;){let{name:s,namespaceURI:d}=r=l[a],c=n="value"===s?r.value:p2(r.value);if(o=eE(s),i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,eM("uponSanitizeAttribute",t,i),n=i.attrValue,i.forceKeepAttr)continue;if(!i.keepAttr||!Y&&p3(/\/>/i,n)){eB(s,t);continue}G&&(n=p0(n,T," "),n=p0(n,O," "),n=p0(n,B," "));let u=eE(t.nodeName);if(eI(u,o,n)){if(en&&("id"===o||"name"===o)&&(eB(s,t),n="user-content-"+n),w&&"object"==typeof h&&"function"==typeof h.getAttributeType){if(d);else switch(h.getAttributeType(u,o)){case"TrustedHTML":n=w.createHTML(n);break;case"TrustedScriptURL":n=w.createScriptURL(n)}}if(n!==c)try{d?t.setAttributeNS(d,s,n):t.setAttribute(s,n)}catch(r){eB(s,t)}}else eB(s,t)}eM("afterSanitizeAttributes",t,null)},ej=function t(r){let n;let o=eD(r);for(eM("beforeSanitizeShadowDOM",r,null);n=o.nextNode();)eM("uponSanitizeShadowNode",n,null),eF(n)||(n.content instanceof s&&t(n.content),ez(n));eM("afterSanitizeShadowDOM",r,null)};return o.sanitize=function(t){let r,n,l,i,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((eb=!t)&&(t="<!-->"),"string"!=typeof t&&!eL(t)){if("function"!=typeof t.toString)throw p8("toString is not a function");if("string"!=typeof(t=t.toString()))throw p8("dirty is not a string, aborting")}if(!o.isSupported)return t;if(Z||ek(d),o.removed=[],"string"==typeof t&&(ea=!1),ea){if(t.nodeName){let r=eE(t.nodeName);if(!I[r]||$[r])throw p8("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(n=(r=eP("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?r=n:r.appendChild(n);else{if(!J&&!G&&!X&&-1===t.indexOf("<"))return w&&et?w.createHTML(t):t;if(!(r=eP(t)))return J?null:et?x:""}r&&Q&&eO(r.firstChild);let u=eD(ea?t:r);for(;l=u.nextNode();)eF(l)||(l.content instanceof s&&ej(l.content),ez(l));if(ea)return t;if(J){if(ee)for(i=S.call(r.ownerDocument);r.firstChild;)i.appendChild(r.firstChild);else i=r;return(z.shadowroot||z.shadowrootmode)&&(i=R.call(a,i,!0)),i}let m=X?r.outerHTML:r.innerHTML;return X&&I["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&p3(hv,r.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+m),G&&(m=p0(m,T," "),m=p0(m,O," "),m=p0(m,B," ")),w&&et?w.createHTML(m):m},o.setConfig=function(t){ek(t),Z=!0},o.clearConfig=function(){ew=null,Z=!1},o.isValidAttribute=function(t,r,n){return ew||ek({}),eI(eE(t),eE(r),n)},o.addHook=function(t,r){"function"==typeof r&&(A[t]=A[t]||[],pX(A[t],r))},o.removeHook=function(t){if(A[t])return pG(A[t])},o.removeHooks=function(t){A[t]&&(A[t]=[])},o.removeAllHooks=function(){A={}},o}();let hw=tz.each,hx=tz.trim,h_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hk={ftp:21,http:80,https:443,mailto:25},hS=["img","video"],hN=(t,r,n)=>{let o;let a=(t=>{try{return decodeURIComponent(t)}catch(r){return unescape(t)}})(r).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(a)||!t.allow_html_data_urls&&(/^data:image\//i.test(a)?(I(o=t.allow_svg_data_urls)?!o:!I(n)||!el(hS,n))&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)))};class hR{static parseDataUri(t){let r;let n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(r=o[1]),{type:r,data:n[1]}}static isDomSafe(t,r,n={}){return!!n.allow_script_urls||!hN(n,oq.decode(t).replace(/[\s\u0000-\u001F]+/g,""),r)}static getDocumentBaseUrl(t){var r;let n;return n=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(r=t.href)&&void 0!==r?r:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(t,r={}){this.path="",this.directory="",t=hx(t),this.settings=r;let n=r.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);let a=0===t.indexOf("//");if(0!==t.indexOf("/")||a||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){let r=n?n.path:new hR(document.location.href).directory;if(""===(null==n?void 0:n.protocol))t="//mce_host"+o.toAbsPath(r,t);else{let a=/([^#?]*)([#?]?.*)/.exec(t);a&&(t=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(r,a[1])+a[2])}}t=t.replace(/@@/g,"(mce_at)");let l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);l&&hw(h_,(t,r)=>{let n=l[r];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),a&&(o.protocol="")}setPath(t){let r=/^(.*?)\/?(\w+)?$/.exec(t);r&&(this.path=r[0],this.directory=r[1],this.file=r[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;let r=new hR(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();let n=this.getURI(),o=r.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let a=this.toRelPath(this.path,r.path);return r.query&&(a+="?"+r.query),r.anchor&&(a+="#"+r.anchor),a}toAbsolute(t,r){let n=new hR(t,{base_uri:this});return n.getURI(r&&this.isSameOrigin(n))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;let r=this.protocol?hk[this.protocol]:null;if(r&&(this.port||r)==(t.port||r))return!0}return!1}toRelPath(t,r){let n,o,a=0,l="",i=t.substring(0,t.lastIndexOf("/")).split("/"),s=r.split("/");if(i.length>=s.length){for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}}if(i.length<s.length){for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}}if(1===a)return r;for(n=0,o=i.length-(a-1);n<o;n++)l+="../";for(n=a-1,o=s.length;n<o;n++)l+=n!==a-1?"/"+s[n]:s[n];return l}toAbsPath(t,r){let n,o=0,a=/\/$/.test(r)?"/":"",l=t.split("/"),i=r.split("/"),s=[];hw(l,t=>{t&&s.push(t)});let d=[];for(let t=i.length-1;t>=0;t--)0!==i[t].length&&"."!==i[t]&&(".."!==i[t]?o>0?o--:d.push(i[t]):o++);let c=s.length-o;return 0!==(n=c<=0?eE(d).join("/"):s.slice(0,c).join("/")+"/"+eE(d).join("/")).indexOf("/")&&(n="/"+n),a&&n.lastIndexOf("/")!==n.length-1&&(n+=a),n}getURI(t=!1){let r;return this.source&&!t||(r="",t||(this.protocol?r+=this.protocol+"://":r+="//",this.userInfo&&(r+=this.userInfo+"@"),this.host&&(r+=this.host),this.port&&(r+=":"+this.port)),this.path&&(r+=this.path),this.query&&(r+="?"+this.query),this.anchor&&(r+="#"+this.anchor),this.source=r),this.source}}let hA=tz.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hT="data-mce-type",hO=0,hB=(t,r,n,o,a)=>{var l,i,s,d;let c=r.validate,u=n.getSpecialElements();8===t.nodeType&&!r.allow_conditional_comments&&/^\[if/i.test(null!==(l=t.nodeValue)&&void 0!==l?l:"")&&(t.nodeValue=" "+t.nodeValue);let m=null!==(i=null==a?void 0:a.tagName)&&void 0!==i?i:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(I(a)&&(a.allowedTags[m]=!0));if(1!==t.nodeType||"body"===m)return;let g=ru(t),f=t7(g,hT),p=t4(g,"data-mce-bogus");if(!f&&T(p))return void("all"===p?nl(g):ni(g));let h=n.getElementRule(m);if(!c||h){if(I(a)&&(a.allowedTags[m]=!0),c&&h&&!f){if(ed(null!==(s=h.attributesForced)&&void 0!==s?s:[],t=>{t5(g,t.name,"{$uid}"===t.value?"mce_"+hO++:t.value)}),ed(null!==(d=h.attributesDefault)&&void 0!==d?d:[],t=>{t7(g,t.name)||t5(g,t.name,"{$uid}"===t.value?"mce_"+hO++:t.value)}),h.attributesRequired&&!ei(h.attributesRequired,t=>t7(g,t))||h.removeEmptyAttrs&&(t=>{let r=t.dom.attributes;return null==r||0===r.length})(g))return void ni(g);h.outputName&&h.outputName!==m&&((t,r)=>{let n=((t,r)=>{let n=rg(r);return t6(n,rt(t)),n})(t,r);ne(t,n),no(n,rO(t)),nl(t)})(g,h.outputName)}}else eH(u,m)?nl(g):ni(g)},hP=(t,r,n,o,a,l)=>"html"!==n&&!ol(o)||!(a in hA&&hN(t,l,o))&&(!t.validate||r.isValid(o,a)||e4(a,"data-")||e4(a,"aria-")),hD=(t,r)=>t.hasAttribute(hT)&&("id"===r||"class"===r||"style"===r),hL=(t,r)=>t in r.getBoolAttrs(),hM=(t,r,n,o)=>{let{attributes:a}=t;for(let l=a.length-1;l>=0;l--){let i=a[l],s=i.name,d=i.value;hP(r,n,o,t.tagName.toLowerCase(),s,d)||hD(t,s)?hL(s,n)&&t.setAttribute(s,s):t.removeAttribute(s)}},hF=(t,r,n)=>{let o=hE();return o.addHook("uponSanitizeElement",(o,a)=>{hB(o,t,r,n.track(o),a)}),o.addHook("uponSanitizeAttribute",(o,a)=>{((t,r,n,o,a)=>{let l=t.tagName.toLowerCase(),{attrName:i,attrValue:s}=a;a.keepAttr=hP(r,n,o,l,i,s),a.keepAttr?(a.allowedAttributes[i]=!0,hL(i,n)&&(a.attrValue=i),r.allow_svg_data_urls&&e4(s,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):hD(t,i)&&(a.forceKeepAttr=!0)})(o,t,r,n.current(),a)}),o},hI=t=>{let r=os(t);if("svg"===r){let r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(t=>`xlink:${t}`);hE().sanitize(t,{IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r})}else{if("math"!==r)throw Error("Not a namespace element");hE().sanitize(t,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})}},hU=tz.makeMap,hz=tz.extend,hj=(t,r,n,o)=>{let a=t.name,l=a in n&&"title"!==a&&"textarea"!==a,i=r.childNodes;for(let r=0,a=i.length;r<a;r++){let a=i[r],s=new md(a.nodeName.toLowerCase(),a.nodeType);if(nD(a)){let t=a.attributes;for(let r=0,n=t.length;r<n;r++){let n=t[r];s.attr(n.name,n.value)}ol(s.name)&&(o(a),s.value=a.innerHTML)}else n$(a)?(s.value=a.data,l&&(s.raw=!0)):(nW(a)||nV(a)||nq(a))&&(s.value=a.data);ol(s.name)||hj(s,a,n,o),t.append(s)}},hH=(t={},r=o9())=>{let n=pk(),o=pk(),a={validate:!0,root_name:"body",sanitize:!0,...t},l=new DOMParser,i=((t,r)=>{let n=(()=>{let t=oo(),r=()=>t.get().map(os).getOr("html");return{track:n=>(oi(n)?t.set(n):t.get().exists(t=>!t.contains(n))&&t.clear(),r()),current:r,reset:()=>{t.clear()}}})();if(t.sanitize){let o=hF(t,r,n);return{sanitizeHtmlElement:(r,a)=>{o.sanitize(r,((t,r)=>{let n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=r,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(t,a)),o.removed=[],n.reset()},sanitizeNamespaceElement:hI}}return{sanitizeHtmlElement:(o,a)=>{let l;let i=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;l=i.nextNode();){let o=n.track(l);hB(l,t,r,o),nD(l)&&hM(l,t,r,o)}n.reset()},sanitizeNamespaceElement:H}})(a,r),s=n.addFilter,d=n.getFilters,c=n.removeFilter,u=o.addFilter,m=o.getFilters,g=o.removeFilter,f=(t,n)=>{let o=T(n.attr(hT)),a=1===n.type&&!eH(t,n.name)&&!ox(r,n)&&!ol(n.name);return 3===n.type||a&&!o},p={schema:r,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:g,addNodeFilter:s,getNodeFilters:d,removeNodeFilter:c,parse:(t,n={})=>{var o;let s=a.validate,c=null!==(o=n.context)&&void 0!==o?o:a.root_name,u=((t,n,o="html")=>{let a="xhtml"===o?"application/xhtml+xml":"text/html",s=eH(r.getSpecialElements(),n.toLowerCase()),d=s?`<${n}>${t}</${n}>`:t,c="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${d}</body></html>`:`<body>${d}</body>`,u=l.parseFromString(c,a).body;return i.sanitizeHtmlElement(u,a),s?u.firstChild:u})(t,c,n.format);oh(r,u);let g=new md(c,11);hj(g,u,r.getSpecialElements(),i.sanitizeNamespaceElement),u.innerHTML="";let[p,h]=((t,r,n,o)=>{let a=n.validate,l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=hz(hU("script,style,head,html,body,title,meta,param"),r.getBlockElements()),d=o6(r),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,g=t=>{let r=t.parent;for(;I(r);){if(r.name in i)return!0;r=r.parent}return!1},f=n=>n.name in s||ox(r,n)||ol(n.name)&&n.parent===t,p=(r,n)=>!I(n?r.prev:r.next)&&!F(r.parent)&&f(r.parent)&&(r.parent!==t||!0===o.isRootContent);return[t=>{var r;if(3===t.type&&!g(t)){let n,o=null!==(r=t.value)&&void 0!==r?r:"";o=o.replace(c," "),(I(n=t.prev)&&(f(n)||"br"===n.name)||p(t,!0))&&(o=o.replace(u,"")),0===o.length?t.remove():t.value=o}},t=>{var s,c;if(1===t.type){let s=r.getElementRule(t.name);if(a&&s){let a=fg(r,l,i,t);s.paddInEmptyBlock&&a&&(t=>{let n=t;for(;I(n);){if(n.name in d)return fg(r,l,i,n);n=n.parent}return!1})(t)?fu(n,o,f,t):s.removeEmpty&&a?f(t)?t.remove():t.unwrap():s.paddEmpty&&(a||fm(t,"#text")&&(null===(c=null==t?void 0:t.firstChild)||void 0===c?void 0:c.value)==="\xa0")&&fu(n,o,f,t)}}else if(3===t.type&&!g(t)){let r=null!==(s=t.value)&&void 0!==s?s:"";(t.next&&f(t.next)||p(t,!1))&&(r=r.replace(m,"")),0===r.length?t.remove():t.value=r}}]})(g,r,a,n),b=[],v={nodes:{},attributes:{}},y=t=>fs(d(),m(),t,v);if(((t,r,n)=>{let o=[];for(let n=t,a=n;n;a=n,n=n.walk()){let l=n;ed(r,t=>t(l)),F(l.parent)&&l!==t?n=a:o.push(l)}for(let t=o.length-1;t>=0;t--){let r=o[t];ed(n,t=>t(r))}})(g,[p,y],[h,s?t=>{fb(r,t)&&b.push(t)}:H]),b.reverse(),s&&b.length>0){if(n.context){let{pass:t,fail:o}=eu(b,t=>t.parent===g);fh(o,r,g,y),n.invalid=t.length>0}else fh(b,r,g,y)}let C=((t,r)=>{var n;let o=null!==(n=r.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===o?"":!0===o?"p":o})(a,n);return C&&("body"===g.name||n.isRootContent)&&((t,n)=>{let o=hz(hU("script,style,head,html,body,title,meta,param"),r.getBlockElements()),l=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,s=t.firstChild,d=null,c=t=>{var r,n;t&&((s=t.firstChild)&&3===s.type&&(s.value=null===(r=s.value)||void 0===r?void 0:r.replace(l,"")),(s=t.lastChild)&&3===s.type&&(s.value=null===(n=s.value)||void 0===n?void 0:n.replace(i,"")))};if(r.isValidChild(t.name,n.toLowerCase())){for(;s;){let r=s.next;f(o,s)?(d||((d=new md(n,1)).attr(a.forced_root_block_attrs),t.insert(d,s)),d.append(s)):(c(d),d=null),s=r}c(d)}})(g,C),n.invalid||fd(v,n),g}};return((t,r)=>{var n,o;let a=t.schema;t.addAttributeFilter("href",t=>{let n=t.length,o=t=>{let r=t?tz.trim(t):"";return/\b(noopener)\b/g.test(r)?r:r.split(" ").filter(t=>t.length>0).concat(["noopener"]).sort().join(" ")};if(!r.allow_unsafe_link_target)for(;n--;){let r=t[n];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",o(r.attr("rel")))}}),r.allow_html_in_named_anchor||t.addAttributeFilter("id,name",t=>{let r,n,o,a,l=t.length;for(;l--;)if("a"===(a=t[l]).name&&a.firstChild&&!a.attr("href"))for(o=a.parent,r=a.lastChild;r&&o;)n=r.prev,o.insert(r,a),r=n}),r.fix_list_elements&&t.addNodeFilter("ul,ol",t=>{let r,n,o=t.length;for(;o--;)if((n=(r=t[o]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let t=new md("li",1);t.attr("style","list-style-type: none"),r.wrap(t)}}});let l=a.getValidClasses();r.validate&&l&&t.addAttributeFilter("class",t=>{var r;let n=t.length;for(;n--;){let o=t[n],a=null!==(r=o.attr("class"))&&void 0!==r?r:"",i=tz.explode(a," "),s="";for(let t=0;t<i.length;t++){let r=i[t],n=!1,a=l["*"];a&&a[r]&&(n=!0),a=l[o.name],!n&&a&&a[r]&&(n=!0),n&&(s&&(s+=" "),s+=r)}s.length||(s=null),o.attr("class",s)}}),((t,r)=>{let{blob_cache:n}=r;if(n){let r=t=>{let r=t.attr("src");t.attr("src")===tM.transparentSrc||I(t.attr("data-mce-placeholder"))||I(t.attr("data-mce-bogus"))||F(r)||pP(n,r,!0).each(r=>{t.attr("src",r.blobUri())})};t.addAttributeFilter("src",t=>ed(t,r))}})(t,r);let i=null!==(n=r.sandbox_iframes)&&void 0!==n&&n,s=eT(null!==(o=r.sandbox_iframes_exclusions)&&void 0!==o?o:[]);r.convert_unsafe_embeds&&t.addNodeFilter("object,embed",t=>ed(t,t=>{t.replace((({type:t,src:r,width:n,height:o}={},a,l)=>{let i=M(t)?"iframe":pF(t,"image")?"img":pF(t,"video")?"video":pF(t,"audio")?"audio":"iframe",s=new md(i,1);return s.attr("audio"===i?{src:r}:{src:r,width:n,height:o}),"audio"!==i&&"video"!==i||s.attr("controls",""),"iframe"===i&&a&&pM(s,l),s})({type:t.attr("type"),src:"object"===t.name?t.attr("data"):t.attr("src"),width:t.attr("width"),height:t.attr("height")},i,s))})),i&&t.addNodeFilter("iframe",t=>ed(t,t=>pM(t,s)))})(p,a),a.inline_styles&&pS(p,a,r),p},h$=(t,r,n)=>{let o=fS(t)?mR({validate:!1}).serialize(t):t,a=r(o);if(a.isDefaultPrevented())return a;if(fS(t)){if(a.content!==o){let r=hH({validate:!1,forced_root_block:!1,...n}).parse(a.content,{context:t.name});return{...a,content:r}}return{...a,content:t}}return a},hV=t=>({sanitize:s$(t),sandbox_iframes:sG(t),sandbox_iframes_exclusions:sX(t)}),hq=(t,r)=>{if(r.no_events)return l9.value(r);{let n=t.dispatch("BeforeGetContent",r);return n.isDefaultPrevented()?l9.error(cK(t,{content:"",...n}).content):l9.value(n)}},hW=(t,r,n)=>n.no_events?r:h$(r,r=>cK(t,{...n,content:r}),hV(t)).content,hK=(t,r)=>{if(r.no_events)return l9.value(r);{let n=h$(r.content,n=>{let o;return o={...r,content:n},t.dispatch("BeforeSetContent",o)},hV(t));return n.isDefaultPrevented()?(cW(t,n),l9.error(void 0)):l9.value(n)}},hY=(t,r,n)=>{n.no_events||cW(t,{...n,content:r})},hG=(t,r,n)=>({element:t,width:r,rows:n}),hX=(t,r)=>({element:t,cells:r}),hZ=(t,r)=>({x:t,y:r}),hQ=(t,r)=>t9(t,r).bind(ta).getOr(1),hJ=(t,r,n)=>{let o=t.rows;return!!(o[n]?o[n].cells:[])[r]},h0=t=>ef(t,(t,r)=>r.cells.length>t?r.cells.length:t,0),h1=(t,r)=>{let n=t.rows;for(let t=0;t<n.length;t++){let o=n[t].cells;for(let n=0;n<o.length;n++)if(ry(o[n],r))return et.some(hZ(n,t))}return et.none()},h2=(t,r,n,o,a)=>{let l=[],i=t.rows;for(let t=n;t<=a;t++){let n=i[t].cells,a=r<o?n.slice(r,o+1):n.slice(o,r+1);l.push(hX(i[t].element,a))}return l},h3=t=>((t,r)=>{let n=aZ(t.element),o=rg("tbody");return no(o,r),nr(n,o),n})(t,es(t.rows,t=>{let r=es(t.cells,t=>{let r=aQ(t);return re(r,"colspan"),re(r,"rowspan"),r}),n=aZ(t.element);return no(n,r),n})),h8=(t,r,n)=>{let o=ru(r.commonAncestorContainer),a=mG(o,t),l=em(a,t=>n.isWrapper(tG(t))),i=eh(a,t=>"li"===tG(t)&&d4(t,r)).fold(q([]),t=>eh(a,t=>"ul"===tG(t)||"ol"===tG(t)).map(t=>{let r=rg(tG(t));return r3(r,eI(r4(t),(t,r)=>e4(r,"list-style"))),[rg("li"),r]}).getOr([]));return es(l.concat(i.length?i:a4(o)?r_(o).filter(a6).fold(q([]),t=>[o,t]):a6(o)?[o]:[]),aZ)},h5=()=>ua([]),h6=(t,r)=>rG(r[0],"table",Y(ry,t)).bind(t=>{let n;let o=r[0],a=r[r.length-1];return h1(n=(t=>{let r=hG(aZ(t),0,[]);return ed(nw(t,"tr"),(t,n)=>{ed(nw(t,"td,th"),(o,a)=>{((t,r,n,o,a)=>{let l=hQ(a,"rowspan"),i=hQ(a,"colspan"),s=t.rows;for(let t=n;t<n+l;t++){s[t]||(s[t]=hX(aQ(o),[]));for(let o=r;o<r+i;o++)s[t].cells[o]=t===n&&o===r?a:aZ(a)}})(r,((t,r,n)=>{for(;hJ(t,r,n);)r++;return r})(r,a,n),n,t,o)})}),hG(r.element,h0(r.rows),r.rows)})(t),o).bind(t=>h1(n,a).map(r=>((t,r,n)=>{let o=r.x,a=r.y,l=n.x,i=n.y,s=a<i?h2(t,o,a,l,i):h2(t,o,i,l,a);return hG(t.element,h0(s),s)})(n,t,r))).map(t=>ua([h3(t)]))}).getOrThunk(h5),h4=(t,r,n)=>{let o;let a=d2(r,t);return a.length>0?h6(t,a):r.length>0&&r[0].collapsed?h5():((t,r)=>{let n=ef(r,(t,r)=>(nr(r,t),r),t);return r.length>0?ua([n]):n})(ru((o=r[0]).cloneContents()),h8(t,o,n))},h9=(t,r)=>r>=0&&r<t.length&&dJ(t.charAt(r)),h7=t=>ln(t.innerText),be=t=>nD(t)?t.outerHTML:n$(t)?oq.encodeRaw(t.data,!1):nW(t)?"<!--"+t.data+"-->":"",bt=(t,r)=>{var n;let o;return n=((t,r)=>{let n=t.length+r.length+2,o=Array(n),a=Array(n),l=(n,o,a,i,d)=>{let c=s(n,o,a,i);if(null===c||c.start===o&&c.diag===o-i||c.end===n&&c.diag===n-a){let l=n,s=a;for(;l<o||s<i;)l<o&&s<i&&t[l]===r[s]?(d.push([0,t[l]]),++l,++s):o-n>i-a?(d.push([2,t[l]]),++l):(d.push([1,r[s]]),++s)}else{l(n,c.start,a,c.start-c.diag,d);for(let r=c.start;r<c.end;++r)d.push([0,t[r]]);l(c.end,o,c.end-c.diag,i,d)}},i=(n,o,a,l)=>{let i=n;for(;i-o<l&&i<a&&t[i]===r[i-o];)++i;return{start:n,end:i,diag:o}},s=(n,l,s,d)=>{let c,u,m,g,f;let p=l-n,h=d-s;if(0===p||0===h)return null;let b=p-h,v=h+p,y=(v%2==0?v:v+1)/2;for(o[1+y]=n,a[1+y]=l+1,c=0;c<=y;++c){for(u=-c;u<=c;u+=2){for(m=u+y,u===-c||u!==c&&o[m-1]<o[m+1]?o[m]=o[m+1]:o[m]=o[m-1]+1,f=(g=o[m])-n+s-u;g<l&&f<d&&t[g]===r[f];)o[m]=++g,++f;if(b%2!=0&&b-c<=u&&u<=b+c&&a[m-b]<=o[m])return i(a[m-b],u+n-s,l,d)}for(u=b-c;u<=b+c;u+=2){for(m=u+y-b,u===b-c||u!==b+c&&a[m+1]<=a[m-1]?a[m]=a[m+1]-1:a[m]=a[m-1],f=(g=a[m]-1)-n+s-u;g>=n&&f>=s&&t[g]===r[f];)a[m]=g--,f--;if(b%2==0&&-c<=u&&u<=c&&a[m]<=o[m+b])return i(a[m],u+n-s,l,d)}}return null},d=[];return l(0,t.length,0,r.length,d),d})(es(eR(r.childNodes),be),t),o=0,ed(n,t=>{0===t[0]?o++:1===t[0]?(((t,r,n)=>{let o=(t=>{let r;let n=document.createElement("div"),o=document.createDocumentFragment();for(t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o})(r);if(t.hasChildNodes()&&n<t.childNodes.length){let r=t.childNodes[n];t.insertBefore(o,r)}else t.appendChild(o)})(r,t[1],o),o++):2===t[0]&&((t,r)=>{if(t.hasChildNodes()&&r<t.childNodes.length){let n=t.childNodes[r];t.removeChild(n)}})(r,o)}),r},br=eJ(()=>document.implementation.createHTMLDocument("undo")),bn=t=>{let r=t.serializer.getTempAttrs(),n=mw(t.getBody(),r);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:em(es(eR(n.childNodes),$(ln,be)),t=>t.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:ln(n.innerHTML),bookmark:null,beforeBookmark:null}},bo=(t,r,n)=>{let o=n?r.beforeBookmark:r.bookmark;"fragmented"===r.type?bt(r.fragments,t.getBody()):t.setContent(r.content,{format:"raw",no_selection:!I(o)||!dj(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},ba=t=>"fragmented"===t.type?t.fragments.join(""):t.content,bl=t=>{let r=rg("body",br());return nc(r,ba(t)),ed(nw(r,"*[data-mce-bogus]"),ni),nd(r)},bi=(t,r)=>!(!t||!r)&&(ba(t)===ba(r)||bl(t)===bl(r)),bs=t=>0===t.get(),bd=(t,r,n)=>{bs(n)&&(t.typing=r)},bc=(t,r)=>{t.typing&&(bd(t,!1,r),t.add())},bu=t=>({init:{bindEvents:H},undoManager:{beforeChange:(r,n)=>{bs(r)&&n.set(l4(t.selection))},add:(r,n,o,a,l,i)=>((t,r,n,o,a,l,i)=>{let s=bn(t),d=tz.extend(l||{},s);if(!bs(o)||t.removed)return null;let c=r.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:d,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&bi(c,d))return null;r.data[n.get()]&&a.get().each(t=>{r.data[n.get()].beforeBookmark=t});let u=sl(t);if(u&&r.data.length>u){for(let t=0;t<r.data.length-1;t++)r.data[t]=r.data[t+1];r.data.length--,n.set(r.data.length)}d.bookmark=l4(t.selection),n.get()<r.data.length-1&&(r.data.length=n.get()+1),r.data.push(d),n.set(r.data.length-1);let m={level:d,lastLevel:c,originalEvent:i};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",m),t.dispatch("change",m)):t.dispatch("AddUndo",m),d})(t,r,n,o,a,l,i),undo:(r,n,o)=>{let a;return r.typing&&(r.add(),r.typing=!1,bd(r,!1,n)),o.get()>0&&(o.set(o.get()-1),bo(t,a=r.data[o.get()],!0),t.setDirty(!0),t.dispatch("Undo",{level:a})),a},redo:(r,n)=>{let o;return r.get()<n.length-1&&(r.set(r.get()+1),bo(t,o=n[r.get()],!1),t.setDirty(!0),t.dispatch("Redo",{level:o})),o},clear:(r,n)=>{r.data=[],n.set(0),r.typing=!1,t.dispatch("ClearUndos")},reset:t=>{t.clear(),t.add()},hasUndo:(r,n)=>n.get()>0||r.typing&&r.data[0]&&!bi(bn(t),r.data[0]),hasRedo:(t,r)=>r.get()<t.data.length-1&&!t.typing,transact:(t,r,n)=>(bc(t,r),t.beforeChange(),t.ignore(n),t.add()),ignore:(t,r)=>((t,r)=>{try{t.set(t.get()+1),r()}finally{t.set(t.get()-1)}})(t,r),extra:(r,n,o,a)=>((t,r,n,o,a)=>{if(r.transact(o)){let o=r.data[n.get()].bookmark;bo(t,r.data[n.get()-1],!0),r.transact(a)&&(r.data[n.get()-1].beforeBookmark=o)}})(t,r,n,o,a)},formatter:{match:(r,n,o,a)=>fL(t,r,n,o,a),matchAll:(r,n)=>((t,r,n)=>{let o=[],a={},l=t.selection.getStart();return t.dom.getParent(l,l=>{for(let i=0;i<r.length;i++){let s=r[i];!a[s]&&fD(t,l,s,n)&&(a[s]=!0,o.push(s))}},t.dom.getRoot()),o})(t,r,n),matchNode:(r,n,o,a)=>fD(t,r,n,o,a),canApply:r=>((t,r)=>{let n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){let r=ch(o,t.selection.getStart());for(let t=n.length-1;t>=0;t--){let a=n[t];if(!cy(a))return!0;for(let t=r.length-1;t>=0;t--)if(o.is(r[t],a.selector))return!0}}return!1})(t,r),closest:r=>((t,r)=>{let n=r=>ry(r,ru(t.getBody()));return et.from(t.selection.getStart(!0)).bind(o=>fA(ru(o),n=>eA(r,r=>fD(t,n.dom,r)?et.some(r):et.none()),n)).getOrNull()})(t,r),apply:(r,n,o)=>pv(t,r,n,o),remove:(r,n,o,a)=>pm(t,r,n,o,a),toggle:(r,n,o)=>((t,r,n,o)=>{let a=t.formatter.get(r);a&&(!fL(t,r,n,o)||"toggle"in a[0]&&!a[0].toggle?pv(t,r,n,o):pm(t,r,n,o))})(t,r,n,o),formatChanged:(r,n,o,a,l)=>(((t,r,n,o,a,l)=>{let i=r.get();ed(n.split(","),r=>{let n=ej(i,r).getOrThunk(()=>{let t={withSimilar:{state:or(!1),similar:!0,callbacks:[]},withoutSimilar:{state:or(!1),similar:!1,callbacks:[]},withVars:[]};return i[r]=t,t}),s=()=>{let n=pw(t);return pE(t,n,r,a,l).isSome()};if(M(l)){let t=a?n.withSimilar:n.withoutSimilar;t.callbacks.push(o),1===t.callbacks.length&&t.state.set(s())}else n.withVars.push({state:or(s()),similar:a,vars:l,callback:o})}),r.set(i)})(t,r,n,o,a,l),{unbind:()=>((t,r,n)=>{let o=t.get();ed(r.split(","),t=>ej(o,t).each(r=>{o[t]={withSimilar:{...r.withSimilar,callbacks:em(r.withSimilar.callbacks,t=>t!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:em(r.withoutSimilar.callbacks,t=>t!==n)},withVars:em(r.withVars,t=>t.callback!==n)}})),t.set(o)})(r,n,o)})},editor:{getContent:r=>et.from(t.getBody()).fold(q("tree"===r.format?new md("body",11):""),n=>mk(t,r,n)),setContent:(r,n)=>et.from(t.getBody()).map(o=>fS(r)?((t,r,n,o)=>{fc(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);let a=mR({validate:!1},t.schema).serialize(n),l=ln(le(ru(r))?a:tz.trim(a));return fN(t,l,o.no_selection),{content:n,html:l}})(t,o,r,n):((t,r,n,o)=>{if(0===(n=ln(n)).length||/^\s+$/.test(n)){let a='<br data-mce-bogus="1">';"TABLE"===r.nodeName?n="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(n="<li>"+a+"</li>");let l=ix(t);return t.schema.isValidChild(r.nodeName.toLowerCase(),l.toLowerCase())?(n=a,n=t.dom.createHTML(l,i_(t),n)):n||(n=a),fN(t,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=mR({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));let a=le(ru(r))?n:tz.trim(n);return fN(t,a,o.no_selection),{content:a,html:a}}})(t,o,r,n)).getOr({content:r,html:fS(n.content)?"":n.content}),insertContent:(r,n)=>fk(t,r,n),addVisual:r=>((t,r)=>{let n=t.dom,o=I(r)?r:t.getBody();ed(n.select("table,a",o),r=>{switch(r.nodeName){case"TABLE":let o=sp(t),a=n.getAttrib(r,"border");a&&"0"!==a||!t.hasVisual?n.removeClass(r,o):n.addClass(r,o);break;case"A":if(!n.getAttrib(r,"href")){let o=n.getAttrib(r,"name")||r.id,a=sh(t);o&&t.hasVisual?n.addClass(r,a):n.removeClass(r,a)}}}),t.dispatch("VisualAid",{element:r,hasVisual:t.hasVisual})})(t,r)},selection:{getContent:(r,n)=>((t,r,n={})=>hq(t,{...n,format:r,get:!0,selection:!0,getInner:!0}).fold(W,r=>{let n=((t,r)=>{if("text"===r.format)return et.from(t.selection.getRng()).map(r=>{var n;let o=et.from(t.dom.getParent(r.commonAncestorContainer,t.dom.isBlock)),a=t.getBody(),l=o.map(t=>t.nodeName).getOr("div").toLowerCase(),i=ru(r.cloneContents());mx(i),m_(i);let s=t.dom.add(a,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),d=h7(s),c=ln(null!==(n=s.textContent)&&void 0!==n?n:"");if(t.dom.remove(s),h9(c,0)||h9(c,c.length-1)){let t=h7(o.getOr(a)),r=t.indexOf(d);return -1===r?d:(h9(t,r-1)?" ":"")+d+(h9(t,r+d.length)?" ":"")}return d}).getOr("");{let n=((t,r)=>{let n=t.selection.getRng(),o=t.dom.create("body"),a=t.selection.getSel(),l=mo(t,d1(a)),i=r.contextual?h4(ru(t.getBody()),l,t.schema).dom:n.cloneContents();return i&&o.appendChild(i),t.selection.serializer.serialize(o,r)})(t,r);return"tree"===r.format?n:t.selection.isCollapsed()?"":n}})(t,r);return hW(t,n,r)}))(t,r,n)},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:()=>et.none()}}),bm=t=>eH(t.plugins,"rtc"),bg=t=>t.rtcInstance?t.rtcInstance:bu(t),bf=t=>{let r=t.rtcInstance;if(r)return r;throw Error("Failed to get RTC instance not yet initialized.")},bp=t=>bf(t).init.bindEvents(),bh=t=>0===t.dom.length?(nl(t),et.none()):et.some(t),bb=(t,r,n,o,a)=>{t.bind(t=>((o?gb:gh)(t.dom,o?t.dom.length:0,a),r.filter(t0).map(r=>((t,r,n,o,a)=>{let l=t.dom,i=r.dom,s=o?l.length:i.length;o?(gv(l,i,a,!1,!o),n.setStart(i,s)):(gv(i,l,a,!1,!o),n.setEnd(i,s))})(t,r,n,o,a)))).orThunk(()=>r.filter(t=>cj.isBookmarkNode(t.dom)).bind(o?rR:rN).or(r).filter(t0).map(t=>((t,r,n)=>{r_(t).each(o=>{let a=t.dom;r&&gi(o,l$(a,0),n)?gh(a,0,n):!r&&gs(o,l$(a,a.length),n)&&gb(a,a.length,n)})})(t,o,a)))},bv=(t,r,n)=>{if(eH(t,r)){let o=em(t[r],t=>t!==n);0===o.length?delete t[r]:t[r]=o}},by=t=>!(!t||!t.ownerDocument)&&rC(ru(t.ownerDocument),ru(t)),bC=(t,r,n,o)=>{let a,l;let{selectorChangedWithUnbind:i}=((t,r)=>{let n,o;let a=(r,n)=>eh(n,n=>t.is(n,r)),l=r=>t.getParents(r,void 0,t.getRoot());return{selectorChangedWithUnbind:(t,i)=>(n||(n={},o={},r.on("NodeChange",t=>{let r=t.element,i=l(r),s={};eP(n,(t,r)=>{a(r,i).each(n=>{o[r]||(ed(t,t=>{t(!0,{node:n,selector:r,parents:i})}),o[r]=t),s[r]=t})}),eP(o,(t,n)=>{s[n]||(delete o[n],ed(t,t=>{t(!1,{node:r,selector:n,parents:i})}))})})),n[t]||(n[t]=[]),n[t].push(i),a(t,l(r.selection.getStart())).each(()=>{o[t]=n[t]}),{unbind:()=>{bv(n,t,i),bv(o,t,i)}})}})(t,o),s=(t,r)=>((t,r,n={})=>{hK(t,{format:"html",...n,set:!0,selection:!0,content:r}).each(r=>{let n=((t,r)=>{if("raw"!==r.format){let n=t.selection.getRng(),o=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),a=o?{context:o.nodeName.toLowerCase()}:{},l=t.parser.parse(r.content,{forced_root_block:!1,...a,...r});return mR({validate:!1},t.schema).serialize(l)}return r.content})(t,r),o=t.selection.getRng();((t,r,n)=>{let o=et.from(r.firstChild).map(ru),a=et.from(r.lastChild).map(ru);t.deleteContents(),t.insertNode(r);let l=o.bind(rN).filter(t0).bind(bh),i=a.bind(rR).filter(t0).bind(bh);bb(l,o,t,!0,n),bb(i,a,t,!1,n),t.collapse(!1)})(o,o.createContextualFragment(n),t.schema),t.selection.setRng(o),uI(t,o),hY(t,n,r)})})(o,t,r),d=t=>{let r=u();r.collapse(!!t),m(r)},c=()=>r.getSelection?r.getSelection():r.document.selection,u=()=>{let n;let i=(t,r,n)=>{try{return r.compareBoundaryPoints(t,n)}catch(t){return -1}},s=r.document;if(I(o.bookmark)&&!u6(o)){let t=uG(o);if(t.isSome())return t.map(t=>mo(o,[t])[0]).getOr(s.createRange())}try{let t=c();t&&!nP(t.anchorNode)&&(n=t.rangeCount>0?t.getRangeAt(0):s.createRange(),n=mo(o,[n])[0])}catch(t){}if(n||(n=s.createRange()),nK(n.startContainer)&&n.collapsed){let r=t.getRoot();n.setStart(r,0),n.setEnd(r,0)}return a&&l&&(0===i(n.START_TO_START,n,a)&&0===i(n.END_TO_END,n,a)?n=l:(a=null,l=null)),n},m=(t,r)=>{let n;if(!((n=t)&&by(n.startContainer)&&by(n.endContainer)))return;let i=c();if(t=o.dispatch("SetSelectionRange",{range:t,forward:r}).range,i){l=t;try{i.removeAllRanges(),i.addRange(t)}catch(t){}!1===r&&i.extend&&(i.collapse(t.endContainer,t.endOffset),i.extend(t.startContainer,t.startOffset)),a=i.rangeCount>0?i.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&(null==i?void 0:i.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){let r=t.startContainer.childNodes[t.startOffset];r&&"IMG"===r.nodeName&&(i.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),i.anchorNode===t.startContainer&&i.focusNode===t.endContainer||i.setBaseAndExtent(r,0,r,1))}o.dispatch("AfterSetSelectionRange",{range:t,forward:r})},g=()=>{let r=c(),n=null==r?void 0:r.anchorNode,o=null==r?void 0:r.focusNode;if(!r||!n||!o||nP(n)||nP(o))return!0;let a=t.createRng(),l=t.createRng();try{a.setStart(n,r.anchorOffset),a.collapse(!0),l.setStart(o,r.focusOffset),l.collapse(!0)}catch(t){return!0}return 0>=a.compareBoundaryPoints(a.START_TO_START,l)},f={dom:t,win:r,serializer:n,editor:o,expand:(r={type:"word"})=>m(uv(t).expand(u(),r)),collapse:d,setCursorLocation:(r,n)=>{let a=t.createRng();I(r)&&I(n)?(a.setStart(r,n),a.setEnd(r,n),m(a),d(!1)):(d9(t,a,o.getBody(),!0),m(a))},getContent:t=>((t,r={})=>{let n;return n=r.format?r.format:"html",bf(t).selection.getContent(n,r)})(o,t),setContent:s,getBookmark:(t,r)=>p.getBookmark(t,r),moveToBookmark:t=>p.moveToBookmark(t),select:(r,n)=>(et.from(r).bind(r=>et.from(r.parentNode).map(o=>{let a=t.nodeIndex(r),l=t.createRng();return l.setStart(o,a),l.setEnd(o,a+1),n&&(d9(t,l,r,!0),d9(t,l,r,!1)),l})).each(m),r),isCollapsed:()=>{let t=u(),r=c();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!r||t.collapsed)},isEditable:()=>{let r=u(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?eC(n,r=>t.isEditable(r.parentElement)):u7(t,r)},isForward:g,setNode:r=>(s(t.getOuterHTML(r)),r),getNode:()=>((t,r)=>{if(!r)return t;let n=r.startContainer,o=r.endContainer,a=r.startOffset,l=r.endOffset,i=r.commonAncestorContainer;r.collapsed||(n===o&&l-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),n$(n)&&n$(o)&&(n=n.length===a?mn(n.nextSibling,!0):n.parentNode,o=0===l?mn(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));let s=n$(i)?i.parentNode:i;return nL(s)?s:t})(o.getBody(),u()),getSel:c,setRng:m,getRng:u,getStart:t=>mt(o.getBody(),u(),t),getEnd:t=>mr(o.getBody(),u(),t),getSelectedBlocks:(r,n)=>((t,r,n,o)=>{let a=[],l=t.getRoot(),i=t.getParent(n||mt(l,r,r.collapsed),t.isBlock),s=t.getParent(o||mr(l,r,r.collapsed),t.isBlock);if(i&&i!==l&&a.push(i),i&&s&&i!==s){let r;let n=new nS(i,l);for(;(r=n.next())&&r!==s;)t.isBlock(r)&&a.push(r)}return s&&i!==s&&s!==l&&a.push(s),a})(t,u(),r,n),normalize:()=>{let r=u();if(!(d1(c()).length>1)&&d7(o)){let n=up(t,r);return n.each(t=>{m(t,g())}),n.getOr(r)}return r},selectorChanged:(t,r)=>(i(t,r),f),selectorChangedWithUnbind:i,getScrollContainer:()=>{let r,n=t.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){r=n;break}n=n.parentNode}return r},scrollIntoView:(t,r)=>{I(t)?((t,r,n)=>{(t.inline?uL:uF)(t,r,n)})(o,t,r):uI(o,u(),r)},placeCaretAt:(t,r)=>m(ui(t,r,o.getDoc())),getBoundingClientRect:()=>{let t=u();return t.collapsed?l$.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:()=>{r=a=l=null,h.destroy()}},p=cj(f),h=c1(f,o);return f.bookmarkManager=p,f.controlSelection=h,f},bE=(t,r,n)=>{-1===tz.inArray(r,n)&&(t.addAttributeFilter(n,(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),r.push(n))},bw=(t,r)=>{let n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},a=r&&r.dom?r.dom:aN.DOM,l=r&&r.schema?r.schema:o9(o),i=hH(o,l);return i.addAttributeFilter("data-mce-tabindex",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(r,null)}}),i.addAttributeFilter("src,href,style",(t,r)=>{let n="data-mce-"+r,l=o.url_converter,i=o.url_converter_scope,s=t.length;for(;s--;){let o=t[s],d=o.attr(n);void 0!==d?(o.attr(r,d.length>0?d:null),o.attr(n,null)):(d=o.attr(r),"style"===r?d=a.serializeStyle(a.parseStyle(d),o.name):l&&(d=l.call(i,d,r,o.name)),o.attr(r,d.length>0?d:null))}}),i.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}}),i.addAttributeFilter("data-mce-type",(t,r,n)=>{let o=t.length;for(;o--;){let r=t[o];"bookmark"!==r.attr("data-mce-type")||n.cleanup||(et.from(r.firstChild).exists(t=>{var r;return!nN(null!==(r=t.value)&&void 0!==r?r:"")})?r.unwrap():r.remove())}}),i.addNodeFilter("noscript",t=>{var r;let n=t.length;for(;n--;){let o=t[n].firstChild;o&&(o.value=oq.decode(null!==(r=o.value)&&void 0!==r?r:""))}}),i.addNodeFilter("script,style",(t,r)=>{var n;let a=t=>t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=t.length;for(;l--;){let i=t[l],s=i.firstChild,d=null!==(n=null==s?void 0:s.value)&&void 0!==n?n:"";if("script"===r){let t=i.attr("type");t&&i.attr("type","mce-no/type"===t?null:t.replace(/^mce\-/,"")),"xhtml"===o.element_format&&s&&d.length>0&&(s.value="// <![CDATA[\n"+a(d)+"\n// ]]>")}else"xhtml"===o.element_format&&s&&d.length>0&&(s.value="<!--\n"+a(d)+"\n-->")}}),i.addNodeFilter("#comment",t=>{let r=t.length;for(;r--;){let n=t[r],l=n.value;o.preserve_cdata&&0===(null==l?void 0:l.indexOf("[CDATA["))?(n.name="#cdata",n.type=4,n.value=a.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==l?void 0:l.indexOf("mce:protected "))&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(l).substr(14))}}),i.addNodeFilter("xml:namespace,input",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];7===o.type?o.remove():1===o.type&&("input"!==r||o.attr("type")||o.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",t=>{ed(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(i.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),o.remove_trailing_brs&&((t,r,n)=>{r.addNodeFilter("br",(r,o,a)=>{let l=tz.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),s=n.getWhitespaceElements();l.body=1;let d=t=>t.name in l||ox(n,t);for(let o=0,c=r.length;o<c;o++){let c=r[o],u=c.parent;if(u&&d(u)&&c===u.lastChild){let r=c.prev;for(;r;){let t=r.name;if("span"!==t||"bookmark"!==r.attr("data-mce-type")){"br"===t&&(c=null);break}r=r.prev}if(c&&(c.remove(),fg(n,i,s,u))){let r=n.getElementRule(u.name);r&&(r.removeEmpty?u.remove():r.paddEmpty&&fu(t,a,d,u))}}else{let t=c;for(;u&&u.firstChild===t&&u.lastChild===t&&(t=u,!l[u.name]);)u=u.parent;if(t===u){let t=new md("#text",3);t.value="\xa0",c.replace(t)}}}})})(o,i,i.schema),{schema:l,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(t,n={})=>{let s={format:"html",...n},d=((t,r,n)=>{let o=n.selection?{forced_root_block:!1,...n}:n,a=t.parse(r,o);return(t=>{let r=t=>"br"===(null==t?void 0:t.name),n=t.lastChild;if(r(n)){let t=n.prev;r(t)&&(n.remove(),t.remove())}})(a),a})(i,((t,r,n)=>{let o=ln(n.getInner?r.innerHTML:t.getOuterHTML(r));return n.selection||le(ru(r))?o:tz.trim(o)})(a,I(r)&&r.hasEventListeners("PreProcess")&&!s.no_events?((t,r,n)=>{let o;let a=t.dom,l=r.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){let t=i.createHTMLDocument("");tz.each("BODY"===l.nodeName?l.childNodes:[l],r=>{t.body.appendChild(t.importNode(r,!0))}),l="BODY"!==l.nodeName?t.body.firstChild:t.body,o=a.doc,a.doc=t}return((t,r)=>{t.dispatch("PreProcess",r)})(t,{...n,node:l}),o&&(a.doc=o),l})(r,t,s):t,s),s);return"tree"===s.format?d:((t,r,n)=>{if(!r.no_events&&t){let o;return(o={...r,content:n},t.dispatch("PostProcess",o)).content}return n})(r,s,mR(o,l).serialize(d))},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Y(bE,i,n),getTempAttrs:q(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},bx=(t,r)=>{let n=bw(t,r);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},b_=(t,r,n={})=>hK(t,{format:"html",...n,set:!0,content:r}).map(r=>{let n;let o=(n=r.content,bg(t).editor.setContent(n,r));return hY(t,o.html,r),o.content}).getOr(r),bk="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bS=[],bN="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),bR=[],bA=(t,r)=>e_(em(r,r=>eH(t,r))),bT=t=>{let r=bA(t,bk),n=t.forced_root_block;return!1!==n&&""!==n||r.push("forced_root_block (false only)"),e_(r)},bO=t=>bA(t,bS),bB=(t,r)=>{let n=tz.makeMap(t.plugins," ");return e_(em(r,t=>eH(n,t)))},bP=t=>bB(t,bN),bD=t=>bB(t,bR.map(t=>t.name)),bL=t=>eh(bR,r=>r.name===t).fold(()=>t,r=>r.replacedWith?`${t}, replaced by ${r.replacedWith}`:t),bM=aN.DOM,bF=t=>et.from(t).each(t=>t.destroy()),bI=(()=>{let t={};return{add:(r,n)=>{t[r]=n},get:r=>t[r]?t[r]:{icons:{}},has:r=>eH(t,r)}})(),bU=aD.ModelManager,bz=(t,r)=>r.dom[t],bj=(t,r)=>parseInt(r8(r,t),10),bH=Y(bz,"clientWidth"),b$=Y(bz,"clientHeight"),bV=Y(bj,"margin-top"),bq=Y(bj,"margin-left"),bW=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},o=()=>et.from(r[0]),a=()=>{o().each(t=>{t.reposition()})},l=t=>{eb(r,r=>r===t).each(t=>{r.splice(t,1)})},i=(o,i=!0)=>{var s;return t.removed||!(s=t.inline?t.getBody():t.getContentAreaContainer(),et.from(s).map(ru)).map(rV).getOr(!1)?{}:(i&&t.dispatch("BeforeOpenNotification",{notification:o}),eh(r,t=>{var r;return!((r=n().getArgs(t)).type!==o.type||r.text!==o.text||r.progressBar||r.timeout||o.progressBar||o.timeout)}).getOrThunk(()=>{t.editorManager.setActive(t);let i=n().open(o,()=>{l(i)},()=>u4(t));return r.push(i),a(),t.dispatch("OpenNotification",{notification:{...i}}),i}))},s=q(r);return t.on("SkinLoaded",()=>{let r=i0(t);r&&i({text:r,type:"warning",timeout:0},!1),a()}),t.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(a)}),t.on("remove",()=>{ed(r.slice(),t=>{n().close(t)})}),t.addShortcut("alt+F12","Focus to notification",()=>o().map(t=>ru(t.getEl())).each(t=>uU(t))),{open:i,close:()=>{o().each(t=>{n().close(t),l(t),a()})},getNotifications:s}},bK=aD.PluginManager,bY=aD.ThemeManager,bG=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}})()},o=(t,r)=>(...n)=>r?r.apply(t,n):void 0,a=n=>{t.dispatch("CloseWindow",{dialog:n}),0===(r=em(r,t=>t!==n)).length&&t.focus()},l=n=>{t.editorManager.setActive(t),uY(t),t.ui.show();let o=n();return r.push(o),t.dispatch("OpenWindow",{dialog:o}),o};return t.on("remove",()=>{ed(r,t=>{n().close(t)})}),{open:(t,r)=>l(()=>n().open(t,r,a)),openUrl:t=>l(()=>n().openUrl(t,a)),alert:(t,r,a)=>{let l=n();l.alert(t,o(a||l,r))},confirm:(t,r,a)=>{let l=n();l.confirm(t,o(a||l,r))},close:()=>{et.from(r[r.length-1]).each(t=>{n().close(t),a(t)})}}},bX=(t,r)=>{t.notificationManager.open({type:"error",text:r})},bZ=(t,r)=>{t._skinLoaded?bX(t,r):t.on("SkinLoaded",()=>{bX(t,r)})},bQ=(t,r,n)=>{c$(t,r,{message:n}),console.error(n)},bJ=(t,r,n)=>n?`Failed to load ${t}: ${n} from url ${r}`:`Failed to load ${t} url: ${r}`,b0=(t,...r)=>{let n=window.console;n&&(n.error?n.error(t,...r):n.log(t,...r))},b1=t=>"content/"+t+"/content.css",b2=(t,r)=>{let n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return es(r,r=>tinymce.Resource.has(b1(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},b3=(t,r)=>{let n={};return{findAll:(o,a=ee)=>Promise.all(es(em(o?eR(o.getElementsByTagName("img")):[],r=>{let n=r.src;return!r.hasAttribute("data-mce-bogus")&&!r.hasAttribute("data-mce-placeholder")&&!(!n||n===tM.transparentSrc)&&(e4(n,"blob:")?!t.isUploaded(n)&&a(r):!!e4(n,"data:")&&a(r))}),t=>{let o=t.src;if(eH(n,o))return n[o].then(r=>T(r)?r:{image:t,blobInfo:r.blobInfo});{let a=((t,r)=>{let n=()=>Promise.reject("Invalid data URI");if(e4(r,"blob:")){let o=t.getByUri(r);return I(o)?Promise.resolve(o):(e4(r,"blob:")?fetch(r).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${r} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):e4(r,"data:")?new Promise((t,n)=>{pN(r).bind(({type:t,data:r,base64Encoded:n})=>pR(t,r,n)).fold(()=>n("Invalid data URI"),t)}):Promise.reject("Unknown URI format")).then(r=>pA(r).then(o=>pO(o,!1,n=>et.some(pB(t,r,n))).getOrThunk(n)))}return e4(r,"data:")?pP(t,r).fold(n,t=>Promise.resolve(t)):Promise.reject("Unknown image data format")})(r,o).then(r=>(delete n[o],{image:t,blobInfo:r})).catch(t=>(delete n[o],t));return n[o]=a,a}}))}},b8=()=>{let t={},r=(t,r)=>({status:t,resultUri:r}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{let n=t[r];return n?n.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:n=>{t[n]=r(1,null)},markUploaded:(n,o)=>{t[n]=r(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}},b5=0,b6=(t,r)=>{let n={},o=(t,n)=>new Promise((o,a)=>{let l=new XMLHttpRequest;l.open("POST",r.url),l.withCredentials=r.credentials,l.upload.onprogress=t=>{n(t.loaded/t.total*100)},l.onerror=()=>{a("Image upload failed due to a XHR Transport error. Code: "+l.status)},l.onload=()=>{var t,n;if(l.status<200||l.status>=300)return void a("HTTP Error: "+l.status);let i=JSON.parse(l.responseText);i&&T(i.location)?o((t=r.basePath,n=i.location,t?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):a("Invalid JSON: "+l.responseText)};let i=new FormData;i.append("file",t.blob(),t.filename()),l.send(i)}),a=U(r.handler)?r.handler:o,l=(t,r)=>({url:r,blobInfo:t,status:!0}),i=(t,r)=>({url:"",blobInfo:t,status:!1,error:r}),s=(t,r)=>{tz.each(n[t],t=>{t(r)}),delete n[t]};return{upload:(d,c)=>{let u;return r.url||a!==o?(u=d,u=tz.grep(u,r=>!t.isUploaded(r.blobUri())),Promise.all(tz.map(u,r=>t.isPending(r.blobUri())?(t=>{let r=t.blobUri();return new Promise(t=>{n[r]=n[r]||[],n[r].push(t)})})(r):(t.markPending(r.blobUri()),new Promise(n=>{let o,d;try{let u=()=>{o&&(o.close(),d=H)},m=o=>{u(),t.removeFailed(r.blobUri()),s(r.blobUri(),i(r,o)),n(i(r,o))};d=t=>{t<0||t>100||et.from(o).orThunk(()=>et.from(c).map(Z)).each(r=>{o=r,r.progressBar.value(t)})},a(r,d).then(o=>{u(),t.markUploaded(r.blobUri(),o),s(r.blobUri(),l(r,o)),n(l(r,o))},t=>{m(T(t)?{message:t}:t)})}catch(t){n(i(r,t))}}))))):new Promise(t=>{t([])})}}},b4=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),b9=(t,r)=>b6(r,{url:iL(t),basePath:iM(t),credentials:iF(t),handler:iI(t)}),b7=t=>{let r,n;let o=(()=>{let t=[],r=t=>{if(!t.blob||!t.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let r=t.id||"blobid"+b5+++(()=>{let t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})(),n=t.name||r,o=t.blob;return{id:q(r),name:q(n),filename:q(t.filename||n+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[o.type.toLowerCase()]||"dat")),blob:q(o),base64:q(t.base64),blobUri:q(t.blobUri||URL.createObjectURL(o)),uri:q(t.uri)}},n=r=>eh(t,r).getOrUndefined(),o=t=>n(r=>r.id()===t);return{create:(t,n,o,a,l)=>{if(T(t))return r({id:t,name:a,filename:l,blob:n,base64:o});if(O(t))return r(t);throw Error("Unknown input type")},add:r=>{o(r.id())||t.push(r)},get:o,getByUri:t=>n(r=>r.blobUri()===t),getByData:(t,r)=>n(n=>n.base64()===t&&n.blob().type===r),findFirst:n,removeByUri:r=>{t=em(t,t=>t.blobUri()!==r||(URL.revokeObjectURL(t.blobUri()),!1))},destroy:()=>{ed(t,t=>{URL.revokeObjectURL(t.blobUri())}),t=[]}}})(),a=b8(),l=[],i=r=>n=>t.selection?r(n):[],s=(t,r,n)=>{let o=0;do -1!==(o=t.indexOf(r,o))&&(t=t.substring(0,o)+n+t.substr(o+r.length),o+=n.length-r.length+1);while(-1!==o);return t},d=(t,r,n)=>(t=s(t,`src="${r}"`,`src="${n}"${n===tM.transparentSrc?' data-mce-placeholder="1"':""}`),s(t,'data-mce-src="'+r+'"','data-mce-src="'+n+'"')),c=(r,n)=>{ed(t.undoManager.data,t=>{"fragmented"===t.type?t.fragments=es(t.fragments,t=>d(t,r,n)):t.content=d(t.content,r,n)})},u=()=>(r||(r=b9(t,a)),f().then(i(n=>{let a=es(n,t=>t.blobInfo);return r.upload(a,b4(t)).then(i(r=>{let a=[],l=!1,i=es(r,(r,i)=>{var s;let{blobInfo:d,image:u}=n[i],m=!1;return r.status&&iB(t)?(r.url&&!e6(u.src,r.url)&&(l=!0),o.removeByUri(u.src),bm(t)||((r,n)=>{let o=t.convertURL(n,"src");c(r.src,n),t6(ru(r),{src:iO(t)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":o})})(u,r.url)):r.error&&(r.error.remove&&(c(u.src,tM.transparentSrc),a.push(u),m=!0),s=r.error.message,bZ(t,aP.translate(["Failed to upload image: {0}",s]))),{element:u,status:r.status,uploadUri:r.url,blobInfo:d,removed:m}});return a.length>0&&!bm(t)?t.undoManager.transact(()=>{ed(ns(a),r=>{let n=r_(r);nl(r),n.each(r=>{t.dom.isEmpty(r.dom)&&I(t.schema.getTextBlockElements()[tG(r)])&&nr(r,rm('<br data-mce-bogus="1" />'))}),o.removeByUri(r.dom.src)})}):l&&t.undoManager.dispatchChange(),i}))}))),m=()=>iT(t)?u():Promise.resolve([]),g=t=>eC(l,r=>r(t)),f=()=>(n||(n=b3(a,o)),n.findAll(t.getBody(),g).then(i(r=>{let n=em(r,r=>T(r)?(bZ(t,r),!1):"blob"!==r.uriType);return bm(t)||ed(n,t=>{c(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),n}))),p=r=>r.replace(/src="(blob:[^"]+)"/g,(r,n)=>{let l=a.getResultUri(n);if(l)return'src="'+l+'"';let i=o.getByUri(n);return i||(i=ef(t.editorManager.get(),(t,r)=>t||r.editorUpload&&r.editorUpload.blobCache.getByUri(n),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':r});return t.on("SetContent",()=>{iT(t)?m():f()}),t.on("RawSaveContent",t=>{t.content=p(t.content)}),t.on("GetContent",t=>{t.source_view||"raw"===t.format||"tree"===t.format||(t.content=p(t.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",t=>{ed(t,t=>{let r=t.attr("src");if(!r||o.getByUri(r))return;let n=a.getResultUri(r);n&&t.attr("src",n)})})}),{blobCache:o,addFilter:t=>{l.push(t)},uploadImages:u,uploadImagesAuto:m,scanForImages:f,destroy:()=>{o.destroy(),a.destroy(),n=r=null}}},ve={remove_similar:!0,inherit:!1},vt={selector:"td,th",...ve},vr=q({tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vt},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vt},tablecellbordercolor:{styles:{borderColor:"%value"},...vt},tablecellclass:{classes:["%value"],...vt},tableclass:{selector:"table",classes:["%value"],...ve},tablecellborderstyle:{styles:{borderStyle:"%value"},...vt},tablecellborderwidth:{styles:{borderWidth:"%value"},...vt}}),vn=tz.each,vo=aN.DOM,va=t=>I(t)&&O(t),vl=(t,r)=>{let n=r&&r.schema||o9({}),o=t=>{let r=T(t)?{name:t,classes:[],attrs:{}}:t,n=vo.create(r.name);return r.classes.length>0&&vo.addClass(n,r.classes.join(" ")),vo.setAttribs(n,r.attrs),n},a=(t,r,l)=>{let i;let s=r[0],d=va(s)?s.name:void 0,c=((t,r)=>{let o=n.getElementRule(t.nodeName.toLowerCase()),a=null==o?void 0:o.parentsRequired;return!(!a||!a.length)&&(r&&el(a,r)?r:a[0])})(t,d);if(c)d===c?(i=s,r=r.slice(1)):i=c;else if(s)i=s,r=r.slice(1);else if(!l)return t;let u=i?o(i):vo.create("div");return u.appendChild(t),l&&tz.each(l,r=>{let n=o(r);u.insertBefore(n,t)}),a(u,r,va(i)?i.siblings:void 0)},l=vo.create("div");if(t.length>0){let r=t[0],n=o(r),i=va(r)?r.siblings:void 0;l.appendChild(a(n,t.slice(1),i))}return l},vi=t=>{let r="div",n={name:r,classes:[],attrs:{},selector:t=tz.trim(t)};return"*"!==t&&(r=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(t,r,o,a,l)=>{switch(r){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==tz.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===a){let t=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);t&&(n.attrs[t[1]]=t[2])}return""})),n.name=r||"div",n},vs=(t,r)=>{var n;let o="",a=i4(t);if(""===a)return"";let l=t=>T(t)?t.replace(/%(\w+)/g,""):"",i=(r,n)=>vo.getStyle(null!=n?n:t.getBody(),r,!0);if(T(r)){let n=t.formatter.get(r);if(!n)return"";r=n[0]}if("preview"in r){let t=r.preview;if(!1===t)return"";a=t||a}let s,d=r.block||r.inline||"span",c=T(n=r.selector)?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tz.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{let r=tz.map(t.split(/(?:~\+|~|\+)/),vi),n=r.pop();return r.length&&(n.siblings=r),n}).reverse()):[];c.length>0?(c[0].name||(c[0].name=d),d=r.selector,s=vl(c,t)):s=vl([d],t);let u=vo.select(d,s)[0]||s.firstChild;vn(r.styles,(t,r)=>{let n=l(t);n&&vo.setStyle(u,r,n)}),vn(r.attributes,(t,r)=>{let n=l(t);n&&vo.setAttrib(u,r,n)}),vn(r.classes,t=>{let r=l(t);vo.hasClass(u,r)||vo.addClass(u,r)}),t.dispatch("PreviewFormats"),vo.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);let m=i("fontSize"),g=/px$/.test(m)?parseInt(m,10):0;return vn(a.split(" "),t=>{let r=i(t,u);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)&&"#ffffff"===ai(r=i(t)).toLowerCase()||"color"===t&&"#000000"===ai(r).toLowerCase())){if("font-size"===t&&/em|%$/.test(r)){if(0===g)return;r=parseFloat(r)/(/%$/.test(r)?100:1)*g+"px"}"border"===t&&r&&(o+="padding:0 2px;"),o+=t+":"+r+";"}}),t.dispatch("AfterPreviewFormats"),vo.remove(s),o},vd=t=>{let r=(t=>{let r={},n=(t,o)=>{t&&(T(t)?(P(o)||(o=[o]),ed(o,t=>{M(t.deep)&&(t.deep=!cy(t)),M(t.split)&&(t.split=!cy(t)||cC(t)),M(t.remove)&&cy(t)&&!cC(t)&&(t.remove="none"),cy(t)&&cC(t)&&(t.mixed=!0,t.block_expand=!0),T(t.classes)&&(t.classes=t.classes.split(/\s+/))}),r[t]=o):eP(t,(t,r)=>{n(r,t)}))};return n((t=>{let r=t.dom,n=t.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,t,r]:[t,o,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(t,r,n)=>nD(t)&&t.hasAttribute("href"),onformat:(t,n,o)=>{tz.each(o,(n,o)=>{r.setAttrib(t,o,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":t=>{var r;return null!==(r=null==t?void 0:t.customValue)&&void 0!==r?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tz.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),t=>{o[t]={block:t,remove:"all"}}),o})(t)),n(vr()),n(i6(t)),{get:t=>I(t)?r[t]:r,has:t=>eH(r,t),register:n,unregister:t=>(t&&r[t]&&delete r[t],r)}})(t),n=or({});return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)t.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",r=>{var n;((t,r,n)=>{let o=t.selection,a=t.getBody();fU(t,null,n),(8===r||46===r)&&o.isCollapsed()&&"\uFEFF"===o.getStart().innerHTML&&fU(t,dU(a,o.getStart()),!0),37!==r&&39!==r||fU(t,dU(a,o.getStart()),!0)})(t,r.keyCode,n$(n=t.selection.getRng().endContainer)&&e9(n.data,"\xa0"))})})(t),bm(t)||(n.set({}),t.on("NodeChange",r=>{px(t,r.element,n.get())}),t.on("FormatApply FormatRemove",r=>{let o=et.from(r.node).map(t=>cr(t)?t:t.startContainer).bind(t=>nD(t)?et.some(t):et.from(t.parentElement)).getOrThunk(()=>pC(t));px(t,o,n.get())})),{get:r.get,has:r.has,register:r.register,unregister:r.unregister,apply:(r,n,o)=>{((t,r,n,o)=>{bf(t).formatter.apply(r,n,o)})(t,r,n,o)},remove:(r,n,o,a)=>{((t,r,n,o,a)=>{bf(t).formatter.remove(r,n,o,a)})(t,r,n,o,a)},toggle:(r,n,o)=>{((t,r,n,o)=>{bf(t).formatter.toggle(r,n,o)})(t,r,n,o)},match:(r,n,o,a)=>bf(t).formatter.match(r,n,o,a),closest:r=>bf(t).formatter.closest(r),matchAll:(r,n)=>bf(t).formatter.matchAll(r,n),matchNode:(r,n,o,a)=>bf(t).formatter.matchNode(r,n,o,a),canApply:r=>bf(t).formatter.canApply(r),formatChanged:(r,o,a,l)=>bf(t).formatter.formatChanged(n,r,o,a,l),getCssText:Y(vs,t)}},vc=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},vu=t=>{let r=oo(),n=or(0),o=or(0),a={data:[],typing:!1,beforeChange:()=>{((t,r,n)=>{bf(t).undoManager.beforeChange(r,n)})(t,n,r)},add:(l,i)=>bf(t).undoManager.add(a,o,n,r,l,i),dispatchChange:()=>{t.setDirty(!0);let r=bn(t);r.bookmark=l4(t.selection),t.dispatch("change",{level:r,lastLevel:ek(a.data,o.get()).getOrUndefined()})},undo:()=>bf(t).undoManager.undo(a,n,o),redo:()=>{let r;return r=a.data,bf(t).undoManager.redo(o,r)},clear:()=>{((t,r,n)=>{bf(t).undoManager.clear(r,n)})(t,a,o)},reset:()=>{((t,r)=>{bf(t).undoManager.reset(r)})(t,a)},hasUndo:()=>bf(t).undoManager.hasUndo(a,o),hasRedo:()=>bf(t).undoManager.hasRedo(a,o),transact:r=>bf(t).undoManager.transact(a,n,r),ignore:r=>{((t,r,n)=>{bf(t).undoManager.ignore(r,n)})(t,n,r)},extra:(r,n)=>{((t,r,n,o,a)=>{bf(t).undoManager.extra(r,n,o,a)})(t,a,o,r,n)}};return bm(t)||((t,r,n)=>{let o=or(!1),a=t=>{bd(r,!1,n),r.add({},t)};t.on("init",()=>{r.add()}),t.on("BeforeExecCommand",t=>{vc(t.command)||(bc(r,n),r.beforeChange())}),t.on("ExecCommand",t=>{vc(t.command)||a(t)}),t.on("ObjectResizeStart cut",()=>{r.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("dragend",a),t.on("keyup",n=>{let l=n.keyCode;if(n.isDefaultPrevented())return;let i=tM.os.isMacOS()&&"Meta"===n.key;(l>=33&&l<=36||l>=37&&l<=40||45===l||n.ctrlKey||i)&&(a(),t.nodeChanged()),46!==l&&8!==l||t.nodeChanged(),o.get()&&r.typing&&!bi(bn(t),r.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),o.set(!1),t.nodeChanged())}),t.on("keydown",t=>{let l=t.keyCode;if(t.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l)return void(r.typing&&a(t));let i=t.ctrlKey&&!t.altKey||t.metaKey;if((l<16||l>20)&&224!==l&&91!==l&&!r.typing&&!i)return r.beforeChange(),bd(r,!0,n),r.add({},t),void o.set(!0);(tM.os.isMacOS()?t.metaKey:t.ctrlKey&&!t.altKey)&&r.beforeChange()}),t.on("mousedown",t=>{r.typing&&a(t)}),t.on("input",t=>{let r;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===t.inputType&&null===t.data||"insertFromPaste"===(r=t).inputType||"insertFromDrop"===r.inputType)&&a(t)}),t.on("AddUndo Undo Redo ClearUndos",r=>{r.isDefaultPrevented()||t.nodeChanged()})})(t,a,n),t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo"),a},vm=[9,27,cX.HOME,cX.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,cX.DOWN,cX.UP,cX.LEFT,cX.RIGHT].concat(tM.browser.isFirefox()?[224]:[]),vg="data-mce-placeholder",vf=t=>"keydown"===t.type||"keyup"===t.type,vp=t=>{let r=t.keyCode;return r===cX.BACKSPACE||r===cX.DELETE},vh=(t,r)=>({from:t,to:r}),vb=(t,r)=>gM(ru(t),ru(r.container())).map(t=>({block:t,position:r})),vv=(t,r)=>rK(r,t=>a7(t)||nZ(t.dom),r=>ry(r,t)).filter(tJ).getOr(t),vy=(t,r)=>{let n=((t,r)=>{let n=rO(t);return eb(n,t=>r.isBlock(tG(t))).fold(q(n),t=>n.slice(0,t))})(t,r);return ed(n,nl),n},vC=(t,r,n)=>eh(mG(n,r).reverse(),r=>oe(t,r)).each(nl),vE=(t,r,n,o,a)=>{if(oe(o,n))return lr(n),dL(n.dom);0===em(rA(a),t=>!oe(o,t)).length&&oe(o,r)&&r7(a,rg("br"));let l=dD(n.dom,l$.before(a.dom));return ed(vy(r,o),t=>{r7(a,t)}),vC(o,t,r),l},vw=(t,r,n,o)=>{if(oe(o,n)){if(oe(o,r)){let t=eg((t=>{let r=(t,n)=>rP(t).fold(()=>n,t=>o.isInline(tG(t))?r(t,n.concat(aZ(t))):n);return r(t,[])})(n),(t,r)=>(nn(t,r),r),lt());na(r),nr(r,t)}return nl(n),dL(r.dom)}let a=dM(n.dom);return ed(vy(r,o),t=>{nr(n,t)}),vC(o,t,r),a},vx=(t,r)=>{dB(t,r.dom).bind(t=>et.from(t.getNode())).map(ru).filter(a8).each(nl)},v_=(t,r,n,o)=>(vx(!0,r),vx(!1,n),(rC(n,r)?((t,r)=>{let n=mG(r,t);return et.from(n[n.length-1])})(n,r):et.none()).fold(Y(vw,t,r,n,o),Y(vE,t,r,n,o))),vk=(t,r,n,o,a)=>r?v_(t,o,n,a):v_(t,n,o,a),vS=(t,r)=>{let n,o,a;let l=ru(t.getBody());return(n=t.schema,o=l.dom,(a=t.selection.getRng()).collapsed?((t,r,n,o)=>{let a=vb(r,l$.fromRangeStart(o)),l=a.bind(o=>dA(n,r,o.position).bind(o=>vb(r,o).map(o=>nG(o.position.getNode())&&!oe(t,o.block)?dB(!1,o.block.dom).bind(t=>t.isEqual(o.position)?dA(n,r,t).bind(t=>vb(r,t)):et.some(o)).getOr(o):o)));return t$(a,l,vh).filter(t=>{let n;return!ry(t.from.block,t.to.block)&&((t,r)=>{let n=ru(t);return ry(vv(n,r.from.block),vv(n,r.to.block))})(r,t)&&!1===nQ((n=t).from.block.dom)&&!1===nQ(n.to.block.dom)&&(t=>{let r=t=>a5(t)||ov(t.dom)||a4(t);return r(t.from.block)&&r(t.to.block)})(t)&&!(rC(t.to.block,t.from.block)||rC(t.from.block,t.to.block))})})(n,o,r,a):et.none()).map(n=>()=>{vk(l,r,n.from.block,n.to.block,t.schema).each(r=>{t.selection.setRng(r.toRange())})})},vN=(t,r)=>rW(ru(r),a7,Y(ry,t)).isSome(),vR=t=>{let r=ru(t.getBody());return((t,r)=>{let n=dD(t.dom,l$.fromRangeStart(r)).isNone(),o=dP(t.dom,l$.fromRangeEnd(r)).isNone();return!(vN(t,r.startContainer)||vN(t,r.endContainer))&&n&&o})(r,t.selection.getRng())?et.some(()=>{t.setContent(""),t.selection.setCursorLocation()}):((t,r,n)=>{let o=r.getRng();return t$(gM(t,ru(o.startContainer)),gM(t,ru(o.endContainer)),(a,l)=>ry(a,l)?et.none():et.some(()=>{o.deleteContents(),vk(t,!0,a,l,n).each(t=>{r.setRng(t.toRange())})})).getOr(et.none())})(r,t.selection,t.schema)},vA=(t,r)=>t.selection.isCollapsed()?et.none():vR(t),vT=(t,r,n,o,a)=>et.from(r._selectionOverrides.showCaret(t,n,o,a)),vO=(t,r)=>t.dispatch("BeforeObjectSelected",{target:r}).isDefaultPrevented()?et.none():et.some((t=>{let r=t.ownerDocument.createRange();return r.selectNode(t),r})(r)),vB=(t,r,n)=>r.collapsed?((t,r,n)=>{let o=dp(1,t.getBody(),r),a=l$.fromRangeStart(o),l=a.getNode();if(s7(l))return vT(1,t,l,!a.isAtEnd(),!1);let i=a.getNode(!0);if(s7(i))return vT(1,t,i,!1,!1);let s=fn(t.dom.getRoot(),a.getNode());return s7(s)?vT(1,t,s,!1,n):et.none()})(t,r,n).getOr(r):r,vP=t=>mW(t)||mH(t),vD=t=>mK(t)||m$(t),vL=(t,r,n,o,a,l)=>{var i;vT(o,t,l.getNode(!a),a,!0).each(n=>{if(r.collapsed){let t=r.cloneRange();a?t.setEnd(n.startContainer,n.startOffset):t.setStart(n.endContainer,n.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(n)}),i=t.dom,n$(n)&&0===n.data.length&&i.remove(n)},vM=(t,r)=>((t,r)=>{let n=t.selection.getRng();if(!n$(n.commonAncestorContainer))return et.none();let o=r?m.Forwards:m.Backwards,a=dk(t.getBody()),l=Y(dy,r?a.next:a.prev),i=r?vP:vD,s=db(o,t.getBody(),n),d=l(s),c=d?gT(r,d):d;if(!c||!dC(s,c))return et.none();if(i(c))return et.some(()=>vL(t,n,s.getNode(),o,r,c));let u=l(c);return u&&i(u)&&dC(c,u)?et.some(()=>vL(t,n,s.getNode(),o,r,u)):et.none()})(t,r),vF=(t,r)=>{let n=t.getBody();return r?dL(n).filter(mW):dM(n).filter(mK)},vI=t=>{let r=t.selection.getRng();return!r.collapsed&&(vF(t,!0).exists(t=>t.isEqual(l$.fromRangeStart(r)))||vF(t,!1).exists(t=>t.isEqual(l$.fromRangeEnd(r))))},vU=l7([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vz=(t,r,n,o)=>dA(r,t,n).bind(a=>{var l;return I(l=a.getNode())&&(a7(ru(l))||a4(ru(l)))||((t,r,n,o,a)=>{let l=r=>a.isInline(r.nodeName.toLowerCase())&&!ds(n,o,t);return dh(!r,n).fold(()=>dh(r,o).fold(J,l),l)})(t,r,n,a,o)?et.none():r&&nQ(a.getNode())||!r&&nQ(a.getNode(!0))?((t,r,n,o,a)=>{let l=a.getNode(!n);return gM(ru(r),ru(o.getNode())).map(r=>oe(t,r)?vU.remove(r.dom):vU.moveToElement(l)).orThunk(()=>et.some(vU.moveToElement(l)))})(o,t,r,n,a):r&&mK(n)||!r&&mW(n)?et.some(vU.moveToPosition(a)):et.none()}),vj=(t,r)=>et.from(fn(t.getBody(),r)),vH=(t,r)=>{let n=t.selection.getNode();return vj(t,n).filter(nQ).fold(()=>((t,r,n,o)=>{let a;let l=dp(r?1:-1,t,n),i=l$.fromRangeStart(l),s=ru(t);return!r&&mK(i)?et.some(vU.remove(i.getNode(!0))):r&&mW(i)?et.some(vU.remove(i.getNode())):!r&&mW(i)&&m4(s,i,o)?m9(s,i,o).map(t=>vU.remove(t.getNode())):r&&mK(i)&&m6(s,i,o)?m7(s,i,o).map(t=>vU.remove(t.getNode())):((t,r)=>{let n=r.getNode(!t);return nD(n)&&n.getAttribute("data-mce-caret")===(t?"after":"before")})(r,i)?(F(a=i.getNode(!r))?et.none():r&&nQ(a.nextSibling)?et.some(vU.moveToElement(a.nextSibling)):!r&&nQ(a.previousSibling)?et.some(vU.moveToElement(a.previousSibling)):et.none()).orThunk(()=>vz(t,r,i,o)):vz(t,r,i,o).bind(r=>r.fold(t=>et.some(vU.remove(t)),t=>et.some(vU.moveToElement(t)),r=>ds(i,r,t)?et.none():et.some(vU.moveToPosition(r))))})(t.getBody(),r,t.selection.getRng(),t.schema).map(n=>()=>n.fold(n=>(t._selectionOverrides.hideFakeCaret(),gk(t,r,ru(n)),!0),n=>{let o=r?l$.before(n):l$.after(n);return t.selection.setRng(o.toRange()),!0},r=>(t.selection.setRng(r.toRange()),!0))),()=>et.some(H))},v$=t=>{let r=t.dom,n=t.selection,o=fn(t.getBody(),n.getNode());if(nZ(o)&&r.isBlock(o)&&r.isEmpty(o)){let t=r.create("br",{"data-mce-bogus":"1"});r.setHTML(o,""),o.appendChild(t),n.setRng(l$.before(t).toRange())}return!0},vV=(t,r)=>t.selection.isCollapsed()?vH(t,r):((t,r)=>{let n=t.selection.getNode();return nQ(n)&&!nJ(n)?vj(t,n.parentNode).filter(nQ).fold(()=>et.some(()=>{ed(nw(ru(t.getBody()),".mce-offscreen-selection"),nl),gk(t,r,ru(t.selection.getNode())),gF(t)}),()=>et.some(H)):vI(t)?et.some(()=>{gz(t,t.selection.getRng(),ru(t.getBody()))}):et.none()})(t,r),vq=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=l$.fromRangeStart(t.selection.getRng());return dA(r,t.getBody(),n).filter(t=>r?mz(t):mj(t)).bind(t=>dd(r?0:-1,t)).map(r=>()=>t.selection.select(r))})(t,r):et.none(),vW=t=>n$(t)&&"\uFEFF"===t.data[0],vK=t=>n$(t)&&"\uFEFF"===t.data[t.data.length-1],vY=t=>{var r;return(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF")},vG=(t,r)=>t?(t=>{var r;if(n$(t.previousSibling))return vK(t.previousSibling)||t.previousSibling.appendData("\uFEFF"),t.previousSibling;if(n$(t))return vW(t)||t.insertData(0,"\uFEFF"),t;{let n=vY(t);return null===(r=t.parentNode)||void 0===r||r.insertBefore(n,t),n}})(r):(t=>{var r,n;if(n$(t.nextSibling))return vW(t.nextSibling)||t.nextSibling.insertData(0,"\uFEFF"),t.nextSibling;if(n$(t))return vK(t)||t.appendData("\uFEFF"),t;{let o=vY(t);return t.nextSibling?null===(r=t.parentNode)||void 0===r||r.insertBefore(o,t.nextSibling):null===(n=t.parentNode)||void 0===n||n.appendChild(o),o}})(r),vX=Y(vG,!0),vZ=Y(vG,!1),vQ=(t,r)=>n$(t.container())?vG(r,t.container()):vG(r,t.getNode()),vJ=(t,r)=>{let n=r.get();return n&&t.container()===n&&la(n)},v0=(t,r)=>r.fold(r=>{s5(t.get());let n=vX(r);return t.set(n),et.some(l$(n,n.length-1))},r=>dL(r).map(r=>{if(vJ(r,t))return l$(t.get(),1);{s5(t.get());let n=vQ(r,!0);return t.set(n),l$(n,1)}}),r=>dM(r).map(r=>{if(vJ(r,t)){let r=t.get();return l$(r,r.length-1)}{s5(t.get());let n=vQ(r,!1);return t.set(n),l$(n,n.length-1)}}),r=>{s5(t.get());let n=vZ(r);return t.set(n),et.some(l$(n,1))}),v1=(t,r)=>{for(let n=0;n<t.length;n++){let o=t[n].apply(null,r);if(o.isSome())return o}return et.none()},v2=l7([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),v3=(t,r)=>di(r,t)||t,v8=(t,r,n)=>{let o=gO(n),a=v3(r,o.container());return gA(t,a,o).fold(()=>dP(a,o).bind(Y(gA,t,a)).map(t=>v2.before(t)),et.none)},v5=(t,r)=>null===dU(t,r),v6=(t,r,n)=>gA(t,r,n).filter(Y(v5,r)),v4=(t,r,n)=>{let o=gB(n);return v6(t,r,o).bind(t=>dD(t,o).isNone()?et.some(v2.start(t)):et.none())},v9=(t,r,n)=>{let o=gO(n);return v6(t,r,o).bind(t=>dP(t,o).isNone()?et.some(v2.end(t)):et.none())},v7=(t,r,n)=>{let o=gB(n),a=v3(r,o.container());return gA(t,a,o).fold(()=>dD(a,o).bind(Y(gA,t,a)).map(t=>v2.after(t)),et.none)},ye=t=>!gR(yr(t)),yt=(t,r,n)=>v1([v8,v4,v9,v7],[t,r,n]).filter(ye),yr=t=>t.fold(W,W,W,W),yn=t=>t.fold(q("before"),q("start"),q("end"),q("after")),yo=t=>t.fold(v2.before,v2.before,v2.after,v2.after),ya=t=>t.fold(v2.start,v2.start,v2.end,v2.end),yl=(t,r,n,o,a,l)=>t$(gA(r,n,o),gA(r,n,a),(r,o)=>r!==o&&((t,r,n)=>{let o=di(r,t),a=di(n,t);return I(o)&&o===a})(n,r,o)?v2.after(t?r:o):l).getOr(l),yi=(t,r)=>t.fold(ee,t=>!(yn(t)===yn(r)&&yr(t)===yr(r))),ys=(t,r)=>t?r.fold($(et.some,v2.start),et.none,$(et.some,v2.after),et.none):r.fold(et.none,$(et.some,v2.before),et.none,$(et.some,v2.end)),yd=(t,r,n)=>(r.setRng(l$(n.container(),n.offset()+(t?1:-1)).toRange()),r.getSel().modify("move",t?"forward":"backward","word"),!0);(s=f||(f={}))[s.Br=0]="Br",s[s.Block=1]="Block",s[s.Wrap=2]="Wrap",s[s.Eol=3]="Eol";let yc=(t,r)=>t===m.Backwards?eE(r):r,yu=(t,r,n)=>t===m.Forwards?r.next(n):r.prev(n),ym=(t,r,n,o)=>nG(o.getNode(r===m.Forwards))?f.Br:!1===ds(n,o)?f.Block:f.Wrap,yg=(t,r,n,o)=>{let a=dk(n),l=o,i=[];for(;l;){let n=yu(r,a,l);if(!n)break;if(nG(n.getNode(!1)))return r===m.Forwards?{positions:yc(r,i).concat([n]),breakType:f.Br,breakAt:et.some(n)}:{positions:yc(r,i),breakType:f.Br,breakAt:et.some(n)};if(n.isVisible()){if(t(l,n)){let t=ym(0,r,l,n);return{positions:yc(r,i),breakType:t,breakAt:et.some(n)}}i.push(n),l=n}else l=n}return{positions:yc(r,i),breakType:f.Eol,breakAt:et.none()}},yf=(t,r,n,o)=>r(n,o).breakAt.map(o=>{let a=r(n,o).positions;return t===m.Backwards?a.concat(o):[o].concat(a)}).getOr([]),yp=(t,r)=>ef(t,(t,n)=>t.fold(()=>et.some(n),o=>t$(eS(o.getClientRects()),eS(n.getClientRects()),(t,a)=>{let l=Math.abs(r-t.left);return Math.abs(r-a.left)<=l?n:o}).or(t)),et.none()),yh=(t,r)=>eS(r.getClientRects()).bind(r=>yp(t,r.left)),yb=Y(yg,l$.isAbove,-1),yv=Y(yg,l$.isBelow,1),yy=Y(yf,-1,yb),yC=Y(yf,1,yv),yE=(t,r)=>yb(t,r).breakAt.isNone(),yw=(t,r)=>yv(t,r).breakAt.isNone(),yx=(t,r)=>yh(yy(t,r),r),y_=(t,r)=>yh(yC(t,r),r),yk=(t,r)=>Math.abs(t.left-r),yS=(t,r)=>Math.abs(t.right-r),yN=(t,r)=>eX(t,(t,n)=>{let o=Math.min(yk(t,r),yS(t,r)),a=Math.min(yk(n,r),yS(n,r));return a===o&&e$(n,"node")&&nQ(n.node)||a<o?n:t}),yR=t=>{let r=r=>es(r,r=>{let n=lp(r);return n.node=t,n});if(nD(t))return r(t.getClientRects());if(n$(t)){let n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),r(n.getClientRects())}return[]},yA=t=>ey(t,yR);(d=p||(p={}))[d.Up=-1]="Up",d[d.Down=1]="Down";let yT=(t,r,n,o,a,l)=>{let i=0,s=[],d=o=>{let l=yA([o]);-1===t&&(l=l.reverse());for(let t=0;t<l.length;t++){let o=l[t];if(!n(o,c)){if(s.length>0&&r(o,eQ(s))&&i++,o.line=i,a(o))return!0;s.push(o)}}return!1},c=eQ(l.getClientRects());if(!c)return s;let u=l.getNode();return u&&(d(u),((t,r,n,o)=>{let a=o;for(;a=dl(a,t,lT,r);)if(n(a))return})(t,o,d,u)),s},yO=Y(yT,p.Up,lv,ly),yB=Y(yT,p.Down,ly,lv),yP=t=>eQ(t.getClientRects()),yD=t=>r=>r.line>t,yL=t=>r=>r.line===t,yM=(t,r)=>{t.selection.setRng(r),uI(t,t.selection.getRng())},yF=(t,r,n)=>et.some(vB(t,r,n)),yI=(t,r,n,o,a,l)=>{let i=r===m.Forwards,s=dk(t.getBody()),d=Y(dy,i?s.next:s.prev),c=i?o:a;if(!n.collapsed){let o=lE(n);if(l(o))return vT(r,t,o,r===m.Backwards,!1);if(vI(t)){let t=n.cloneRange();return t.collapse(r===m.Backwards),et.from(t)}}let u=db(r,t.getBody(),n);if(c(u))return vO(t,u.getNode(!i));let g=d(u),f=lg(n);if(!g)return f?et.some(n):et.none();if(c(g=gT(i,g)))return vT(r,t,g.getNode(!i),i,!1);let p=d(g);return p&&c(p)&&dC(g,p)?vT(r,t,p.getNode(!i),i,!1):f?yF(t,g.toRange(),!1):et.none()},yU=(t,r,n,o,a,l)=>{let i;let s=db(r,t.getBody(),n),d=eQ(s.getClientRects()),c=r===p.Down,u=t.getBody();if(!d)return et.none();if(vI(t)){let t=c?l$.fromRangeEnd(n):l$.fromRangeStart(n);return(c?y_:yx)(u,t).orThunk(()=>et.from(t)).map(t=>t.toRange())}let m=em((c?yB:yO)(u,yD(1),s),yL(1)),g=d.left,f=yN(m,g);if(f&&l(f.node)){let n=Math.abs(g-f.left),o=Math.abs(g-f.right);return vT(r,t,f.node,n<o,!1)}if(i=o(s)?s.getNode():a(s)?s.getNode(!0):lE(n)){let n=((t,r,n,o)=>{let a,l,i,s;let d=dk(r),c=[],u=0;1===t?(a=d.next,l=ly,i=lv,s=l$.after(o)):(a=d.prev,l=lv,i=ly,s=l$.before(o));let m=yP(s);do{if(!s.isVisible())continue;let t=yP(s);if(i(t,m))continue;c.length>0&&l(t,eQ(c))&&u++;let r=lp(t);if(r.position=s,r.line=u,n(r))break;c.push(r)}while(s=a(s));return c})(r,u,yD(1),i),o=yN(em(n,yL(1)),g);if(o||(o=eQ(em(n,yL(0)))))return yF(t,o.position.toRange(),!1)}return 0===m.length?yz(t,c).filter(c?a:o).map(r=>vB(t,r.toRange(),!1)):et.none()},yz=(t,r)=>{var n,o;let a=t.selection.getRng(),l=r?l$.fromRangeEnd(a):l$.fromRangeStart(a),i=(n=l.container(),o=t.getBody(),rW(ru(n),t=>nZ(t.dom),t=>t.dom===o).map(t=>t.dom).getOr(o));return r?eN(yv(i,l).positions):eS(yb(i,l).positions)},yj=(t,r,n)=>yz(t,r).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),yH=(t,r)=>{let n=t.dom.createRng();n.setStart(r.container(),r.offset()),n.setEnd(r.container(),r.offset()),t.selection.setRng(n)},y$=(t,r)=>{t?r.setAttribute("data-mce-selected","inline-boundary"):r.removeAttribute("data-mce-selected")},yV=(t,r,n)=>v0(r,n).map(r=>(yH(t,r),n)),yq=(t,r,n)=>{let o=t.getBody(),a=((t,r,n)=>{let o=l$.fromRangeStart(t);if(t.collapsed)return o;{let a=l$.fromRangeEnd(t);return n?dD(r,a).getOr(a):dP(r,o).getOr(o)}})(t.selection.getRng(),o,n);return((t,r,n,o)=>{let a=gT(t,o),l=yt(r,n,a);return yt(r,n,a).bind(Y(ys,t)).orThunk(()=>((t,r,n,o,a)=>{let l=gT(t,a);return dA(t,n,l).map(Y(gT,t)).fold(()=>o.map(yo),a=>yt(r,n,a).map(Y(yl,t,r,n,l,a)).filter(Y(yi,o))).filter(ye)})(t,r,n,l,o))})(n,Y(gN,t),o,a).bind(n=>yV(t,r,n))},yW=(t,r,n)=>!!i5(t)&&yq(t,r,n).isSome(),yK=(t,r,n)=>!!i5(r)&&((t,r)=>{let n=r.selection.getRng(),o=t?l$.fromRangeEnd(n):l$.fromRangeStart(n);return!!U(r.selection.getSel().modify)&&(t&&ls(o)?yd(!0,r.selection,o):!(t||!ld(o))&&yd(!1,r.selection,o))})(t,r),yY=t=>{let r=or(null),n=Y(gN,t);return t.on("NodeChange",o=>{var a;i5(t)&&(((t,r,n)=>{let o=em(es(nw(ru(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),t=>t.dom),t),a=em(n,t);ed(ew(o,a),Y(y$,!1)),ed(ew(a,o),Y(y$,!0))})(n,t.dom,o.parents),((t,r)=>{let n=r.get();if(t.selection.isCollapsed()&&!t.composing&&n){let o=l$.fromRangeStart(t.selection.getRng());l$.isTextPosition(o)&&!(ls(o)||ld(o))&&(yH(t,s8(n,o)),r.set(null))}})(t,r),a=o.parents,t.selection.isCollapsed()&&ed(em(a,n),o=>{let a=l$.fromRangeStart(t.selection.getRng());yt(n,t.getBody(),a).bind(n=>yV(t,r,n))}))}),r},yG=Y(yK,!0),yX=Y(yK,!1),yZ=(t,r,n)=>{if(i5(t)){let o=yz(t,r).getOrThunk(()=>{let n=t.selection.getRng();return r?l$.fromRangeEnd(n):l$.fromRangeStart(n)});return yt(Y(gN,t),t.getBody(),o).exists(r=>v0(n,yo(r)).exists(r=>(yH(t,r),!0)))}return!1},yQ=(t,r)=>n=>v0(r,n).map(r=>()=>yH(t,r)),yJ=(t,r,n,o)=>{let a=t.getBody(),l=Y(gN,t);t.undoManager.ignore(()=>{t.selection.setRng(((t,r)=>{let n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(r.container(),r.offset()),n})(n,o)),gD(t),yt(l,a,l$.fromRangeStart(t.selection.getRng())).map(ya).bind(yQ(t,r)).each(Q)}),t.nodeChanged()},y0=(t,r,n)=>{if(t.selection.isCollapsed()&&i5(t)){let o=l$.fromRangeStart(t.selection.getRng());return((t,r,n,o)=>{let a;let l=(a=t.getBody(),di(o.container(),a)||a),i=Y(gN,t),s=yt(i,l,o);return s.bind(t=>n?t.fold(q(et.some(ya(t))),et.none,q(et.some(yo(t))),et.none):t.fold(et.none,q(et.some(yo(t))),et.none,q(et.some(ya(t))))).map(yQ(t,r)).getOrThunk(()=>{let a=dT(n,l,o),d=a.bind(t=>yt(i,l,t));return t$(s,d,()=>gA(i,l,o).bind(r=>t$(dL(r),dM(r),(t,n)=>{let o=gT(!0,t),a=gT(!1,n);return dP(r,o).forall(t=>t.isEqual(a))}).getOr(!0)?et.some(()=>{gk(t,n,ru(r))}):et.none())).getOrThunk(()=>d.bind(()=>a.map(a=>()=>{n?yJ(t,r,o,a):yJ(t,r,a,o)})))})})(t,r,n,o)}return et.none()},y1=(t,r)=>{let n=ru(t.getBody()),o=mG(ru(t.selection.getStart()),n);return eb(o,r).fold(q(o),t=>o.slice(0,t))},y2=t=>1===rL(t),y3=(t,r)=>{let n=Y(fq,t);return ey(r,t=>n(t)?[t.dom]:[])},y8=t=>{let r=y1(t,r=>t.schema.isBlock(tG(r)));return y3(t,r)},y5=(t,r)=>{let n=em(y1(t,r=>t.schema.isBlock(tG(r))||rL(r)>1),y2);return eN(n).bind(o=>gI(r,l$.fromRangeStart(t.selection.getRng()),o.dom)&&!cx(o)?et.some(()=>((t,r,n,o)=>{let a=y3(r,o);if(0===a.length)gk(r,t,n);else{let t=fV(n.dom,a);r.selection.setRng(t.toRange())}})(r,t,o,n)):et.none())},y6=(t,r)=>{let n=t.selection.getStart(),o=((t,r)=>{let n=r.parentElement;return nG(r)&&!D(n)&&t.dom.isEmpty(n)})(t,n)||cx(ru(n))?fV(n,r):((t,r)=>{let{caretContainer:n,caretPosition:o}=f$(r);return t.insertNode(n.dom),o})(t.selection.getRng(),r);t.selection.setRng(o.toRange())},y4=t=>n$(t.startContainer),y9=t=>{let r=t.selection.getRng();return 0===r.startOffset&&y4(r)&&((t,r)=>{let n=r.startContainer.parentElement;return!D(n)&&fq(t,ru(n))})(t,r)&&((t=>{let r=t.startContainer.parentNode,n=t.endContainer.parentNode;return!D(r)&&!D(n)&&r.isEqualNode(n)})(r)&&(t=>{let r=t.endContainer;return t.endOffset===(n$(r)?r.length:r.childNodes.length)})(r)||!r.endContainer.isEqualNode(r.commonAncestorContainer))},y7=(t,r)=>t.selection.isCollapsed()?y5(t,r):(t=>{if(y9(t)){let r=y8(t);return et.some(()=>{gD(t),((t,r)=>{let n=ew(r,y8(t));n.length>0&&y6(t,n)})(t,r)})}return et.none()})(t),Ce=t=>((t=>{var r,n;let o=t.selection.getRng();return o.collapsed&&(y4(o)||t.dom.isEmpty(o.startContainer))&&(r=ru(t.selection.getStart()),n=t.schema,!nx(r,t=>dI(t.dom),t=>n.isBlock(tG(t))))})(t)&&y6(t,[]),!0),Ct=(t,r,n)=>I(n)?et.some(()=>{t._selectionOverrides.hideFakeCaret(),gk(t,r,ru(n))}):et.none(),Cr=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=r?mH:m$,o=db(r?m.Forwards:m.Backwards,t.getBody(),t.selection.getRng());return n(o)?Ct(t,r,o.getNode(!r)):et.from(gT(r,o)).filter(t=>n(t)&&dC(o,t)).bind(n=>Ct(t,r,n.getNode(!r)))})(t,r):((t,r)=>{let n=t.selection.getNode();return n1(n)?Ct(t,r,n):et.none()})(t,r),Cn=t=>ta(null!=t?t:"").getOr(0),Co=(t,r)=>(t||"table"===tG(r)?"margin":"padding")+("rtl"===r8(r,"direction")?"-right":"-left"),Ca=t=>{let r=Ci(t);return!t.mode.isReadOnly()&&(r.length>1||eC(r,r=>{let n=Co(i$(t),r),o=r6(r,n).map(Cn).getOr(0);return"false"!==t.dom.getContentEditable(r.dom)&&o>0}))},Cl=t=>a6(t)||a4(t),Ci=t=>em(ns(t.selection.getSelectedBlocks()),t=>!Cl(t)&&!r_(t).exists(Cl)&&rK(t,t=>nZ(t.dom)||nQ(t.dom)).exists(t=>nZ(t.dom))),Cs=(t,r)=>{var n,o;let{dom:a}=t,l=iV(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(l))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",s=Cn(l),d=i$(t);ed(Ci(t),t=>{((t,r,n,o,a,l)=>{let i=Co(n,ru(l)),s=Cn(t.getStyle(l,i));if("outdent"===r){let r=Math.max(0,s-o);t.setStyle(l,i,r?r+a:"")}else t.setStyle(l,i,s+o+a)})(a,r,d,s,i,t.dom)})},Cd=t=>Cs(t,"outdent"),Cc=t=>{if(t.selection.isCollapsed()&&Ca(t)){let r=t.dom,n=t.selection.getRng(),o=l$.fromRangeStart(n),a=r.getParent(n.startContainer,r.isBlock);if(null!==a&&m0(ru(a),o,t.schema))return et.some(()=>Cd(t))}return et.none()},Cu=(t,r,n)=>eA([Cc,vV,vM,(t,n)=>y0(t,r,n),vS,fr,vq,Cr,vA,y7],r=>r(t,n)).filter(r=>t.selection.isEditable()),Cm=(t,r)=>{t.addCommand("delete",()=>{((t,r)=>{Cu(t,r,!1).fold(()=>{t.selection.isEditable()&&(gD(t),gF(t))},Q)})(t,r)}),t.addCommand("forwardDelete",()=>{((t,r)=>{Cu(t,r,!0).fold(()=>{t.selection.isEditable()&&gP(t,"ForwardDelete")},Q)})(t,r)})},Cg=t=>void 0===t.touches||1!==t.touches.length?et.none():et.some(t.touches[0]),Cf=(t,r)=>eH(t,r.nodeName),Cp=(t,r)=>!!n$(r)||!!nD(r)&&!(Cf(t.getBlockElements(),r)||dZ(r)||oE(t,r)||oi(r)),Ch=(t,r)=>{if(n$(r)){if(0===r.data.length)return!0;if(/^\s+$/.test(r.data))return!r.nextSibling||Cf(t,r.nextSibling)||oi(r.nextSibling)}return!1},Cb=t=>t.dom.create(ix(t),i_(t)),Cv=t=>{let r=t.dom,n=t.selection,o=t.schema,a=o.getBlockElements(),l=n.getStart(),i=t.getBody(),s,d,c=!1,u=ix(t);if(!l||!nD(l))return;let m=i.nodeName.toLowerCase();if(!o.isValidChild(m,u.toLowerCase())||ei(mY(ru(l),ru(i)),t=>Cf(a,t.dom)))return;let g=n.getRng(),{startContainer:f,startOffset:p,endContainer:h,endOffset:b}=g,v=u6(t),y=i.firstChild;for(;y;)if(nD(y)&&ob(o,y),Cp(o,y)){if(Ch(a,y)){d=y,y=y.nextSibling,r.remove(d);continue}s||(s=Cb(t),i.insertBefore(s,y),c=!0),d=y,y=y.nextSibling,s.appendChild(d)}else s=null,y=y.nextSibling;c&&v&&(g.setStart(f,p),g.setEnd(h,b),n.setRng(g),t.nodeChanged())},Cy=(t,r,n)=>{let o=ru(Cb(t)),a=lt();nr(o,a),n(r,o);let l=document.createRange();return l.setStartBefore(a.dom),l.setEndBefore(a.dom),l},CC=t=>r=>-1!==(" "+r.attr("class")+" ").indexOf(t),CE=(t,r,n)=>function(o){let a=arguments,l=a[a.length-2],i=l>0?r.charAt(l-1):"";if('"'===i)return o;if(">"===i){let t=r.lastIndexOf("<",l);if(-1!==t&&-1!==r.substring(t,l).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"},Cw=(t,r)=>{r.hasAttribute("data-mce-caret")&&(lm(r),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(r))},Cx=(t,r)=>{let n=rX(ru(t.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull();if(n)return"compositionstart"===r.type?(r.preventDefault(),r.stopPropagation(),void Cw(t,n)):void(li(n)&&(Cw(t,n),t.undoManager.add()))},C_=(t,r,n)=>{let o=dk(t.getBody()),a=Y(dy,1===r?o.next:o.prev);if(n.collapsed){let o=t.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!a(l$.fromRangeStart(n))){let n=ru((t=>{let r=t.dom.create(ix(t));return r.innerHTML='<br data-mce-bogus="1">',r})(t));1===r?ne(ru(o),n):r7(ru(o),n),t.selection.select(n.dom,!0),t.selection.collapse()}}},Ck=(t,r)=>{var n;return((t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yI(t,n,o,mW,mK,nQ).orThunk(()=>(C_(t,n,o),et.none()))})(t,(n=t.selection,gR(r?n.getEnd(!0):n.getStart(!0))?!r:r)).exists(r=>(yM(t,r),!0))},CS=(t,r)=>((t,r)=>{let n=r?1:-1,o=t.selection.getRng();return yU(t,n,o,t=>mW(t)||mV(t),t=>mK(t)||mq(t),nQ).orThunk(()=>(C_(t,n,o),et.none()))})(t,r).exists(r=>(yM(t,r),!0)),CN=(t,r)=>yj(t,r,r?mK:mW),CR=(t,r)=>vF(t,!r).map(n=>{let o=n.toRange(),a=t.selection.getRng();return r?o.setStart(a.startContainer,a.startOffset):o.setEnd(a.endContainer,a.endOffset),o}).exists(r=>(yM(t,r),!0)),CA=t=>el(["figcaption"],tG(t)),CT=(t,r)=>!!t.selection.isCollapsed()&&((t,r)=>{let n=ru(t.getBody()),o=l$.fromRangeStart(t.selection.getRng());return((t,r,n)=>{let o=Y(ry,r);return rK(ru(t.container()),t=>n.isBlock(tG(t)),o).filter(CA)})(o,n,t.schema).exists(()=>{if(r?yw(n.dom,o):yE(n.dom,o)){let o=Cy(t,n,r?nr:nt);return t.selection.setRng(o),!0}return!1})})(t,r),CO=(t,r)=>r?et.from(t.dom.getParent(t.selection.getNode(),"details")).map(r=>((t,r)=>{let n=t.selection.getRng(),o=l$.fromRangeStart(n);return!(t.getBody().lastChild!==r||!yw(r,o)||(t.execCommand("InsertNewBlockAfter"),0))})(t,r)).getOr(!1):et.from(t.dom.getParent(t.selection.getNode(),"summary")).bind(r=>et.from(t.dom.getParent(r,"details")).map(n=>((t,r,n)=>{let o=t.selection.getRng(),a=l$.fromRangeStart(o);return!(t.getBody().firstChild!==r||!yE(n,a)||(t.execCommand("InsertNewBlockBefore"),0))})(t,n,r))).getOr(!1),CB={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},CP=(t,r)=>r.keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey,CD=(t,...r)=>()=>t.apply(null,r),CL=(t,r)=>eh(ey(es(t,t=>({...CB,...t})),t=>CP(t,r)?[t]:[]),t=>t.action()),CM=(t,r)=>eA(ey(es(t,t=>({...CB,...t})),t=>CP(t,r)?[t]:[]),t=>t.action()),CF=(t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yI(t,n,o,mH,m$,n1).exists(r=>(yM(t,r),!0))},CI=(t,r)=>{let n=t.selection.getRng();return yU(t,r?1:-1,n,mH,m$,n1).exists(r=>(yM(t,r),!0))},CU=(t,r)=>yj(t,r,r?m$:mH),Cz=l7([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Cj={...Cz,none:t=>Cz.none(t)},CH=(t,r,n)=>ey(rO(t),t=>rb(t,r)?n(t)?[t]:[]:CH(t,r,n)),C$=(t,r)=>rZ(t,"table",r),CV=(t,r,n,o,a=ee)=>{let l=1===o;if(!l&&n<=0)return Cj.first(t[0]);if(l&&n>=t.length-1)return Cj.last(t[t.length-1]);{let l=n+o,i=t[l];return a(i)?Cj.middle(r,i):CV(t,r,l,o,a)}},Cq=(t,r)=>C$(t,r).bind(r=>{let n=CH(r,"th,td",ee);return eb(n,r=>ry(t,r)).map(t=>({index:t,all:n}))}),CW=["img","br"],CK=t=>a1.getOption(t).filter(t=>0!==t.trim().length||t.indexOf("\xa0")>-1).isSome()||el(CW,tG(t))||tQ(t)&&"false"===t4(t,"contenteditable"),CY=(t,r,n,o,a)=>ef(em(ey(nw(ru(n),"td,th,caption").map(t=>t.dom),r=>{let n;let o={left:(n=lp(r.getBoundingClientRect())).left- -1,top:n.top- -1,right:n.right+-2,bottom:n.bottom+-2,width:n.width+-1,height:n.height+-1};return[{x:o.left,y:t(o),cell:r},{x:o.right,y:t(o),cell:r}]}),t=>r(t,a)),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.sqrt(Math.abs(t.x-o)+Math.abs(t.y-a)),l=Math.sqrt(Math.abs(r.x-o)+Math.abs(r.y-a));return et.some(l<n?r:t)}),et.none()).map(t=>t.cell),CG=Y(CY,t=>t.bottom,(t,r)=>t.y<r),CX=Y(CY,t=>t.top,(t,r)=>t.y>r),CZ=(t,r,n)=>{let o;let a=t(r,n);return(a.breakType!==f.Wrap||0!==a.positions.length)&&(nG(n.getNode())||(o=a).breakType!==f.Br||1!==o.positions.length)?a.breakAt.isNone():!a.breakAt.exists(n=>t(r,n).breakAt.isSome())},CQ=Y(CZ,yb),CJ=Y(CZ,yv),C0=(t,r,n,o)=>{let a=t.selection.getRng();return!(!s9()||!((t,r,n)=>{let o=l$.fromRangeStart(r);return dB(!t,n).exists(t=>t.isEqual(o))})(r,a,n)||(vT(r?1:-1,t,n,!r,!1).each(r=>{yM(t,r)}),0))},C1=(t,r,n)=>{let o=((t,r)=>{let n=r.getNode(t);return nz(n)?et.some(n):et.none()})(!!r,n),a=!1===r;o.fold(()=>yM(t,n.toRange()),o=>dB(a,t.getBody()).filter(t=>t.isEqual(n)).fold(()=>yM(t,n.toRange()),n=>((t,r,n)=>{r.undoManager.transact(()=>{let o=Cy(r,ru(n),t?ne:r7);yM(r,o)})})(r,t,o)))},C2=(t,r,n,o)=>{let a=t.selection.getRng(),l=l$.fromRangeStart(a),i=t.getBody();return!r&&CQ(o,l)?(C1(t,r,eS(l.getClientRects()).bind(t=>CG(n,t.left,t.top)).bind(t=>yh(dM(t).map(r=>yb(t,r).positions.concat(r)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yp(yy(i,l$.before(n)),t.left))).getOr(l$.before(n))),!0):!!(r&&CJ(o,l))&&(C1(t,r,eN(l.getClientRects()).bind(t=>CX(n,t.left,t.top)).bind(t=>yh(dL(t).map(r=>[r].concat(yv(t,r).positions)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yp(yC(i,l$.after(n)),t.left))).getOr(l$.after(n))),!0)},C3=(t,r,n)=>et.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>et.from(t.dom.getParent(o,"table")).map(a=>n(t,r,a,o))).getOr(!1),C8=(t,r)=>C3(t,r,C0),C5=(t,r)=>C3(t,r,C2),C6=(t,r,n)=>n.fold(et.none,et.none,(t,r)=>rY(r,CK).map(t=>ul(ut.exact(t,0,t,0))),n=>(t.execCommand("mceTableInsertRowAfter"),C4(t,r,n))),C4=(t,r,n)=>C6(t,r,Cq(n,void 0).fold(()=>Cj.none(n),t=>CV(t.all,n,t.index,1,rQ))),C9=(t,r,n)=>C6(t,r,Cq(n,void 0).fold(()=>Cj.none(),t=>CV(t.all,n,t.index,-1,rQ))),C7=(t,r)=>{let n=["table","li","dl"],o=ru(t.getBody()),a=t=>{let r=tG(t);return ry(t,o)||el(n,r)},l=t.selection.getRng();return((t,r,n=J)=>n(r)?et.none():el(t,tG(r))?et.some(r):rG(r,t.join(","),t=>rb(t,"table")||n(t)))(["td","th"],ru(r?l.endContainer:l.startContainer),a).map(n=>(C$(n,a).each(r=>{t.model.table.clearSelectedCells(r.dom)}),t.selection.collapse(!r),(r?C4:C9)(t,a,n).each(r=>{t.selection.setRng(r)}),!0)).getOr(!1)},Ee=(t,r)=>({container:t,offset:r}),Et=aN.DOM,Er=t=>r=>t===r?-1:0,En=(t,r,n)=>{if(n$(t)&&r>=0)return et.some(Ee(t,r));{let o=a0(Et);return et.from(o.backwards(t,r,Er(t),n)).map(t=>Ee(t.container,t.container.data.length))}},Eo=(t,r,n)=>{if(!n$(t))return et.none();let o=t.data;if(r>=0&&r<=o.length)return et.some(Ee(t,r));{let o=a0(Et);return et.from(o.backwards(t,r,Er(t),n)).bind(t=>{let o=t.container.data;return Eo(t.container,r+o.length,n)})}},Ea=(t,r,n)=>{if(!n$(t))return et.none();let o=t.data;if(r<=o.length)return et.some(Ee(t,r));{let a=a0(Et);return et.from(a.forwards(t,r,Er(t),n)).bind(t=>Ea(t.container,r-o.length,n))}},El=(t,r,n,o,a)=>{let l=a0(t,r=>t.isBlock(r)||el(["BR","IMG","HR","INPUT"],r.nodeName)||"false"===t.getContentEditable(r));return et.from(l.backwards(r,n,o,a))},Ei=t=>""!==t&&-1!==" \xa0\f\n\r	\v".indexOf(t),Es=(t,r)=>t.substring(r.length),Ed=(t,r,n,o=!1)=>{if(!r.collapsed||!n$(r.startContainer))return et.none();let a={text:"",offset:0},l=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return El(t,r.startContainer,r.startOffset,(t,r,l)=>(a.text=l+a.text,a.offset+=r,((t,r,n,o=!1)=>{let a;let l=n.charAt(0);for(a=r-1;a>=0;a--){let i=t.charAt(a);if(!o&&Ei(i))return et.none();if(l===i&&e6(t,n,a,r))break}return et.some(a)})(a.text,a.offset,n,o).getOr(r)),l).bind(t=>{let o=r.cloneRange();if(o.setStart(t.container,t.offset),o.setEnd(r.endContainer,r.endOffset),o.collapsed)return et.none();let a=ln(o.toString().replace(/\u00A0/g," "));return 0!==a.lastIndexOf(n)?et.none():et.some({text:Es(a,n),range:o,trigger:n})})},Ec=t=>{if(3===t.nodeType)return Ee(t,t.data.length);{let r=t.childNodes;return r.length>0?Ec(r[r.length-1]):Ee(t,r.length)}},Eu=(t,r)=>{let n=t.childNodes;return n.length>0&&r<n.length?Eu(n[r],0):n.length>0&&1===t.nodeType&&n.length===r?Ec(n[n.length-1]):Ee(t,r)},Em=(t,r,n,o={})=>{var a;let l=r(),i=null!==(a=t.selection.getRng().startContainer.nodeValue)&&void 0!==a?a:"",s=em(l.lookupByTrigger(n.trigger),r=>n.text.length>=r.minChars&&r.matches.getOrThunk(()=>{let r;return r=t.dom,t=>!((t,r)=>{var n;let o=null!==(n=t.getParent(r.container,t.isBlock))&&void 0!==n?n:t.getRoot();return El(t,r.container,r.offset,(t,r)=>0===r?-1:r,o).filter(t=>!Ei(t.container.data.charAt(t.offset-1))).isSome()})(r,Eu(t.startContainer,t.startOffset))})(n.range,i,n.text));if(0===s.length)return et.none();let d=Promise.all(es(s,t=>t.fetch(n.text,t.maxResults,o).then(r=>({matchText:n.text,items:r,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))));return et.some({lookupData:d,context:n})};(c=h||(h={}))[c.Error=0]="Error",c[c.Value=1]="Value";let Eg=(t,r,n)=>t.stype===h.Error?r(t.serror):n(t.svalue),Ef=t=>({stype:h.Value,svalue:t}),Ep=t=>({stype:h.Error,serror:t}),Eh=t=>O(t)&&eO(t).length>100?" removed due to size":JSON.stringify(t,null,2),Eb=(t,r)=>Ep([{path:t,getErrorInfo:r}]),Ev=(t,r)=>({extract:(n,o)=>ej(o,t).fold(()=>Eb(n,()=>'Choice schema did not contain choice key: "'+t+'"'),t=>ej(r,t).fold(()=>Eb(n,()=>'The chosen schema: "'+t+'" did not exist in branches: '+Eh(r)),r=>r.extract(n.concat(["branch: "+t]),o))),toString:()=>"chooseOn("+t+"). Possible values: "+eO(r)}),Ey=t=>(...r)=>{if(0===r.length)throw Error("Can't merge zero objects");let n={};for(let o=0;o<r.length;o++){let a=r[o];for(let r in a)eH(a,r)&&(n[r]=t(n[r],a[r]))}return n},EC=Ey((t,r)=>B(t)&&B(r)?EC(t,r):r),EE=(Ey((t,r)=>r),t=>({tag:"defaultedThunk",process:q(t)})),Ew=t=>{var r;let n=(t=>{let r=[],n=[];return ed(t,t=>{Eg(t,t=>n.push(t),t=>r.push(t))}),{values:r,errors:n}})(t);return n.errors.length>0?(r=n.errors,$(Ep,ev)(r)):Ef(n.values)},Ex=(t,r,n)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},E_=t=>({extract:(r,n)=>{var o,a;return o=t(n),a=t=>Eb(r,q(t)),o.stype===h.Error?a(o.serror):o},toString:q("val")}),Ek=E_(Ef),ES=(t,r,n,o)=>o(ej(t,r).getOrThunk(()=>n(t))),EN=(t,r,n,o,a)=>{let l=t=>a.extract(r.concat([o]),t),i=t=>t.fold(()=>Ef(et.none()),t=>{var n;let l=a.extract(r.concat([o]),t);return n=et.some,l.stype===h.Value?{stype:h.Value,svalue:n(l.svalue)}:l});switch(t.tag){case"required":return ej(n,o).fold(()=>Eb(r,()=>'Could not find valid *required* value for "'+o+'" in '+Eh(n)),l);case"defaultedThunk":return ES(n,o,t.process,l);case"option":return i(ej(n,o));case"defaultedOptionThunk":let s;return s=t.process,i(ej(n,o).map(t=>!0===t?s(n):t));case"mergeWithThunk":return ES(n,o,q({}),r=>l(EC(t.process(n),r)))}},ER=t=>({extract:(r,n)=>((t,r,n)=>{let o={},a=[];for(let l of n)Ex(l,(n,l,i,s)=>{Eg(EN(i,t,r,n,s),t=>{a.push(...t)},t=>{o[l]=t})},(t,n)=>{o[t]=n(r)});return a.length>0?Ep(a):Ef(o)})(r,n,t),toString:()=>"obj{\n"+es(t,t=>Ex(t,(t,r,n,o)=>t+" -> "+o.toString(),(t,r)=>"state("+t+")")).join("\n")+"}"}),EA=t=>({extract:(r,n)=>Ew(es(n,(n,o)=>t.extract(r.concat(["["+o+"]"]),n))),toString:()=>"array("+t.toString()+")"}),ET=(t,r,n)=>{let o,a;return o=r.extract([t],n),a=t=>({input:n,errors:t}),Eg(o.stype===h.Error?{stype:h.Error,serror:a(o.serror)}:o,l9.error,l9.value)},EO=(t,r)=>Ev(t,eD(r,ER)),EB=q(Ek),EP=(t,r)=>E_(n=>{let o=typeof n;return t(n)?Ef(n):Ep(`Expected type: ${r} but got: ${o}`)}),ED=EP(z,"number"),EL=EP(T,"string"),EM=EP(L,"boolean"),EF=EP(U,"function"),EI=(t,r,n,o)=>({tag:"field",key:t,newKey:r,presence:n,prop:o}),EU=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),Ez=(t,r)=>EI(t,t,{tag:"required",process:{}},r),Ej=t=>Ez(t,EL),EH=t=>Ez(t,EF),E$=(t,r)=>EI(t,t,{tag:"option",process:{}},r),EV=t=>E$(t,EL),Eq=(t,r,n)=>EI(t,t,EE(r),n),EW=(t,r)=>Eq(t,r,ED),EK=(t,r,n)=>{var o;return Eq(t,r,(o=t=>el(n,t)?l9.value(t):l9.error(`Unsupported value: "${t}", choose one of "${n.join(", ")}".`),E_(t=>o(t).fold(Ep,Ef))))},EY=(t,r)=>Eq(t,r,EM),EG=(t,r)=>Eq(t,r,EF),EX=Ej("type"),EZ=EH("fetch"),EQ=EH("onAction"),EJ=EG("onSetup",()=>H),E0=EV("text"),E1=EV("icon"),E2=EV("tooltip"),E3=EV("label"),E8=EY("active",!1),E5=EY("enabled",!0),E6=EY("primary",!1),E4=t=>Eq("type",t,EL),E9=ER([EX,Ej("trigger"),EW("minChars",1),EI(o="columns",o,EE(1),EB()),EW("maxResults",10),E$("matches",EF),EZ,EQ,Eq("highlightOn",[],EA(EL))]),E7=[E5,E2,E1,E0,EJ],we=[E8].concat(E7),wt=[EG("predicate",J),EK("scope","node",["node","editor"]),EK("position","selection",["node","selection","line"])],wr=E7.concat([E4("contextformbutton"),E6,EQ,EU("original",W)]),wn=we.concat([E4("contextformbutton"),E6,EQ,EU("original",W)]),wo=E7.concat([E4("contextformbutton")]),wa=we.concat([E4("contextformtogglebutton")]),wl=EO("type",{contextformbutton:wr,contextformtogglebutton:wn});ER([E4("contextform"),EG("initValue",q("")),E3,EI(a="commands",a,{tag:"required",process:{}},EA(wl)),E$("launch",EO("type",{contextformbutton:wo,contextformtogglebutton:wa}))].concat(wt));let wi=t=>{let r=eD(t.ui.registry.getAll().popups,t=>ET("Autocompleter",E9,t).fold(t=>{var r;throw Error("Errors: \n"+es((r=t.errors).length>10?r.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):r,t=>"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()).join("\n")+"\n\nInput object: "+Eh(t.input))},W)),n=eV(eU(r,t=>t.trigger)),o=ez(r);return{dataset:r,triggers:n,lookupByTrigger:t=>em(o,r=>r.trigger===t)}},ws=t=>{let r=oo(),n=or(!1),o=r.isSet,a=()=>{o()&&((t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),r.clear())},l=eJ(()=>wi(t)),i=i=>{r.get().map(r=>Ed(t.dom,t.selection.getRng(),r.trigger,!0).bind(r=>Em(t,l,r,i))).getOrThunk(()=>((t,r)=>{let n;let o=r(),a=t.selection.getRng();return(n=t.dom,eA(o.triggers,t=>Ed(n,a,t))).bind(n=>Em(t,r,n))})(t,l)).fold(a,a=>{var l;l=a.context,o()||r.set({trigger:l.trigger,matchLength:l.text.length}),a.lookupData.then(o=>{r.get().map(l=>{let i=a.context;l.trigger===i.trigger&&(r.set({...l,matchLength:i.text.length}),n.get()?(cY(t,{range:i.range}),((t,r)=>{t.dispatch("AutocompleterUpdate",r)})(t,{lookupData:o})):(n.set(!0),cY(t,{range:i.range}),((t,r)=>{t.dispatch("AutocompleterStart",r)})(t,{lookupData:o})))})})})},s=()=>r.get().bind(({trigger:r})=>{let o=t.selection.getRng();return Ed(t.dom,o,r,n.get()).filter(({range:t})=>((t,r)=>{let n=t.compareBoundaryPoints(window.Range.START_TO_START,r),o=t.compareBoundaryPoints(window.Range.END_TO_END,r);return n>=0&&o<=0})(o,t)).map(({range:t})=>t)});t.addCommand("mceAutocompleterReload",(t,r)=>{i(O(r)?r.fetchOptions:{})}),t.addCommand("mceAutocompleterClose",a),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{s().each(r=>{cY(t,{range:r})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>s().isSome()),((t,r)=>{let n=aM(r.load,50);t.on("input",r=>{("insertCompositionText"!==r.inputType||t.composing)&&n.throttle()}),t.on("keydown",t=>{let o=t.which;8===o?n.throttle():27===o?(n.cancel(),r.cancelIfNecessary()):38!==o&&40!==o||n.cancel()},!0),t.on("remove",n.cancel)})(t,{cancelIfNecessary:a,load:i})},wd=tA().browser.isSafari(),wc=t=>lr(ru(t)),wu=(t,r)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=r.textContent)||void 0===n?void 0:n.length)},wm=(t,r)=>et.from(t.getParent(r.container(),"details")),wg=(t,r)=>wm(t,r).isSome(),wf=(t,r)=>{let n=r.getNode();M(n)||t.selection.setCursorLocation(n,r.offset())},wp=(t,r,n)=>{let o=t.dom.getParent(r.container(),"details");if(o&&!o.open){let r=t.dom.select("summary",o)[0];r&&(n?dL(r):dM(r)).each(r=>wf(t,r))}else wf(t,r)},wh=(t,r,n)=>{let{dom:o,selection:a}=t,l=t.getBody();if("character"===n){let n=l$.fromRangeStart(a.getRng()),i=o.getParent(n.container(),o.isBlock),s=wm(o,n),d=i&&o.isEmpty(i),c=D(null==i?void 0:i.previousSibling),u=D(null==i?void 0:i.nextSibling);return!!(d&&(r?u:c)&&dT(!r,l,n).exists(t=>wg(o,t)&&!tH(s,wm(o,t))))||dT(r,l,n).fold(J,n=>{let a=wm(o,n);if(wg(o,n)&&!tH(s,a)){if(r||wp(t,n,!1),i&&d){if(r&&c||!r&&u)return!0;wp(t,n,r),t.dom.remove(i)}return!0}return!1})}return!1},wb=(t,r,n,o)=>{let a=t.selection.getRng(),l=l$.fromRangeStart(a),i=t.getBody();return"selection"===o?((t,r)=>{let n=r.startSummary.exists(r=>r.contains(t.startContainer)),o=r.startSummary.exists(r=>r.contains(t.endContainer)),a=r.startDetails.forall(t=>r.endDetails.forall(r=>t!==r));return(n||o)&&!(n&&o)||a})(a,r):n?r.startSummary.exists(t=>dM(t).exists(r=>nG(r.getNode())&&dD(t,r).exists(t=>t.isEqual(l))||r.isEqual(l)))||r.startDetails.exists(t=>dP(i,l).forall(r=>!t.contains(r.container()))):r.startSummary.exists(t=>dL(t).exists(t=>t.isEqual(l)))||r.startDetails.exists(t=>dD(t,l).forall(t=>r.startSummary.exists(r=>!r.contains(l.container())&&r.contains(t.container()))))},wv=(t,r,n)=>((t,r)=>{let n=et.from(t.getParent(r.startContainer,"details")),o=et.from(t.getParent(r.endContainer,"details"));if(n.isSome()||o.isSome()){let r=n.bind(r=>et.from(t.select("summary",r)[0]));return et.some({startSummary:r,startDetails:n,endDetails:o})}return et.none()})(t.dom,t.selection.getRng()).fold(()=>wh(t,r,n),o=>wb(t,o,r,n)||wh(t,r,n))||wd&&((t,r,n)=>{let o=t.selection,a=o.getNode(),l=o.getRng(),i=l$.fromRangeStart(l);return!!n8(a)&&("selection"===n&&wu(l,a)||gI(r,i,a)?wc(a):t.undoManager.transact(()=>{let l=o.getSel(),{anchorNode:i,anchorOffset:s,focusNode:d,focusOffset:c}=null!=l?l:{},u=()=>{I(i)&&I(s)&&I(d)&&I(c)&&(null==l||l.setBaseAndExtent(i,s,d,c))},m=(t,r)=>{ed(t.childNodes,t=>{cr(t)&&r.appendChild(t)})},g=t.dom.create("span",{"data-mce-bogus":"1"});m(a,g),a.appendChild(g),u(),"word"!==n&&"line"!==n||null==l||l.modify("extend",r?"right":"left",n),!o.isCollapsed()&&wu(o.getRng(),g)?wc(a):(t.execCommand(r?"ForwardDelete":"Delete"),i=null==l?void 0:l.anchorNode,s=null==l?void 0:l.anchorOffset,d=null==l?void 0:l.focusNode,c=null==l?void 0:l.focusOffset,m(g,a),u()),t.dom.remove(g)}),!0)})(t,r,n)?et.some(H):et.none(),wy=t=>(r,n,o={})=>{let a=r.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:H,inputType:n},i=ac(new InputEvent(t));return r.dispatch(t,{...i,...l,...o})},wC=wy("input"),wE=wy("beforeinput"),ww=tA(),wx=ww.os,w_=wx.isMacOS()||wx.isiOS(),wk=ww.browser.isFirefox(),wS=(t,r)=>{let n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!r)return;if(/^(LI|DT|DD)$/.test(r.nodeName)){let t=(t=>{for(;t;){if(nD(t)||n$(t)&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}return null})(r.firstChild);t&&/^(UL|OL|DL)$/.test(t.nodeName)&&r.insertBefore(n.doc.createTextNode("\xa0"),r.firstChild)}let a=n.createRng();if(r.normalize(),r.hasChildNodes()){let t=new nS(r,r),n,l=r;for(;n=t.current();){if(n$(n)){a.setStart(n,0),a.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}l=n,n=t.next()}n||(a.setStart(l,0),a.setEnd(l,0))}else nG(r)?r.nextSibling&&n.isBlock(r.nextSibling)?(a.setStartBefore(r),a.setEndBefore(r)):(a.setStartAfter(r),a.setEndAfter(r)):(a.setStart(r,0),a.setEnd(r,0));t.selection.setRng(a),uI(t,a)},wN=(t,r)=>{let n=t.getRoot(),o,a=r;for(;a!==n&&a&&"false"!==t.getContentEditable(a);){if("true"===t.getContentEditable(a)){o=a;break}a=a.parentNode}return a!==n?o:n},wR=t=>et.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),wA=t=>{t.innerHTML='<br data-mce-bogus="1">'},wT=(t,r)=>{ix(t).toLowerCase()===r.tagName.toLowerCase()&&((t,r,n)=>{let o=t.dom;et.from(n.style).map(o.parseStyle).each(t=>{let n={...r4(ru(r)),...t};o.setStyles(r,n)}),t$(et.from(n.class).map(t=>t.split(/\s+/)),et.from(r.className).map(t=>em(t.split(/\s+/),t=>""!==t)),(t,n)=>{let a=em(n,r=>!el(t,r)),l=[...t,...a];o.setAttrib(r,"class",l.join(" "))});let a=["style","class"],l=eI(n,(t,r)=>!el(a,r));o.setAttribs(r,l)})(t,r,i_(t))},wO=(t,r,n,o,a=!0,l,i)=>{let s;let d=t.dom,c=t.schema,u=ix(t),m=n?n.nodeName.toUpperCase():"",g=r,f=c.getTextInlineElements(),p=s=l||"TABLE"===m||"HR"===m?d.create(l||u,i||{}):n.cloneNode(!1);if(a)do if(f[g.nodeName]){if(dI(g)||dZ(g))continue;let t=g.cloneNode(!1);d.setAttrib(t,"id",""),s.hasChildNodes()?t.appendChild(s.firstChild):p=t,s.appendChild(t)}while((g=g.parentNode)&&g!==o);else d.setAttrib(s,"style",null),d.setAttrib(s,"class",null);return wT(t,s),wA(p),s},wB=(t,r)=>{let n=null==t?void 0:t.parentNode;return I(n)&&n.nodeName===r},wP=t=>I(t)&&/^(OL|UL|LI)$/.test(t.nodeName),wD=t=>I(t)&&/^(LI|DT|DD)$/.test(t.nodeName),wL=t=>{let r=t.parentNode;return wD(r)?r:t},wM=(t,r,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nD(o);)o=o[n?"nextSibling":"previousSibling"];return o===r},wF=t=>ef(eU(r4(ru(t)),(t,r)=>`${r}: ${t};`),(t,r)=>t+r,""),wI=(t,r)=>r&&"A"===r.nodeName&&t.isEmpty(r),wU=(t,r)=>t.nodeName===r||t.previousSibling&&t.previousSibling.nodeName===r,wz=(t,r)=>I(r)&&t.isBlock(r)&&!/^(TD|TH|CAPTION|FORM)$/.test(r.nodeName)&&!/^(fixed|absolute)/i.test(r.style.position)&&t.isEditable(r.parentNode)&&"false"!==t.getContentEditable(r),wj=(t,r,n)=>n$(r)?t?1===n&&"\uFEFF"===r.data.charAt(n-1)?0:n:n===r.data.length-1&&"\uFEFF"===r.data.charAt(n)?r.data.length:n:n,wH={insert:(t,r)=>{let n,o,a,l,i,s,d=!1,c=t.dom,u=t.schema.getNonEmptyElements(),m=t.selection.getRng(),g=ix(t),f=ru(m.startContainer),p=rB(f,m.startOffset),h=p.exists(t=>tQ(t)&&!rQ(t)),b=m.collapsed&&h,v=(r,n)=>wO(t,a,_,x,iR(t),r,n),y=t=>{let r;let n=wj(t,a,l);if(n$(a)&&(t?n>0:n<a.data.length))return!1;if((a.parentNode===_||a===_)&&d&&!t||t&&nD(a)&&a===_.firstChild)return!0;if(wU(a,"TABLE")||wU(a,"HR"))return d&&!t||!d&&t;let o=new nS(a,_);for(n$(a)&&(t&&0===n?o.prev():t||n!==a.data.length||o.next());r=o.current();){if(nD(r)){if(!r.getAttribute("data-mce-bogus")){let t=r.nodeName.toLowerCase();if(u[t]&&"br"!==t)return!1}}else if(n$(r)&&!nA(r.data))return!1;t?o.prev():o.next()}return!0},C=()=>{let r;return r=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==k?v(g):v(),((t,r)=>{let n=iA(t);return!F(r)&&(T(n)?el(tz.explode(n),r.nodeName.toLowerCase()):n)})(t,s)&&wz(c,s)&&c.isEmpty(_,void 0,{includeZwsp:!0})?r=c.split(s,_):c.insertAfter(r,_),wS(t,r),r};up(c,m).each(t=>{m.setStart(t.startContainer,t.startOffset),m.setEnd(t.endContainer,t.endOffset)}),a=m.startContainer,l=m.startOffset;let E=!(!r||!r.shiftKey),w=!(!r||!r.ctrlKey);nD(a)&&a.hasChildNodes()&&!b&&(d=l>a.childNodes.length-1,a=a.childNodes[Math.min(l,a.childNodes.length-1)]||a,l=d&&n$(a)?a.data.length:0);let x=wN(c,a);if(!x||((t,r)=>{let n=t.dom.getParent(r,"ol,ul,dl");return null!==n&&"false"===t.dom.getContentEditableParent(n)})(t,a))return;E||(a=((t,r,n,o,a)=>{var l,i;let s=t.dom,d=null!==(l=wN(s,o))&&void 0!==l?l:s.getRoot(),c=s.getParent(o,s.isBlock);if(!c||!wz(s,c)){if(!(c=c||d).hasChildNodes()){let o=s.create(r);return wT(t,o),c.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o}let l,u=o;for(;u&&u.parentNode!==c;)u=u.parentNode;for(;u&&!s.isBlock(u);)l=u,u=u.previousSibling;let m=null===(i=null==l?void 0:l.parentElement)||void 0===i?void 0:i.nodeName;if(l&&m&&t.schema.isValidChild(m,r.toLowerCase())){let i=l.parentNode,d=s.create(r);for(wT(t,d),i.insertBefore(d,l),u=l;u&&!s.isBlock(u);){let t=u.nextSibling;d.appendChild(u),u=t}n.setStart(o,a),n.setEnd(o,a)}}return o})(t,g,m,a,l));let _=c.getParent(a,c.isBlock)||c.getRoot();s=I(null==_?void 0:_.parentNode)?c.getParent(_.parentNode,c.isBlock):null,i=_?_.nodeName.toUpperCase():"";let k=s?s.nodeName.toUpperCase():"";if("LI"!==k||w||(_=s,s=s.parentNode,i=k),nD(s)&&(n=_,!E&&n.nodeName.toLowerCase()===ix(t)&&t.dom.isEmpty(n)&&((r,n,o)=>{let a=n;for(;a&&a!==r&&D(a.nextSibling);){let r=a.parentElement;if(!r||!eH(t.schema.getTextBlockElements(),r.nodeName.toLowerCase()))return n3(r);a=r}return!1})(t.getBody(),n)))return((t,r,n)=>{var o,a,l;let i=r(ix(t)),s=t.dom.getParent(n,n3);s&&(t.dom.insertAfter(i,s),wS(t,i),(null!==(l=null===(a=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===a?void 0:a.length)&&void 0!==l?l:0)>1&&t.dom.remove(n))})(t,v,_);if(/^(LI|DT|DD)$/.test(i)&&nD(s)&&c.isEmpty(_))return void((t,r,n,o,a)=>{var l,i,s;let d=t.dom,c=t.selection.getRng(),u=n.parentNode;if(n===t.getBody()||!u)return;wP(l=n)&&wP(l.parentNode)&&(a="LI");let m=wD(o)?wF(o):void 0,g=wD(o)&&m?r(a,{style:wF(o)}):r(a);if(wM(n,o,!0)&&wM(n,o,!1)){if(wB(n,"LI")){let t=wL(n);d.insertAfter(g,t),(null===(s=(i=n).parentNode)||void 0===s?void 0:s.firstChild)===i?d.remove(t):d.remove(n)}else d.replace(g,n)}else if(wM(n,o,!0))wB(n,"LI")?(d.insertAfter(g,wL(n)),g.appendChild(d.doc.createTextNode(" ")),g.appendChild(n)):u.insertBefore(g,n),d.remove(o);else if(wM(n,o,!1))d.insertAfter(g,wL(n)),d.remove(o);else{let t;n=wL(n);let r=c.cloneRange();r.setStartAfter(o),r.setEndAfter(n);let l=r.extractContents();if("LI"===a&&(t=l).firstChild&&"LI"===t.firstChild.nodeName){let t=em(es(g.children,ru),G(t3("br")));g=l.firstChild,d.insertAfter(l,n),ed(t,t=>nt(ru(g),t)),m&&g.setAttribute("style",m)}else d.insertAfter(l,n),d.insertAfter(g,n);d.remove(o)}wS(t,g)})(t,v,s,_,g);if(!(b||_!==t.getBody()&&wz(c,_)))return;let S=_.parentNode;if(b)o=v(g),p.fold(()=>{nr(f,ru(o))},t=>{r7(t,ru(o))}),t.selection.setCursorLocation(o,0);else if(lo(_))o=lm(_),c.isEmpty(_)&&wA(_),wT(t,o),wS(t,o);else if(y(!1))o=C();else if(y(!0)&&S){o=S.insertBefore(v(),_);let r=ru(m.startContainer).dom.hasChildNodes()&&m.collapsed;wS(t,wU(_,"HR")||r?o:_)}else{let r=(t=>{let r=t.cloneRange();return r.setStart(t.startContainer,wj(!0,t.startContainer,t.startOffset)),r.setEnd(t.endContainer,wj(!1,t.endContainer,t.endOffset)),r})(m).cloneRange();r.setEndAfter(_);let n=r.extractContents();ed(nE(ru(n),t0),t=>{let r=t.dom;r.nodeValue=ln(r.data)}),(t=>{let r=t;do n$(r)&&(r.data=r.data.replace(/^[\r\n]+/,"")),r=r.firstChild;while(r)})(n),o=n.firstChild,c.insertAfter(n,_),((t,r,n)=>{var o;let a=[];if(!n)return;let l=n;for(;l=l.firstChild;){if(t.isBlock(l))return;nD(l)&&!r[l.nodeName.toLowerCase()]&&a.push(l)}let i=a.length;for(;i--;)(!(l=a[i]).hasChildNodes()||l.firstChild===l.lastChild&&""===(null===(o=l.firstChild)||void 0===o?void 0:o.nodeValue)||wI(t,l))&&t.remove(l)})(c,u,o),((t,r)=>{r.normalize();let n=r.lastChild;(!n||nD(n)&&/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(r,"br")})(c,_),c.isEmpty(_)&&wA(_),o.normalize(),c.isEmpty(o)?(c.remove(o),C()):(wT(t,o),wS(t,o))}c.setAttrib(o,"id",""),t.dispatch("NewBlock",{newBlock:o})},fakeEventName:"insertParagraph"},w$=(t,r,n)=>{let o=t.dom.createRng();n?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),t.selection.setRng(o),uI(t,o)},wV=(t,r)=>{let n=rg("br");r7(ru(r),n),t.undoManager.add()},wq=(t,r)=>{wW(t.getBody(),r)||ne(ru(r),rg("br"));let n=rg("br");ne(ru(r),n),w$(t,n.dom,!1),t.undoManager.add()},wW=(t,r)=>!!nG(l$.after(r).getNode())||dP(t,l$.after(r)).map(t=>nG(t.getNode())).getOr(!1),wK=t=>t&&"A"===t.nodeName&&"href"in t,wY=t=>t.fold(J,wK,wK,J),wG=(t,r)=>{r.fold(H,Y(wV,t),Y(wq,t),H)},wX={insert:(t,r)=>{let n=(t=>{let r=Y(gN,t),n=l$.fromRangeStart(t.selection.getRng());return yt(r,t.getBody(),n).filter(wY)})(t);n.isSome()?n.each(Y(wG,t)):((t,r)=>{let n=t.selection,o=t.dom,a=n.getRng(),l,i=!1;up(o,a).each(t=>{a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});let s=a.startOffset,d=a.startContainer;if(nD(d)&&d.hasChildNodes()){let t=s>d.childNodes.length-1;d=d.childNodes[Math.min(s,d.childNodes.length-1)]||d,s=t&&n$(d)?d.data.length:0}let c=o.getParent(d,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",g=!(!r||!r.ctrlKey);"LI"!==m||g||(c=u),n$(d)&&s>=d.data.length&&(((t,r,n)=>{let o;let a=new nS(r,n),l=t.getNonEmptyElements();for(;o=a.next();)if(l[o.nodeName.toLowerCase()]||n$(o)&&o.length>0)return!0;return!1})(t.schema,d,c||o.getRoot())||(l=o.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),i=!0)),l=o.create("br"),lq(o,a,l),w$(t,l,i),t.undoManager.add()})(t,r)},fakeEventName:"insertLineBreak"},wZ=(t,r)=>wR(t).filter(t=>r.length>0&&rb(ru(t),r)).isSome(),wQ=l7([{br:[]},{block:[]},{none:[]}]),wJ=(t,r)=>wZ(t,iN(t)),w0=t=>(r,n)=>wR(r).filter(t=>a4(ru(t))).isSome()===t,w1=(t,r)=>(n,o)=>wR(n).fold(q(""),t=>t.nodeName.toUpperCase())===t.toUpperCase()===r,w2=t=>F(wN(t.dom,t.selection.getStart())),w3=t=>w1("pre",t),w8=t=>(r,n)=>iw(r)===t,w5=(t,r)=>wZ(t,iS(t)),w6=(t,r)=>r,w4=t=>{let r=ix(t),n=wN(t.dom,t.selection.getStart());return I(n)&&t.schema.isValidChild(n.nodeName,r)},w9=t=>{let r=t.selection.getRng(),n=rB(ru(r.startContainer),r.startOffset).map(t=>tQ(t)&&!rQ(t));return r.collapsed&&n.getOr(!0)},w7=(t,r)=>(n,o)=>ef(t,(t,r)=>t&&r(n,o),!0)?et.some(r):et.none(),xe=(t,r,n)=>{r.selection.isCollapsed()||(t=>{t.execCommand("delete")})(r),I(n)&&wE(r,t.fakeEventName).isDefaultPrevented()||(t.insert(r,n),I(n)&&wC(r,t.fakeEventName))},xt=(t,r)=>{let n=()=>xe(wX,t,r),o=()=>xe(wH,t,r),a=v1([w7([wJ],wQ.none()),w7([w3(!0),w2],wQ.none()),w7([w1("summary",!0)],wQ.br()),w7([w3(!0),w8(!1),w6],wQ.br()),w7([w3(!0),w8(!1)],wQ.block()),w7([w3(!0),w8(!0),w6],wQ.block()),w7([w3(!0),w8(!0)],wQ.br()),w7([w0(!0),w6],wQ.br()),w7([w0(!0)],wQ.block()),w7([w5],wQ.br()),w7([w6],wQ.br()),w7([w4],wQ.block()),w7([w9],wQ.block())],[t,!(!r||!r.shiftKey)]).getOr(wQ.none());switch(ik(t)){case"linebreak":a.fold(n,n,H);break;case"block":a.fold(o,o,H);break;case"invert":a.fold(o,n,H);break;default:a.fold(n,o,H)}},xr=tA(),xn=xr.os.isiOS()&&xr.browser.isSafari(),xo=(t,r)=>{var n;r.isDefaultPrevented()||(r.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{xt(t,r)}))},xa=tA(),xl=t=>t.stopImmediatePropagation(),xi=t=>t.keyCode===cX.PAGE_UP||t.keyCode===cX.PAGE_DOWN,xs=(t,r,n)=>{n&&!t.get()?r.on("NodeChange",xl,!0):!n&&t.get()&&r.off("NodeChange",xl),t.set(n)},xd=(t,r)=>{let n=r.container(),o=r.offset();return n$(n)?(n.insertData(o,t),et.some(l$(n,o+t.length))):dv(r).map(n=>{let o=rf(t);return r.isAtEnd()?ne(n,o):r7(n,o),l$(o.dom,t.length)})},xc=Y(xd,"\xa0"),xu=Y(xd," "),xm=t=>r=>{t.selection.setRng(r.toRange()),t.nodeChanged()},xg=t=>{let r=l$.fromRangeStart(t.selection.getRng()),n=ru(t.getBody());if(t.selection.isCollapsed()){let o=Y(gN,t),a=l$.fromRangeStart(t.selection.getRng());return yt(o,t.getBody(),a).bind(t=>t.fold(t=>dD(n.dom,l$.before(t)),t=>dL(t),t=>dM(t),t=>dP(n.dom,l$.after(t)))).map(o=>()=>{let a;return(a=t.schema,t=>gl(n,t,a)?xc(r):xu(r))(o).each(xm(t))})}return et.none()},xf=t=>{var r,n;return tV(tM.browser.isFirefox()&&t.selection.isEditable()&&(r=t.dom,n=t.selection.getRng().startContainer,r.isEditable(r.getParent(n,"summary"))),()=>{let r;let n=ru(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(gl(n,r=l$.fromRangeStart(t.selection.getRng()),t.schema)?xc(r):xu(r)).each(xm(t))})},xp=t=>sW(t)?[{keyCode:cX.TAB,action:CD(C7,t,!0)},{keyCode:cX.TAB,shiftKey:!0,action:CD(C7,t,!1)}]:[],xh=t=>{if(t.addShortcut("Meta+P","","mcePrint"),ws(t),bm(t))return or(null);{let r,n;let o=yY(t);return(t=>{t.on("beforeinput",r=>{t.selection.isEditable()&&!ei(r.getTargetRanges(),r=>!u7(t.dom,r))||r.preventDefault()})})(t),(t=>{t.on("keyup compositionstart",Y(Cx,t))})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tM.os.isMacOS()||tM.os.isiOS();CL([{keyCode:cX.RIGHT,action:CD(Ck,t,!0)},{keyCode:cX.LEFT,action:CD(Ck,t,!1)},{keyCode:cX.UP,action:CD(CS,t,!1)},{keyCode:cX.DOWN,action:CD(CS,t,!0)},...o?[{keyCode:cX.UP,action:CD(CR,t,!1),metaKey:!0,shiftKey:!0},{keyCode:cX.DOWN,action:CD(CR,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:cX.RIGHT,action:CD(C8,t,!0)},{keyCode:cX.LEFT,action:CD(C8,t,!1)},{keyCode:cX.UP,action:CD(C5,t,!1)},{keyCode:cX.DOWN,action:CD(C5,t,!0)},{keyCode:cX.UP,action:CD(C5,t,!1)},{keyCode:cX.UP,action:CD(CO,t,!1)},{keyCode:cX.DOWN,action:CD(CO,t,!0)},{keyCode:cX.RIGHT,action:CD(CF,t,!0)},{keyCode:cX.LEFT,action:CD(CF,t,!1)},{keyCode:cX.UP,action:CD(CI,t,!1)},{keyCode:cX.DOWN,action:CD(CI,t,!0)},{keyCode:cX.RIGHT,action:CD(yW,t,r,!0)},{keyCode:cX.LEFT,action:CD(yW,t,r,!1)},{keyCode:cX.RIGHT,ctrlKey:!o,altKey:o,action:CD(yG,t,r)},{keyCode:cX.LEFT,ctrlKey:!o,altKey:o,action:CD(yX,t,r)},{keyCode:cX.UP,action:CD(CT,t,!1)},{keyCode:cX.DOWN,action:CD(CT,t,!0)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),r=!1,t.on("keydown",n=>{r=n.keyCode===cX.BACKSPACE,n.isDefaultPrevented()||((t,r,n)=>{let o=n.keyCode===cX.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=t.selection.isCollapsed(),l=a?"character":"selection",i=t=>a?t?"word":"line":"selection";CM([{keyCode:cX.BACKSPACE,action:CD(Cc,t)},{keyCode:cX.BACKSPACE,action:CD(vV,t,!1)},{keyCode:cX.DELETE,action:CD(vV,t,!0)},{keyCode:cX.BACKSPACE,action:CD(vM,t,!1)},{keyCode:cX.DELETE,action:CD(vM,t,!0)},{keyCode:cX.BACKSPACE,action:CD(y0,t,r,!1)},{keyCode:cX.DELETE,action:CD(y0,t,r,!0)},{keyCode:cX.BACKSPACE,action:CD(fr,t,!1)},{keyCode:cX.DELETE,action:CD(fr,t,!0)},{keyCode:cX.BACKSPACE,action:CD(wv,t,!1,l)},{keyCode:cX.DELETE,action:CD(wv,t,!0,l)},...w_?[{keyCode:cX.BACKSPACE,altKey:!0,action:CD(wv,t,!1,i(!0))},{keyCode:cX.DELETE,altKey:!0,action:CD(wv,t,!0,i(!0))},{keyCode:cX.BACKSPACE,metaKey:!0,action:CD(wv,t,!1,i(!1))}]:[{keyCode:cX.BACKSPACE,ctrlKey:!0,action:CD(wv,t,!1,i(!0))},{keyCode:cX.DELETE,ctrlKey:!0,action:CD(wv,t,!0,i(!0))}],{keyCode:cX.BACKSPACE,action:CD(vq,t,!1)},{keyCode:cX.DELETE,action:CD(vq,t,!0)},{keyCode:cX.BACKSPACE,action:CD(Cr,t,!1)},{keyCode:cX.DELETE,action:CD(Cr,t,!0)},{keyCode:cX.BACKSPACE,action:CD(vA,t,!1)},{keyCode:cX.DELETE,action:CD(vA,t,!0)},{keyCode:cX.BACKSPACE,action:CD(vS,t,!1)},{keyCode:cX.DELETE,action:CD(vS,t,!0)},{keyCode:cX.BACKSPACE,action:CD(y7,t,!1)},{keyCode:cX.DELETE,action:CD(y7,t,!0)}],n).filter(r=>t.selection.isEditable()).each(r=>{n.preventDefault(),wE(t,o).isDefaultPrevented()||(r(),wC(t,o))})})(t,o,n)}),t.on("keyup",n=>{var o;n.isDefaultPrevented()||(o=r,CL([{keyCode:cX.BACKSPACE,action:CD(v$,t)},{keyCode:cX.DELETE,action:CD(v$,t)},...w_?[{keyCode:cX.BACKSPACE,altKey:!0,action:CD(Ce,t)},{keyCode:cX.DELETE,altKey:!0,action:CD(Ce,t)},...o?[{keyCode:wk?224:91,action:CD(Ce,t)}]:[]]:[{keyCode:cX.BACKSPACE,ctrlKey:!0,action:CD(Ce,t)},{keyCode:cX.DELETE,ctrlKey:!0,action:CD(Ce,t)}]],n)),r=!1}),n=et.none(),t.on("keydown",r=>{r.keyCode===cX.ENTER&&(xn&&(t=>{if(!t.collapsed)return!1;let r=t.startContainer;if(n$(r)){let n=r.data.charAt(t.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(n)}return!1})(t.selection.getRng())?(n=et.some(t.selection.getBookmark()),t.undoManager.add()):xo(t,r))}),t.on("keyup",r=>{r.keyCode===cX.ENTER&&n.each(()=>{t.undoManager.undo(),n.fold(H,r=>t.selection.moveToBookmark(r)),xo(t,r),n=et.none()})}),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CM([{keyCode:cX.SPACEBAR,action:CD(xg,t)},{keyCode:cX.SPACEBAR,action:CD(xf,t)}],r).each(n=>{r.preventDefault(),wE(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),wC(t,"insertText",{data:" "}))})})(t,r)})})(t),(t=>{t.on("input",r=>{r.isComposing||(t=>{let r=ru(t.getBody());t.selection.isCollapsed()&&gf(r,l$.fromRangeStart(t.selection.getRng()),t.schema).each(r=>{t.selection.setRng(r.toRange())})})(t)})})(t),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CL([...xp(t)],r).each(t=>{r.preventDefault()})})(t,r)})})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tM.os.isMacOS()||tM.os.isiOS();CL([{keyCode:cX.END,action:CD(CN,t,!0)},{keyCode:cX.HOME,action:CD(CN,t,!1)},...o?[]:[{keyCode:cX.HOME,action:CD(CR,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:cX.END,action:CD(CR,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:cX.END,action:CD(CU,t,!0)},{keyCode:cX.HOME,action:CD(CU,t,!1)},{keyCode:cX.END,action:CD(yZ,t,!0,r)},{keyCode:cX.HOME,action:CD(yZ,t,!1,r)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),((t,r)=>{if(xa.os.isMacOS())return;let n=or(!1);t.on("keydown",r=>{xi(r)&&xs(n,t,!0)}),t.on("keyup",o=>{o.isDefaultPrevented()||CL([{keyCode:cX.PAGE_UP,action:CD(yZ,t,!1,r)},{keyCode:cX.PAGE_DOWN,action:CD(yZ,t,!0,r)}],o),xi(o)&&n.get()&&(xs(n,t,!1),t.nodeChanged())})})(t,o),o}};class xb{constructor(t){let r;this.lastPath=[],this.editor=t;let n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",n=>{let o=t.selection.getRng(),a={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&us(a,r)||t.dispatch("SelectionChange"),r=a}),t.on("contextmenu",()=>{uY(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{let r=t.selection.getStart(!0);r&&d7(t)&&!n.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&d7(t)&&("IMG"===t.selection.getNode().nodeName?uZ.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){let r;let n=this.editor.selection;if(this.editor.initialized&&n&&!si(this.editor)&&!this.editor.mode.isReadOnly()){let o=this.editor.getBody();(r=n.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);let a=[];this.editor.dom.getParent(r,t=>t===o||(a.push(t),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let r;let n=this.editor,o=eE(n.dom.getParents(t,ee,n.getBody()));if(o.length===this.lastPath.length){for(r=o.length;r>=0&&o[r]===this.lastPath[r];r--);if(-1===r)return this.lastPath=o,!0}return this.lastPath=o,!1}}let xv=aG("image"),xy=aG("event"),xC=t=>r=>{r[xy]=t},xE=xC(0),xw=xC(2),xx=xC(1),x_=t=>et.from(t[xy]).exists(t=>0===t),xk=aG("mode"),xS=t=>r=>{r[xk]=t},xN=(t,r)=>xS(r)(t),xR=xS(0),xA=xS(2),xT=xS(1),xO=t=>r=>et.from(r[xk]).exists(r=>r===t),xB=xO(0),xP=xO(1),xD=["none","copy","link","move"],xL=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xM=()=>{let t=new window.DataTransfer,r="move",n="all",o={get dropEffect(){return r},set dropEffect(e){el(xD,e)&&(r=e)},get effectAllowed(){return n},set effectAllowed(e){x_(o)&&el(xL,e)&&(n=e)},get items(){let r;return{...r=t.items,get length(){return r.length},add:(t,n)=>{if(xB(o)){if(!T(t))return r.add(t);if(!M(n))return r.add(t,n)}return null},remove:t=>{xB(o)&&r.remove(t)},clear:()=>{xB(o)&&r.clear()}}},get files(){return xP(o)?Object.freeze({length:0,item:t=>null}):t.files},get types(){return t.types},setDragImage:(r,n,a)=>{var l;xB(o)&&(l={image:r,x:n,y:a},o[xv]=l,t.setDragImage(r,n,a))},getData:r=>xP(o)?"":t.getData(r),setData:(r,n)=>{xB(o)&&t.setData(r,n)},clearData:r=>{xB(o)&&t.clearData(r)}};return xR(o),o},xF=(t,r)=>t.setData("text/html",r),xI="x-tinymce/html",xU=q(xI),xz="<!-- "+xI+" -->",xj=t=>xz+t,xH=t=>-1!==t.indexOf(xz),x$="%MCEPASTEBIN%",xV=t=>t.dom.get("mcepastebin"),xq=t=>I(t)&&"mcepastebin"===t.id,xW=t=>t===x$,xK=(t,r)=>(tz.each(r,r=>{t=A(r,RegExp)?t.replace(r,""):t.replace(r[0],r[1])}),t),xY=t=>xK(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,r,n)=>r||n?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),xG=(t,r)=>({content:t,cancelled:r}),xX=(t,r)=>(t.insertContent(r,{merge:sO(t),paste:!0}),!0),xZ=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),xQ=(t,r,n)=>!(t.selection.isCollapsed()||!xZ(r))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.execCommand("mceInsertLink",!1,r)}),!0),xJ=(t,r,n)=>!!(xZ(r)&&ei(sq(t),t=>e9(r.toLowerCase(),`.${t.toLowerCase()}`)))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.insertContent('<img src="'+r+'">')}),!0),x0=(l=0,()=>"mceclip"+l++),x1=t=>{let r=xM();return xF(r,t),xA(r),r},x2=(t,r,n,o,a)=>{let l=((t,r,n)=>{let o=t.dispatch("PastePreProcess",{content:r,internal:n}),a=((t,r)=>{let n=hH({sanitize:s$(t),sandbox_iframes:sG(t),sandbox_iframes_exclusions:sX(t),convert_unsafe_embeds:sZ(t)},t.schema);n.addNodeFilter("meta",t=>{tz.each(t,t=>{t.remove()})});let o=n.parse(r,{forced_root_block:!1,isRootContent:!0});return mR({validate:!0},t.schema).serialize(o)})(t,o.content);return t.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((t,r,n)=>{let o=t.dom.create("div",{style:"display:none"},r),a=t.dispatch("PastePostProcess",{node:o,internal:n});return xG(a.node.innerHTML,a.isDefaultPrevented())})(t,a,n):xG(a,o.isDefaultPrevented())})(t,r,n);if(!l.cancelled){let r=l.content,n=()=>{o||!sB(t)?xX(t,r):tz.each([xQ,xJ,xX],n=>!n(t,r,xX))};a?wE(t,"insertFromPaste",{dataTransfer:x1(r)}).isDefaultPrevented()||(n(),wC(t,"insertFromPaste")):n()}},x3=(t,r,n,o)=>{let a=n||xH(r);x2(t,r.replace(xz,""),a,!1,o)},x8=(t,r,n)=>{let o=((t,r,n)=>{let o=t.split(/\n\n/),a=((t,r)=>{let n="<"+t,o=eU(r,(t,r)=>r+'="'+oq.encodeAllRaw(t)+'"');return o.length&&(n+=" "+o.join(" ")),n+">"})(r,n),l="</"+r+">",i=es(o,t=>t.split(/\n/).join("<br />"));return 1===i.length?i[0]:es(i,t=>a+t+l).join("")})(nO(t.dom.encode(r).replace(/\r\n/g,"\n"),sD(t)),ix(t),i_(t));x2(t,o,!1,!0,n)},x5=t=>{let r={};if(t&&t.types)for(let n=0;n<t.types.length;n++){let o=t.types[n];try{r[o]=t.getData(o)}catch(t){r[o]=""}}return r},x6=(t,r)=>r in t&&t[r].length>0,x4=t=>x6(t,"text/html")||x6(t,"text/plain"),x9=(t,r,n)=>{let o="paste"===r.type?r.clipboardData:r.dataTransfer;if(sk(t)&&o){let a=((t,r)=>{let n=r.items?ey(eR(r.items),t=>"file"===t.kind?[t.getAsFile()]:[]):[],o=r.files?eR(r.files):[];return em(n.length>0?n:o,(t=>{let r=sq(t);return t=>e4(t.type,"image/")&&ei(r,r=>(t=>{let r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tz.hasOwn(n,r)?"image/"+n[r]:"image/"+r})(r)===t.type)})(t))})(t,o);if(a.length>0)return r.preventDefault(),Promise.all(es(a,t=>pA(t).then(r=>({file:t,uri:r})))).then(r=>{n&&t.selection.setRng(n),ed(r,r=>{((t,r)=>{pN(r.uri).each(({data:n,type:o,base64Encoded:a})=>{let l=a?n:btoa(n),i=r.file,s=t.editorUpload.blobCache,d=s.getByData(l,o),c=null!=d?d:((t,r,n,o)=>{let a=x0(),l=iO(t)&&I(n.name),i=l?((t,r)=>{let n=r.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return I(n)?t.dom.encode(n[1]):void 0})(t,n.name):a,s=l?n.name:void 0,d=r.create(a,n,o,i,s);return r.add(d),d})(t,s,i,l);x3(t,`<img src="${c.blobUri()}">`,!1,!0)})})(t,r)})}),!0}return!1},x7=(t,r,n,o,a)=>{let l,i=xY(n),s=x6(r,xU())||xH(n),d=!s&&(l=i,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(l)),c=xZ(i);(xW(i)||!i.length||d&&!c)&&(o=!0),(o||c)&&(i=x6(r,"text/plain")&&d?r["text/plain"]:(t=>{let r=o9(),n=hH({},r),o="",a=r.getVoidElements(),l=tz.makeMap("script noscript style textarea video audio iframe object"," "),i=r.getBlockElements(),s=t=>{let n=t.name;if("br"!==n){if("wbr"!==n){if(a[n]&&(o+=" "),l[n])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in r.getVoidElements())){let r=t.firstChild;if(r)do s(r);while(r=r.next)}i[n]&&t.next&&(o+="\n","p"===n&&(o+="\n"))}}}else o+="\n"};return t=xK(t,[/<!\[[^\]]+\]>/g]),s(n.parse(t)),o})(i)),xW(i)||(o?x8(t,i,a):x3(t,i,s,a))},_e=(t,r,n)=>{let o;t.on("keydown",t=>{(cX.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!t.isDefaultPrevented()&&(o=t.shiftKey&&86===t.keyCode)}),t.on("paste",a=>{var l,i;if(a.isDefaultPrevented()||tM.os.isAndroid()&&0===(null===(i=null===(l=a.clipboardData)||void 0===l?void 0:l.items)||void 0===i?void 0:i.length))return;let s="text"===n.get()||o;o=!1;let d=x5(a.clipboardData);!x4(d)&&x9(t,a,r.getLastRng()||t.selection.getRng())||(x6(d,"text/html")?(a.preventDefault(),x7(t,d,d["text/html"],s,!0)):x6(d,"text/plain")&&x6(d,"text/uri-list")?(a.preventDefault(),x7(t,d,d["text/plain"],s,!0)):(r.create(),uZ.setEditorTimeout(t,()=>{let n=r.getHtml();r.remove(),x7(t,d,n,s,!1)},0)))}),(t=>{let r=t=>e4(t,"webkit-fake-url"),n=t=>e4(t,"data:");t.parser.addNodeFilter("img",(o,a,l)=>{var i;if(!sk(t)&&!0===(null===(i=l.data)||void 0===i?void 0:i.paste))for(let a of o){let o=a.attr("src");T(o)&&!a.attr("data-mce-object")&&o!==tM.transparentSrc&&(r(o)||!sL(t)&&n(o))&&a.remove()}})})(t)},_t=(t,r,n,o)=>{((t,r,n)=>{if(!t)return!1;try{return t.clearData(),t.setData("text/html",r),t.setData("text/plain",n),t.setData(xU(),r),!0}catch(t){return!1}})(t.clipboardData,r.html,r.text)?(t.preventDefault(),o()):n(r.html,o)},_r=t=>(r,n)=>{let{dom:o,selection:a}=t,l=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},r);o.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(i),o.add(t.getBody(),l);let s=a.getRng();i.focus();let d=o.createRng();d.selectNodeContents(i),a.setRng(d),uZ.setEditorTimeout(t,()=>{a.setRng(s),o.remove(l),n()},0)},_n=t=>({html:xj(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),_o=t=>!t.selection.isCollapsed()||!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()),_a=(t,r)=>{var n,o;return uv.getCaretRangeFromPoint(null!==(n=r.clientX)&&void 0!==n?n:0,null!==(o=r.clientY)&&void 0!==o?o:0,t.getDoc())},_l=(t,r)=>{t.focus(),r&&t.selection.setRng(r)},_i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_s=t=>tz.trim(t).replace(_i,ai).toLowerCase(),_d=(t,r,n)=>{let o=sA(t);if(n||"all"===o||!sT(t))return r;let a=o?o.split(/[, ]/):[];if(a&&"none"!==o){let n=t.dom,o=t.selection.getNode();r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(t,r,l,i)=>{let s=n.parseStyle(n.decode(l)),d={};for(let t=0;t<a.length;t++){let r=s[a[t]],l=r,i=n.getStyle(o,a[t],!0);/color/.test(a[t])&&(l=_s(l),i=_s(i)),i!==l&&(d[a[t]]=r)}let c=n.serializeStyle(d,"span");return c?r+' style="'+c+'"'+i:r+i})}else r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return r=r.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(t,r,n,o)=>r+' style="'+n+'"'+o)},_c=t=>{let r=or(!1),n=or(sP(t)?"text":"html"),o=(t=>{let r=or(null);return{create:()=>((t,r)=>{let{dom:n,selection:o}=t,a=t.getBody();r.set(o.getRng());let l=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},x$);tM.browser.isFirefox()&&n.setStyle(l,"left","rtl"===n.getStyle(a,"direction",!0)?65535:-65535),n.bind(l,"beforedeactivate focusin focusout",t=>{t.stopPropagation()}),l.focus(),o.select(l,!0)})(t,r),remove:()=>((t,r)=>{let n=t.dom;if(xV(t)){let o;let a=r.get();for(;o=xV(t);)n.remove(o),n.unbind(o);a&&t.selection.setRng(a)}r.set(null)})(t,r),getEl:()=>xV(t),getHtml:()=>(t=>{let r=t.dom,n=(t,n)=>{t.appendChild(n),r.remove(n,!0)},[o,...a]=em(t.getBody().childNodes,xq);ed(a,t=>{n(o,t)});let l=r.select("div[id=mcepastebin]",o);for(let t=l.length-1;t>=0;t--){let a=r.create("div");o.insertBefore(a,l[t]),n(a,l[t])}return o?o.innerHTML:""})(t),getLastRng:r.get}})(t);(tM.browser.isChromium()||tM.browser.isSafari())&&((t,r)=>{t.on("PastePreProcess",n=>{n.content=r(t,n.content,n.internal)})})(t,_d),t.addCommand("mceTogglePlainTextPaste",()=>{"text"===n.get()?(n.set("html"),cG(t,!1)):(n.set("text"),cG(t,!0)),t.focus()}),t.addCommand("mceInsertClipboardContent",(r,n)=>{n.html&&x3(t,n.html,n.internal,!1),n.text&&x8(t,n.text,!1)}),(t=>{let r=r=>n=>{r(t,n)},n=sS(t);U(n)&&t.on("PastePreProcess",r(n));let o=sN(t);U(o)&&t.on("PastePostProcess",r(o))})(t),t.on("PreInit",()=>{t.on("cut",r=>{!r.isDefaultPrevented()&&_o(t)&&t.selection.isEditable()&&_t(r,_n(t),_r(t),()=>{if(tM.browser.isChromium()||tM.browser.isFirefox()){let r=t.selection.getRng();uZ.setEditorTimeout(t,()=>{t.selection.setRng(r),t.execCommand("Delete")},0)}else t.execCommand("Delete")})}),t.on("copy",r=>{!r.isDefaultPrevented()&&_o(t)&&_t(r,_n(t),_r(t),H)}),s_(t)&&t.on("dragend dragover draggesture dragdrop drop drag",t=>{t.preventDefault(),t.stopPropagation()}),sk(t)||t.on("drop",t=>{let r=t.dataTransfer;r&&ei(r.files,t=>/^image\//.test(t.type))&&t.preventDefault()}),t.on("drop",n=>{if(n.isDefaultPrevented())return;let o=_a(t,n);if(F(o))return;let a=x5(n.dataTransfer),l=x6(a,xU());if((!x4(a)||(t=>{let r=t["text/plain"];return!!r&&0===r.indexOf("file://")})(a))&&x9(t,n,o))return;let i=a[xU()],s=i||a["text/html"]||a["text/plain"],d=((t,r,n,o)=>{let a=t.getParent(n,t=>oE(r,t));return!D(t.getParent(n,"summary"))||!!(a&&eH(o,"text/html"))&&!D((new DOMParser).parseFromString(o["text/html"],"text/html").body.querySelector(a.nodeName.toLowerCase()))})(t.dom,t.schema,o.startContainer,a),c=r.get();c&&!d||s&&(n.preventDefault(),uZ.setEditorTimeout(t,()=>{t.undoManager.transact(()=>{(i||c&&d)&&t.execCommand("Delete"),_l(t,o);let r=xY(s);a["text/html"]?x3(t,r,l,!0):x8(t,r,!0)})}))}),t.on("dragstart",t=>{r.set(!0)}),t.on("dragover dragend",n=>{sk(t)&&!r.get()&&(n.preventDefault(),_l(t,_a(t,n))),"dragend"===n.type&&r.set(!1)}),(t=>{t.on("input",r=>{"deleteByDrag"===r.inputType&&ed(em(t.dom.select("details"),t=>D(t.querySelector("summary"))),r=>{nG(r.firstChild)&&r.firstChild.remove();let n=t.dom.create("summary");n.appendChild(lt().dom),r.prepend(n)})})})(t),_e(t,o,n)})},_u=t=>nQ(t.dom),_m=t=>r=>ry(ru(t),r),_g=(t,r)=>rK(ru(t),_u,_m(r)),_f=(t,r,n)=>{let o=new nS(t,r),a=n?o.next.bind(o):o.prev.bind(o),l=t;for(let r=n?t:a();r&&!nG(r);r=a())lR(r)&&(l=r);return l},_p=t=>{let r=((t,r,n)=>{let o=l$.fromRangeStart(t).getNode(),a=rK(ru(o),t=>nZ(t.dom)||n.isBlock(tG(t)),_m(r)).getOr(ru(r)).dom,l=_f(o,a,!1),i=_f(o,a,!0),s=document.createRange();return _g(l,a).fold(()=>{n$(l)?s.setStart(l,0):s.setStartBefore(l)},t=>s.setStartBefore(t.dom)),_g(i,a).fold(()=>{n$(i)?s.setEnd(i,i.data.length):s.setEndAfter(i)},t=>s.setEndAfter(t.dom)),s})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(fv(r))};(u=b||(b={})).Before="before",u.After="after";let _h=(t,r)=>Math.abs(t.left-r),_b=(t,r)=>Math.abs(t.right-r),_v=(t,r)=>ef(em(t,t=>r>=t.top&&r<=t.bottom),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.min(r.left,t.left),o=Math.min(r.top,t.top),a=Math.max(r.right,t.right),l=Math.max(r.bottom,t.bottom);return et.some({top:o,right:a,bottom:l,left:n,width:a-n,height:l-o})}),et.none()).fold(()=>[[],t],r=>{let{pass:n,fail:o}=eu(t,t=>((t,r)=>{let n=Math.max(0,Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top))/Math.min(t.height,r.height);return t.top<r.bottom&&t.bottom>r.top&&n>.5})(t,r));return[n,o]}),_y=(t,r,n)=>r>t.left&&r<t.right?0:Math.min(Math.abs(t.left-r),Math.abs(t.right-r)),_C=(t,r,n,o)=>{let a=t=>lR(t.node)?et.some(t):nD(t.node)?_C(eR(t.node.childNodes),r,n,!1):et.none(),l=(t,l)=>{let i=e_(t,(t,o)=>l(t,r,n)-l(o,r,n));return eA(i,a).map(t=>o&&!n$(t.node)&&i.length>1?a(i[1]).filter(o=>2>Math.abs(l(t,r,n)-l(o,r,n))&&n$(o.node)).getOr(t):t)},[i,s]=_v(yA(t),n),{pass:d,fail:c}=eu(s,t=>t.top<n);return l(i,_y).orThunk(()=>l(c,lC)).orThunk(()=>l(d,lC))},_E=(t,r,n)=>((t,r,n)=>{let o=ru(t),a=rp(rw(o),r,n).filter(t=>rC(o,t)).getOr(o);return((t,r,n,o)=>{let a=(r,l)=>{let i=em(r.dom.childNodes,G(t=>nD(t)&&t.classList.contains("mce-drag-container")));return l.fold(()=>_C(i,n,o,!0),t=>_C(em(i,r=>r!==t.dom),n,o,!0)).orThunk(()=>(ry(r,t)?et.none():rk(r)).bind(t=>a(t,et.some(r))))};return a(r,et.none())})(o,a,r,n)})(t,r,n).filter(t=>de(t.node)).map(t=>({node:t.node,position:_h(t,r)<_b(t,r)?b.Before:b.After})),_w=t=>{var r,n;let o=t.getBoundingClientRect(),a=t.ownerDocument,l=a.documentElement,i=a.defaultView;return{top:o.top+(null!==(r=null==i?void 0:i.scrollY)&&void 0!==r?r:0)-l.clientTop,left:o.left+(null!==(n=null==i?void 0:i.scrollX)&&void 0!==n?n:0)-l.clientLeft}},_x=t=>({target:t,srcElement:t}),__=(t,r,n,o)=>{let a=((t,r)=>{let n=(t=>{let r=xM(),n=et.from(t[xk]);return xA(t),xE(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,et.from(t[xv]).each(t=>r.setDragImage(t.image,t.x,t.y)),ed(t.types,n=>{"Files"!==n&&r.setData(n,t.getData(n))}),ed(t.files,t=>r.items.add(t)),et.from(t[xy]).each(t=>{((t,r)=>{xC(r)(t)})(r,t)}),n.each(n=>{xN(t,n),xN(r,n)}),r})(t);return"dragstart"===r?(xE(n),xR(n)):"drop"===r?(xw(n),xA(n)):(xx(n),xT(n)),n})(n,t);return M(o)?((t,r,n)=>{let o=X("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:o,initEvent:o,preventDefault:H,stopImmediatePropagation:H,stopPropagation:H,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n,..._x(r)}})(t,r,a):{...o,dataTransfer:a,type:t,..._x(r)}},_k=((...t)=>r=>{for(let n=0;n<t.length;n++)if(t[n](r))return!0;return!1})(nQ,nZ),_S=(t,r,n,o)=>{let a=t.dom,l=r.cloneNode(!0);a.setStyles(l,{width:n,height:o}),a.setAttrib(l,"data-mce-selected",null);let i=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),a.setStyles(l,{margin:0,boxSizing:"border-box"}),i.appendChild(l),i},_N=(t,r)=>n=>()=>{let o="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:o+r,behavior:"smooth"})},_R=_N("left",-32),_A=_N("left",32),_T=_N("top",-32),_O=_N("top",32),_B=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_P=(t,r,n,o,a)=>{"dragstart"===r&&xF(o,t.dom.getOuterHTML(n));let l=__(r,n,o,a);return t.dispatch(r,l)},_D=(t,r)=>{let n=aL((t,n)=>{r._selectionOverrides.hideFakeCaret(),_E(r.getBody(),t,n).fold(()=>r.selection.placeCaretAt(t,n),o=>{let a=r._selectionOverrides.showCaret(1,o.node,o.position===b.Before,!1);a?r.selection.setRng(a):r.selection.placeCaretAt(t,n)})},0);return r.on("remove",n.cancel),o=>t.on(a=>{var l,i,s,d,c;let u=Math.max(Math.abs(o.screenX-a.screenX),Math.abs(o.screenY-a.screenY));if(!a.dragging&&u>10){let t=_P(r,"dragstart",a.element,a.dataTransfer,o);if(I(t.dataTransfer)&&(a.dataTransfer=t.dataTransfer),t.isDefaultPrevented())return;a.dragging=!0,r.focus()}if(a.dragging){let u;let m=o.currentTarget===r.getDoc().documentElement,g=(s=r.inline?_w(r.getBody()):{left:0,top:0},d=(t=>{let r=t.getBody();return t.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0}})(r),{pageX:(u={pageX:(c=((t,r)=>{if(r.target.ownerDocument!==t.getDoc()){let n=_w(t.getContentAreaContainer()),o=(t=>{let r=t.getBody(),n=t.getDoc().documentElement,o={left:r.scrollLeft,top:r.scrollTop},a={left:r.scrollLeft||n.scrollLeft,top:r.scrollTop||n.scrollTop};return t.inline?o:a})(t);return{left:r.pageX-n.left+o.left,top:r.pageY-n.top+o.top}}return{left:r.pageX,top:r.pageY}})(r,o)).left-s.left+d.left,pageY:c.top-s.top+d.top}).pageX-a.relX,pageY:u.pageY+5});l=a.ghost,i=r.getBody(),l.parentNode!==i&&i.appendChild(l),((t,r,n,o,a,l,i,s,d,c,u,m)=>{let g=0,f=0;t.style.left=r.pageX+"px",t.style.top=r.pageY+"px",r.pageX+n>a&&(g=r.pageX+n-a),r.pageY+o>l&&(f=r.pageY+o-l),t.style.width=n-g+"px",t.style.height=o-f+"px";let p=d.clientHeight,h=d.clientWidth,b=i+d.getBoundingClientRect().top,v=s+d.getBoundingClientRect().left;u.on(t=>{t.intervalId.clear(),t.dragging&&m&&(i+8>=p?t.intervalId.set(_O(c)):i-8<=0?t.intervalId.set(_T(c)):s+8>=h?t.intervalId.set(_A(c)):s-8<=0?t.intervalId.set(_R(c)):b+16>=window.innerHeight?t.intervalId.set(_O(window)):b-16<=0?t.intervalId.set(_T(window)):v+16>=window.innerWidth?t.intervalId.set(_A(window)):v-16<=0&&t.intervalId.set(_R(window)))})})(a.ghost,g,a.width,a.height,a.maxX,a.maxY,o.clientY,o.clientX,r.getContentAreaContainer(),r.getWin(),t,m),n.throttle(o.clientX,o.clientY)}})},_L=(t,r,n)=>{t.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>_P(r,"dragend",t.element,t.dataTransfer),n=>_P(r,"dragend",t.element,t.dataTransfer,n))}),_M(t)},_M=t=>{t.on(t=>{t.intervalId.clear(),_B(t.ghost)}),t.clear()},_F=t=>{let r=oo(),n=aN.DOM,o=document,a=_D(r,t),l=n=>_L(r,t,et.some(n));t.on("mousedown",n=>{if(0===n.button){let o,a;let l=eh(t.dom.getParents(n.target),_k).getOr(null);if(I(l)&&(o=t.dom,a=t.getBody(),nQ(l)&&l!==a&&o.isEditable(l.parentElement))){let o=t.dom.getPos(l),a=t.getBody(),i=t.getDoc().documentElement;r.set({element:l,dataTransfer:xM(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:l.offsetWidth,height:l.offsetHeight,ghost:_S(t,l,l.offsetWidth,l.offsetHeight),intervalId:on(100)})}}}),t.on("mousemove",a),t.on("mouseup",n=>{r.on(r=>{var o;if(r.intervalId.clear(),r.dragging){let a,l;if(a=(t=>{let r=t.getSel();if(I(r)){let t=r.getRangeAt(0).startContainer;return n$(t)?t.parentNode:t}return null})(t.selection),l=r.element,!F(a)&&a!==l&&!t.dom.isChildOf(a,l)&&t.dom.isEditable(a)){let a=null!==(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==o?o:t.getBody();_P(t,"drop",a,r.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((t,r)=>{let n=t.getParent(r.parentNode,t.isBlock);_B(r),n&&n!==t.getRoot()&&t.isEmpty(n)&&lr(ru(n))})(t.dom,r.element),(t=>{let r=t.getData("text/html");return""===r?et.none():et.some(r)})(r.dataTransfer).each(r=>t.insertContent(r)),t._selectionOverrides.hideFakeCaret()})}_P(t,"dragend",t.getBody(),r.dataTransfer,n)}}),_M(r)}),n.bind(o,"mousemove",a),n.bind(o,"mouseup",l),t.on("remove",()=>{n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",l)}),t.on("keydown",n=>{n.keyCode===cX.ESC&&_L(r,t,et.none())})},_I=(t,r)=>fn(t.getBody(),r),_U=t=>{let r;let n=t.selection,o=t.dom,a=t.getBody(),l=s4(t,a,o.isBlock,()=>u6(t)),i="sel-"+o.uniqueId(),s="data-mce-selected",d=t=>t!==a&&(nQ(t)||n1(t))&&o.isChildOf(t,a)&&o.isEditable(t.parentNode),c=(r,o,a,i=!0)=>t.dispatch("ShowCaret",{target:o,direction:r,before:a}).isDefaultPrevented()?null:(i&&n.scrollIntoView(o,-1===r),l.show(a,o)),u=t=>ll(t)||lc(t)||lu(t),m=t=>u(t.startContainer)||u(t.endContainer),g=r=>{let n=t.schema.getVoidElements(),a=o.createRng(),l=r.startContainer,i=r.startOffset,s=r.endContainer,d=r.endOffset;return eH(n,l.nodeName.toLowerCase())?0===i?a.setStartBefore(l):a.setStartAfter(l):a.setStart(l,i),eH(n,s.nodeName.toLowerCase())?0===d?a.setEndBefore(s):a.setEndAfter(s):a.setEnd(s,d),a},f=(l,u)=>{if(!l)return null;if(l.collapsed){if(!m(l)){let t=u?1:-1,r=db(t,a,l),n=r.getNode(!u);if(I(n)){if(de(n))return c(t,n,!!u&&!r.isAtEnd(),!1);if(la(n)&&nQ(n.nextSibling)){let t=o.createRng();return t.setStart(n,0),t.setEnd(n,0),t}}let i=r.getNode(u);if(I(i)){if(de(i))return c(t,i,!u&&!r.isAtEnd(),!1);if(la(i)&&nQ(i.previousSibling)){let t=o.createRng();return t.setStart(i,1),t.setEnd(i,1),t}}}return null}let g=l.startContainer,f=l.startOffset,p=l.endOffset;if(n$(g)&&0===f&&nQ(g.parentNode)&&(g=g.parentNode,f=o.nodeIndex(g),g=g.parentNode),!nD(g))return null;if(p===f+1&&g===l.endContainer){let a=g.childNodes[f];if(d(a))return(a=>{let l=a.cloneNode(!0),d=t.dispatch("ObjectSelected",{target:a,targetClone:l});if(d.isDefaultPrevented())return null;let c=((r,a)=>{let l=ru(t.getBody()),s=t.getDoc(),d=rX(l,"#"+i).getOrThunk(()=>{let t=rm('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return t5(t,"id",i),nr(l,t),t}),c=o.createRng();na(d),no(d,[rf("\xa0",s),ru(a),rf("\xa0",s)]),c.setStart(d.dom.firstChild,1),c.setEnd(d.dom.lastChild,0),r3(d,{top:o.getPos(r,t.getBody()).y+"px"}),uU(d);let u=n.getSel();return u&&(u.removeAllRanges(),u.addRange(c)),c})(a,d.targetClone),u=ru(a);return ed(nw(ru(t.getBody()),`*[${s}]`),t=>{ry(u,t)||re(t,s)}),o.getAttrib(a,s)||a.setAttribute(s,"1"),r=a,h(),c})(a)}return null},p=()=>{r&&r.removeAttribute(s),rX(ru(t.getBody()),"#"+i).each(nl),r=null},h=()=>{l.hide()};return bm(t)||(t.on("click",r=>{o.isEditable(r.target)||(r.preventDefault(),t.focus())}),t.on("blur NewBlock",p),t.on("ResizeWindow FullscreenStateChanged",l.reposition),t.on("tap",r=>{let n=r.target,o=_I(t,n);nQ(o)?(r.preventDefault(),vO(t,o).each(f)):d(n)&&vO(t,n).each(f)},!0),t.on("mousedown",r=>{let l=r.target;if(l!==a&&"HTML"!==l.nodeName&&!o.isChildOf(l,a)||!((t,r,n)=>{let o=ru(t.getBody()),a=t.inline?o:ru(rw(o).dom.documentElement),l=((t,r,n,o)=>{let a=r.dom.getBoundingClientRect();return{x:n-(t?a.left+r.dom.clientLeft+bq(r):0),y:o-(t?a.top+r.dom.clientTop+bV(r):0)}})(t.inline,a,r,n);return((t,r,n)=>{let o=bH(t),a=b$(t);return r>=0&&n>=0&&r<=o&&n<=a})(a,l.x,l.y)})(t,r.clientX,r.clientY))return;p(),h();let i=_I(t,l);nQ(i)?(r.preventDefault(),vO(t,i).each(f)):_E(a,r.clientX,r.clientY).each(o=>{var a;r.preventDefault(),(a=c(1,o.node,o.position===b.Before,!1))&&n.setRng(a),nL(i)?i.focus():t.getBody().focus()})}),t.on("keypress",t=>{cX.modifierPressed(t)||nQ(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",t=>{let n=t.range;if(r){if(!r.parentNode)return void(r=null);(n=n.cloneRange()).selectNode(r),t.range=n}}),t.on("SetSelectionRange",t=>{t.range=g(t.range);let r=f(t.range,t.forward);r&&(t.range=r)}),t.on("AfterSetSelectionRange",t=>{let r=t.range,n=r.startContainer.parentElement;m(r)||nD(n)&&"mcepastebin"===n.id||h(),I(n)&&o.hasClass(n,"mce-offscreen-selection")||p()}),_F(t),sg(t)&&(t=>{let r=r=>{if(!r.isDefaultPrevented()){let n=r.dataTransfer;n&&(el(n.types,"Files")||n.files.length>0)&&(r.preventDefault(),"drop"===r.type&&bZ(t,"Dropped file type is not supported"))}},n=n=>{u0(t,n.target)&&r(n)},o=()=>{let o=aN.DOM,a=t.dom,l=document,i=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];ed(s,t=>{o.bind(l,t,n),a.bind(i,t,r)}),t.on("remove",()=>{ed(s,t=>{o.unbind(l,t,n),a.unbind(i,t,r)})})};t.on("init",()=>{uZ.setEditorTimeout(t,o,0)})})(t),(t=>{let r=aL(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){let r=t.selection.getRng();if(r.collapsed){let n=vB(t,r,!1);t.selection.setRng(n)}}},0);t.on("focus",()=>{r.throttle()}),t.on("blur",()=>{r.cancel()})})(t),(t=>{t.on("init",()=>{t.on("focusin",r=>{let n=r.target;if(n1(n)){let r=fn(t.getBody(),n),o=nQ(r)?r:n;t.selection.getNode()!==o&&vO(t,o).each(r=>t.selection.setRng(r))}})})})(t)),{showCaret:c,showBlockCaretContainer:t=>{t.hasAttribute("data-mce-caret")&&(lm(t),n.scrollIntoView(t))},hideFakeCaret:h,destroy:()=>{l.destroy(),r=null}}},_z=(t,r)=>{let n=r;for(let r=t.previousSibling;n$(r);r=r.previousSibling)n+=r.data.length;return n},_j=(t,r,n,o,a)=>{if(n$(n)&&(o<0||o>n.data.length))return[];let l=a&&n$(n)?[_z(n,o)]:[o],i=n;for(;i!==r&&i.parentNode;)l.push(t.nodeIndex(i,a)),i=i.parentNode;return i===r?l.reverse():[]},_H=(t,r,n,o,a,l,i=!1)=>({start:_j(t,r,n,o,i),end:_j(t,r,a,l,i)}),_$=(t,r)=>{let n=r.slice(),o=n.pop();return z(o)?ef(n,(t,r)=>t.bind(t=>et.from(t.childNodes[r])),et.some(t)).bind(t=>n$(t)&&(o<0||o>t.data.length)?et.none():et.some({node:t,offset:o})):et.none()},_V=(t,r)=>_$(t,r.start).bind(({node:n,offset:o})=>_$(t,r.end).map(({node:t,offset:r})=>{let a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a})),_q=(t,r,n)=>{if(r&&t.isEmpty(r)&&!n(r)){let o=r.parentNode;t.remove(r,n$(r.firstChild)&&nA(r.firstChild.data)),_q(t,o,n)}},_W=(t,r,n,o=!0)=>{let a=r.startContainer.parentNode,l=r.endContainer.parentNode;r.deleteContents(),o&&!n(r.startContainer)&&(n$(r.startContainer)&&0===r.startContainer.data.length&&t.remove(r.startContainer),n$(r.endContainer)&&0===r.endContainer.data.length&&t.remove(r.endContainer),_q(t,a,n),a!==l&&_q(t,l,n))},_K=(t,r)=>et.from(t.dom.getParent(r.startContainer,t.dom.isBlock)),_Y=(t,r,n)=>{let o=t.dynamicPatternsLookup({text:n,block:r});return{...t,blockPatterns:io(o).concat(t.blockPatterns),inlinePatterns:ia(o).concat(t.inlinePatterns)}},_G=(t,r,n,o)=>{let a=t.createRng();return a.setStart(r,0),a.setEnd(n,o),a.toString()},_X=(t,r)=>t.create("span",{"data-mce-type":"bookmark",id:r}),_Z=(t,r)=>{let n=t.createRng();return n.setStartAfter(r.start),n.setEndBefore(r.end),n},_Q=(t,r,n)=>{let o=_V(t.getRoot(),n).getOrDie("Unable to resolve path range"),a=o.startContainer,l=o.endContainer,i=0===o.endOffset?l:l.splitText(o.endOffset),s=0===o.startOffset?a:a.splitText(o.startOffset),d=s.parentNode;return{prefix:r,end:i.parentNode.insertBefore(_X(t,r+"-end"),i),start:d.insertBefore(_X(t,r+"-start"),s)}},_J=(t,r,n)=>{_q(t,t.get(r.prefix+"-end"),n),_q(t,t.get(r.prefix+"-start"),n)},_0=t=>0===t.start.length,_1=(t,r,n,o)=>{let a=r.start;return El(t,o.container,o.offset,(t,r)=>{let n=t.data.substring(0,r),o=n.lastIndexOf(a.charAt(a.length-1)),l=n.lastIndexOf(a);return -1!==l?l+a.length:-1!==o?o+1:-1},n).bind(o=>{var l,i;let s=null!==(i=null===(l=n.textContent)||void 0===l?void 0:l.indexOf(a))&&void 0!==i?i:-1;if(-1!==s&&o.offset>=s+a.length){let r=t.createRng();return r.setStart(o.container,o.offset-a.length),r.setEnd(o.container,o.offset),et.some(r)}{let l=o.offset-a.length;return Eo(o.container,l,n).map(r=>{let n=t.createRng();return n.setStart(r.container,r.offset),n.setEnd(o.container,o.offset),n}).filter(t=>t.toString()===a).orThunk(()=>_1(t,r,n,Ee(o.container,0)))}})},_2=(t,r,n,o)=>{let a=t.dom,l=a.getRoot(),i=n.pattern,s=n.position.container,d=n.position.offset;return Eo(s,d-n.pattern.end.length,r).bind(c=>{let u=_H(a,l,c.container,c.offset,s,d,o);if(_0(i))return et.some({matches:[{pattern:i,startRng:u,endRng:u}],position:c});{let s=_3(t,n.remainingPatterns,c.container,c.offset,r,o),d=s.getOr({matches:[],position:c}),m=d.position;return((t,r,n,o,a,l=!1)=>{if(0===r.start.length&&!l){let r=t.createRng();return r.setStart(n,o),r.setEnd(n,o),et.some(r)}return En(n,o,a).bind(n=>_1(t,r,a,n).bind(t=>{var r;return l&&(t.endContainer===n.container&&t.endOffset===n.offset||0===n.offset&&(null===(r=t.endContainer.textContent)||void 0===r?void 0:r.length)===t.endOffset)?et.none():et.some(t)}))})(a,i,m.container,m.offset,r,s.isNone()).map(t=>{let r=((t,r,n,o=!1)=>_H(t,r,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(a,l,t,o);return{matches:d.matches.concat([{pattern:i,startRng:r,endRng:u}]),position:Ee(t.startContainer,t.startOffset)}})}})},_3=(t,r,n,o,a,l)=>{let i=t.dom;return En(n,o,i.getRoot()).bind(s=>{let d=_G(i,a,n,o);for(let i=0;i<r.length;i++){let c=r[i];if(!e9(d,c.end))continue;let u=r.slice();u.splice(i,1);let m=_2(t,a,{pattern:c,remainingPatterns:u,position:s},l);if(m.isNone()&&o>0)return _3(t,r,n,o-1,a,l);if(m.isSome())return m}return et.none()})},_8=(t,r,n)=>{t.selection.setRng(n),"inline-format"===r.type?ed(r.format,r=>{t.formatter.apply(r)}):t.execCommand(r.cmd,!1,r.value)},_5=(t,r,n,o,a,l)=>((t,r)=>{let n=eC(t,t=>ei(r,r=>t.pattern.start===r.pattern.start&&t.pattern.end===r.pattern.end));return t.length===r.length?n?t:r:t.length>r.length?t:r})(_3(t,a.inlinePatterns,n,o,r,l).fold(()=>[],t=>t.matches),_3(t,e_(a.inlinePatterns,(t,r)=>r.end.length-t.end.length),n,o,r,l).fold(()=>[],t=>t.matches)),_6=(t,r)=>{if(0===r.length)return;let n=t.dom,o=t.selection.getBookmark();ed(((t,r)=>{let n=aG("mce_textpattern"),o=eg(r,(r,o)=>{let a=_Q(t,n+`_end${r.length}`,o.endRng);return r.concat([{...o,endMarker:a}])},[]);return eg(o,(r,a)=>{let l=o.length-r.length-1,i=_0(a.pattern)?a.endMarker:_Q(t,n+`_start${l}`,a.startRng);return r.concat([{...a,startMarker:i}])},[])})(n,r),r=>{let o=n.getParent(r.startMarker.start,n.isBlock),a=t=>t===o;_0(r.pattern)?((t,r,n,o)=>{let a=_Z(t.dom,n);_W(t.dom,a,o),_8(t,r,a)})(t,r.pattern,r.endMarker,a):((t,r,n,o,a)=>{let l=t.dom,i=_Z(l,o),s=_Z(l,n);_W(l,s,a),_W(l,i,a),_8(t,r,_Z(l,{prefix:n.prefix,start:n.end,end:o.start}))})(t,r.pattern,r.startMarker,r.endMarker,a),_J(n,r.endMarker,a),_J(n,r.startMarker,a)}),t.selection.moveToBookmark(o)},_4=(t,r,n)=>((t,r,n)=>{if(n$(t)&&0>=t.length)return et.some(Ee(t,0));{let r=a0(Et);return et.from(r.forwards(t,0,Er(t),n)).map(t=>Ee(t.container,0))}})(r,0,r).map(o=>{let a=o.container;return Ea(a,n.start.length,r).each(n=>{let o=t.createRng();o.setStart(a,0),o.setEnd(n.container,n.offset),_W(t,o,t=>t===r)}),a}),_9=t=>(r,n)=>{let o=r.dom,a=n.pattern;return _K(r,_V(o.getRoot(),n.range).getOrDie("Unable to resolve path range")).each(n=>{"block-format"===a.type?((t,r)=>{let n=r.get(t);return P(n)&&eS(n).exists(t=>eH(t,"block"))})(a.format,r.formatter)&&r.undoManager.transact(()=>{t(r.dom,n,a),r.formatter.apply(a.format)}):"block-command"===a.type&&r.undoManager.transact(()=>{t(r.dom,n,a),r.execCommand(a.cmd,!1,a.value)})}),!0},_7=t=>(r,n)=>{let o=e_(r,(t,r)=>r.start.length-t.start.length),a=n.replace("\xa0"," ");return eh(o,r=>t(r,n,a))},ke=(t,r)=>(n,o,a,l,i)=>{var s;void 0===i&&(i=null!==(s=o.textContent)&&void 0!==s?s:"");let d=n.dom,c=ix(n);return d.is(o,c)?t(a.blockPatterns,i).map(t=>r&&tz.trim(i).length===t.start.length?[]:[{pattern:t,range:_H(d,d.getRoot(),o,0,o,0,l)}]).getOr([]):[]},kt=_9((t,r,n)=>{_4(t,r,n).each(t=>{var r;let n=ru(t),o=a2(n);/^\s[^\s]/.test(o)&&(r=o.slice(1),a1.set(n,r))})}),kr=ke(_7((t,r,n)=>0===r.indexOf(t.start)||0===n.indexOf(t.start)),!0),kn=_9(_4),ko=ke(_7((t,r,n)=>r===t.start||n===t.start),!1),ka=(t,r,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],r))return!0;return!1},kl=t=>{let r=[",",".",";",":","!","?"],n=[32],o=()=>{var r,n;return r=sM(t),n=sF(t),{inlinePatterns:ia(r),blockPatterns:io(r),dynamicPatternsLookup:n}},a=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",r=>{if(13===r.keyCode&&!cX.modifierPressed(r)&&t.selection.isCollapsed()){let n=il(o(),"enter");(n.inlinePatterns.length>0||n.blockPatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();return _K(t,n).map(o=>{var a;let l=Math.max(0,n.startOffset),i=_Y(r,o,null!==(a=o.textContent)&&void 0!==a?a:"");return{inlineMatches:_5(t,o,n.startContainer,l,i,!0),blockMatches:kr(t,o,i,!0)}}).filter(({inlineMatches:t,blockMatches:r})=>r.length>0||t.length>0)})(t,n).fold(J,({inlineMatches:r,blockMatches:n})=>(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{(t=>{t.insertContent("\uFEFF",{preserve_zwsp:!0})})(t),_6(t,r),((t,r)=>{if(0===r.length)return;let n=t.selection.getBookmark();ed(r,r=>kt(t,r)),t.selection.moveToBookmark(n)})(t,n);let o=t.selection.getRng(),a=En(o.startContainer,o.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),a.each(r=>{let n=r.container;"\uFEFF"===n.data.charAt(r.offset-1)&&(n.deleteData(r.offset-1,1),_q(t.dom,n.parentNode,r=>r===t.dom.getRoot()))})}),!0))&&r.preventDefault()}},!0),t.on("keydown",r=>{if(32===r.keyCode&&t.selection.isCollapsed()){let n=il(o(),"space");(n.blockPatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();return _K(t,n).map(o=>{let a=Math.max(0,n.startOffset),l=_G(t.dom,o,n.startContainer,a),i=_Y(r,o,l);return ko(t,o,i,!1,l)}).filter(t=>t.length>0)})(t,n).fold(J,r=>(t.undoManager.transact(()=>{ed(r,r=>kn(t,r))}),!0))&&r.preventDefault()}},!0);let l=()=>{if(t.selection.isCollapsed()){let r=il(o(),"space");(r.inlinePatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();_K(t,n).map(o=>{let a=Math.max(0,n.startOffset-1),l=_G(t.dom,o,n.startContainer,a),i=_Y(r,o,l),s=_5(t,o,n.startContainer,a,i,!1);s.length>0&&t.undoManager.transact(()=>{_6(t,s)})})})(t,r)}};t.on("keyup",t=>{ka(n,t,(t,r)=>t===r.keyCode&&!cX.modifierPressed(r))&&l()}),t.on("keypress",n=>{ka(r,n,(t,r)=>t.charCodeAt(0)===r.charCode)&&uZ.setEditorTimeout(t,l)})},ki=t=>{let r=tz.each,n=cX.BACKSPACE,o=cX.DELETE,a=t.dom,l=t.selection,i=t.parser,s=tM.browser,d=s.isFirefox(),c=s.isChromium()||s.isSafari(),u=tM.deviceType.isiPhone()||tM.deviceType.isiPad(),m=tM.os.isMacOS()||tM.os.isiOS(),g=(r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},f=t=>t.isDefaultPrevented(),p=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||a.bind(t.getDoc(),"mousedown mouseup",r=>{let n;if(r.target===t.getDoc().documentElement){if(n=l.getRng(),t.getBody().focus(),"mousedown"===r.type){if(ll(n.startContainer))return;l.placeCaretAt(r.clientX,r.clientY)}else l.setRng(n)}})},b=()=>{Range.prototype.getClientRects||t.on("mousedown",r=>{if(!f(r)&&"HTML"===r.target.nodeName){let r=t.getBody();r.blur(),uZ.setEditorTimeout(t,()=>{r.focus()})}})},v=()=>{let r=sh(t);t.on("click",n=>{let o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&a.isEditable(o)&&(n.preventDefault(),t.selection.select(o),t.nodeChanged()),"A"===o.nodeName&&a.hasClass(o,r)&&0===o.childNodes.length&&a.isEditable(o.parentNode)&&(n.preventDefault(),l.select(o))})},y=()=>{t.on("keydown",t=>{if(!f(t)&&t.keyCode===n&&l.isCollapsed()&&0===l.getRng().startOffset){let r=l.getNode().previousSibling;if(r&&r.nodeName&&"table"===r.nodeName.toLowerCase())return t.preventDefault(),!1}return!0})},C=()=>{ss(t)||t.on("BeforeExecCommand mousedown",()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),iX(t)||g("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",r=>{let n;"HTML"===r.target.nodeName&&(n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged())}))},_=()=>{m&&t.on("keydown",r=>{!cX.metaKeyPressed(r)||r.shiftKey||37!==r.keyCode&&39!==r.keyCode||(r.preventDefault(),t.selection.getSel().modify("move",37===r.keyCode?"backward":"forward","lineboundary"))})},k=()=>{t.on("click",t=>{let r=t.target;do if("A"===r.tagName)return void t.preventDefault();while(r=r.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",t=>{t.preventDefault()})})};return bm(t)?(c&&(h(),v(),S(),p(),u&&(w(),x(),k())),d&&(b(),C(),E(),_())):(t.on("keydown",r=>{if(f(r)||r.keyCode!==cX.BACKSPACE)return;let n=l.getRng(),o=n.startContainer,i=n.startOffset,s=a.getRoot(),d=o;if(n.collapsed&&0===i){for(;d.parentNode&&d.parentNode.firstChild===d&&d.parentNode!==s;)d=d.parentNode;"BLOCKQUOTE"===d.nodeName&&(t.formatter.toggle("blockquote",void 0,d),(n=a.createRng()).setStart(o,0),n.setEnd(o,0),l.setRng(n))}}),(()=>{let r=t=>{let r=a.create("body"),n=t.cloneContents();return r.appendChild(n),l.serializer.serialize(r,{format:"html"})};t.on("keydown",l=>{let i=l.keyCode;if(!f(l)&&(i===o||i===n)&&t.selection.isEditable()){let n=t.selection.isCollapsed(),o=t.getBody();if(n&&!n7(t.schema,o)||!n&&!(n=>{let o=r(n),l=a.createRng();return l.selectNode(t.getBody()),o===r(l)})(t.selection.getRng()))return;l.preventDefault(),t.setContent(""),o.firstChild&&a.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}})})(),tM.windowsPhone||t.on("keyup focusin mouseup",r=>{cX.modifierPressed(r)||(t=>{let r=t.getBody(),n=t.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===r&&0===n.startOffset&&n.endOffset===r.childNodes.length})(t)||l.normalize()},!0),c&&(h(),v(),t.on("init",()=>{g("DefaultParagraphSeparator",ix(t))}),S(),y(),i.addNodeFilter("br",t=>{let r=t.length;for(;r--;)"Apple-interchange-newline"===t[r].attr("class")&&t[r].remove()}),u?(w(),x(),k()):p()),d&&(t.on("keydown",r=>{if(!f(r)&&r.keyCode===n&&t.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let t=l.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return a.remove(t),void r.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(a.remove(n),r.preventDefault())}}),b(),(()=>{let n=()=>{let n=a.getAttribs(l.getStart().cloneNode(!1));return()=>{let o=l.getStart();o!==t.getBody()&&(a.setAttrib(o,"style",null),r(n,t=>{o.setAttributeNode(t.cloneNode(!0))}))}},o=()=>!l.isCollapsed()&&a.getParent(l.getStart(),a.isBlock)!==a.getParent(l.getEnd(),a.isBlock);t.on("keypress",r=>{let a;return!(!(f(r)||8!==r.keyCode&&46!==r.keyCode)&&o()&&(a=n(),t.getDoc().execCommand("delete",!1),a(),r.preventDefault(),1))}),a.bind(t.getDoc(),"cut",r=>{if(!f(r)&&o()){let r=n();uZ.setEditorTimeout(t,()=>{r()})}})})(),C(),t.on("SetContent ExecCommand",t=>{"setcontent"!==t.type&&"mceInsertLink"!==t.command||r(a.select("a:not([data-mce-block])"),t=>{var r;let n=t.parentNode,o=a.getRoot();if((null==n?void 0:n.lastChild)===t){for(;n&&!a.isBlock(n);){if((null===(r=n.parentNode)||void 0===r?void 0:r.lastChild)!==n||n===o)return;n=n.parentNode}a.add(n,"br",{"data-mce-bogus":1})}})}),E(),_(),y())),{refreshContentEditable:H,isHidden:()=>{if(!d||t.removed)return!1;let r=t.selection.getSel();return!r||!r.rangeCount||0===r.rangeCount}}},ks=aN.DOM,kd=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,kc=t=>eI(t,t=>!1===M(t)),ku=t=>{let r=t.options.get,n=t.editorUpload.blobCache;return kc({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_unsafe_embeds:r("convert_unsafe_embeds"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:kd(t),sandbox_iframes:r("sandbox_iframes"),sandbox_iframes_exclusions:sX(t),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},km=t=>{let r=t.options.get;return kc({custom_elements:r("custom_elements"),extended_valid_elements:r("extended_valid_elements"),invalid_elements:r("invalid_elements"),invalid_styles:r("invalid_styles"),schema:r("schema"),valid_children:r("valid_children"),valid_classes:r("valid_classes"),valid_elements:r("valid_elements"),valid_styles:r("valid_styles"),verify_html:r("verify_html"),padd_empty_block_inline_children:r("format_empty_lines")})},kg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,kf=t=>{let r=kg(t),n=iK(t),o=t.contentCSS,a=()=>{r.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},l=()=>{t.removed?a():t.on("remove",a)};if(t.contentStyles.length>0){let r="";tz.each(t.contentStyles,t=>{r+=t+"\r\n"}),t.dom.addStyle(r)}let i=Promise.all(((t,r,n)=>{let{pass:o,fail:a}=eu(r,t=>tinymce.Resource.has(b1(t))),l=[...o.map(r=>{let n=tinymce.Resource.get(b1(r));return T(n)?Promise.resolve(kg(t).loadRawCss(r,n)):Promise.resolve()}),kg(t).loadAll(a)];return t.inline?l:l.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,o,n)).then(l).catch(l),s=iW(t);return s&&((t,r)=>{let n=rz(rU(ru(t.getBody()))),o=rg("style");t5(o,"type","text/css"),nr(o,rf(r)),nr(n,o),t.on("remove",()=>{nl(o)})})(t,s),i},kp=t=>{!0!==t.removed&&(bm(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{let r=t.dom.getRoot();t.inline||d7(t)&&t.selection.getStart(!0)!==r||dL(r).each(r=>{let n=r.getNode(),o=nz(n)?dL(n).getOr(r):r;t.selection.setRng(o.toRange())})})(t),t.nodeChanged({initial:!0});let r=sy(t);U(r)&&r.call(t,t),(t=>{let r=sE(t);r&&uZ.setEditorTimeout(t,()=>{let n;(n=!0===r?t:t.editorManager.get(r))&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(t)})(t))},kh=t=>{let r=t.getElement(),n=t.getDoc();t.inline&&(ks.addClass(r,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);let o=t.getBody();o.disabled=!0,t.readonly=ss(t),t._editableRoot=sd(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===ks.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=b7(t),t.schema=o9(km(t)),t.dom=aN(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:iU(t),referrerPolicy:iz(t),onSetAttrib:r=>{t.dispatch("SetAttrib",r)}}),t.parser=(t=>{let r=hH(ku(t),t.schema);return r.addAttributeFilter("src,href,style,tabindex",(r,n)=>{let o=t.dom,a="data-mce-"+n,l=r.length;for(;l--;){let i=r[l],s=i.attr(n);if(s&&!i.attr(a)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?((s=o.serializeStyle(o.parseStyle(s),i.name)).length||(s=null),i.attr(a,s),i.attr(n,s)):"tabindex"===n?(i.attr(a,s),i.attr(n,null)):i.attr(a,t.convertURL(s,n,i.name))}}}),r.addNodeFilter("script",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}}),sj(t)&&r.addNodeFilter("#cdata",r=>{var n;let o=r.length;for(;o--;){let a=r[o];a.type=8,a.name="#comment",a.value="[CDATA["+t.dom.encode(null!==(n=a.value)&&void 0!==n?n:"")+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",r=>{let n=r.length,o=t.schema.getNonEmptyElements();for(;n--;){let t=r[n];t.isEmpty(o)&&0===t.getAll("br").length&&t.append(new md("br",1))}}),r})(t),t.serializer=bx((t=>{let r=t.options.get;return{...ku(t),...km(t),...kc({remove_trailing_brs:r("remove_trailing_brs"),pad_empty_with_br:r("pad_empty_with_br"),url_converter:r("url_converter"),url_converter_scope:r("url_converter_scope"),element_format:r("element_format"),entities:r("entities"),entity_encoding:r("entity_encoding"),indent:r("indent"),indent_after:r("indent_after"),indent_before:r("indent_before")})}})(t),t),t.selection=bC(t.dom,t.getWin(),t.serializer,t),t.annotator=cz(t),t.formatter=vd(t),t.undoManager=vu(t),t._nodeChangeDispatcher=new xb(t),t._selectionOverrides=_U(t),(t=>{let r=oo(),n=or(!1),o=aM(r=>{t.dispatch("longpress",{...r,type:"longpress"}),n.set(!0)},400);t.on("touchstart",t=>{Cg(t).each(a=>{o.cancel();let l={x:a.clientX,y:a.clientY,target:t.target};o.throttle(t),n.set(!1),r.set(l)})},!0),t.on("touchmove",a=>{o.cancel(),Cg(a).each(o=>{r.on(a=>{((t,r)=>{let n=Math.abs(t.clientX-r.x),o=Math.abs(t.clientY-r.y);return n>5||o>5})(o,a)&&(r.clear(),n.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",a=>{o.cancel(),"touchcancel"!==a.type&&r.get().filter(t=>t.target.isEqualNode(a.target)).each(()=>{n.get()?a.preventDefault():t.dispatch("tap",{...a,type:"tap"})})},!0)})(t),(t=>{t.on("click",r=>{t.dom.getParent(r.target,"details")&&r.preventDefault()})})(t),t.parser.addNodeFilter("details",r=>{let n=sK(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),t.serializer.addNodeFilter("details",r=>{let n=sY(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),(t=>{let r="contenteditable",n=" "+tz.trim(sU(t))+" ",o=" "+tz.trim(sI(t))+" ",a=CC(n),l=CC(o),i=sz(t);i.length>0&&t.on("BeforeSetContent",r=>{((t,r,n)=>{let o=r.length,a=n.content;if("raw"!==n.format){for(;o--;)a=a.replace(r[o],CE(t,a,sI(t)));n.content=a}})(t,i,r)}),t.parser.addAttributeFilter("class",t=>{let n=t.length;for(;n--;){let o=t[n];a(o)?o.attr(r,"true"):l(o)&&o.attr(r,"false")}}),t.serializer.addAttributeFilter(r,t=>{let n=t.length;for(;n--;){let o=t[n];(a(o)||l(o))&&(i.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(r,null))}})})(t),bm(t)||((t=>{t.on("mousedown",r=>{r.detail>=3&&(r.preventDefault(),_p(t))})})(t),kl(t));let a=xh(t);Cm(t,a),(t=>{t.on("NodeChange",Y(Cv,t))})(t),(t=>{var r;let n=t.dom,o=ix(t),a=null!==(r=iQ(t))&&void 0!==r?r:"",l=(r,i)=>{if((t=>{if(vf(t)){let r=t.keyCode;return!vp(t)&&(cX.metaKeyPressed(t)||t.altKey||r>=112&&r<=123||el(vm,r))}return!1})(r))return;let s=t.getBody(),d=!(vf(r)&&!(vp(r)||"keyup"===r.type&&229===r.keyCode))&&((t,r,n)=>{if(t.isEmpty(r,void 0,{skipBogus:!1,includeZwsp:!0})){let o=r.firstElementChild;return!o||!t.getStyle(r.firstElementChild,"padding-left")&&!t.getStyle(r.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,s,o);(""!==n.getAttrib(s,vg)!==d||i)&&(n.setAttrib(s,vg,d?a:null),((t,r)=>{t.dispatch("PlaceholderToggle",{state:r})})(t,d),t.on(d?"keydown":"keyup",l),t.off(d?"keyup":"keydown",l))};tn(a)&&t.on("init",r=>{l(r,!0),t.on("change SetContent ExecCommand",l),t.on("paste",r=>uZ.setEditorTimeout(t,()=>l(r)))})})(t),_c(t);let l=ej(t.plugins,"rtc").bind(t=>et.from(t.setup)).fold(()=>(t.rtcInstance=bu(t),et.none()),r=>(t.rtcInstance=(()=>{let t=q(null),r=q("");return{init:{bindEvents:H},undoManager:{beforeChange:H,add:t,undo:t,redo:t,clear:H,reset:H,hasUndo:J,hasRedo:J,transact:t,ignore:H,extra:H},formatter:{match:J,matchAll:q([]),matchNode:q(void 0),canApply:J,closest:r,apply:H,remove:H,toggle:H,formatChanged:q({unbind:H})},editor:{getContent:r,setContent:q({content:"",html:""}),insertContent:q(""),addVisual:H},selection:{getContent:r},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:q(et.none())}}})(),et.some(()=>r().then(r=>(t.rtcInstance=(t=>{let r=t=>O(t)?t:{},{init:n,undoManager:o,formatter:a,editor:l,selection:i,autocompleter:s,raw:d}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(t,r,n)=>o.transact(n),ignore:(t,r)=>o.ignore(r),extra:(t,r,n,a)=>o.extra(n,a)},formatter:{match:(t,n,o,l)=>a.match(t,r(n),l),matchAll:a.matchAll,matchNode:a.matchNode,canApply:t=>a.canApply(t),closest:t=>a.closest(t),apply:(t,n,o)=>a.apply(t,r(n)),remove:(t,n,o,l)=>a.remove(t,r(n)),toggle:(t,n,o)=>a.toggle(t,r(n)),formatChanged:(t,r,n,o,l)=>a.formatChanged(r,n,o,l)},editor:{getContent:t=>l.getContent(t),setContent:(t,r)=>({content:l.setContent(t,r),html:""}),insertContent:(t,r)=>(l.insertContent(t),""),addVisual:l.addVisual},selection:{getContent:(t,r)=>i.getContent(r)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>et.some(d.getRawModel())}}})(r),r.rtc.isRemote)))));(t=>{let r=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),sw(t)||(r.body.spellcheck=!1,ks.setAttrib(n,"spellcheck","false")),t.quirks=ki(t),(t=>{t.dispatch("PostRender")})(t);let o=iY(t);void 0!==o&&(n.dir=o);let a=sx(t);a&&t.on("BeforeSetContent",t=>{tz.each(a,r=>{t.content=t.content.replace(r,t=>"<!--mce:protected "+escape(t)+"-->")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",r=>{t.composing="compositionstart"===r.type})})(t),(t=>{let r=sQ(t);T(sJ(t))||!M(r)&&"INVALID"!=("gpl"===r.toLowerCase()||r.length>=64&&r.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),l.fold(()=>{let r=(t=>{let r=!1,n=setTimeout(()=>{r||t.setProgressState(!0)},500);return()=>{clearTimeout(n),r=!0,t.setProgressState(!1)}})(t);kf(t).then(()=>{kp(t),r()})},r=>{t.setProgressState(!0),kf(t).then(()=>{r().then(r=>{t.setProgressState(!1),kp(t),bp(t)},r=>{t.notificationManager.open({type:"error",text:String(r)}),kp(t),bp(t)})})})},kb=aN.DOM,kv=aN.DOM,ky=(t,r)=>({editorContainer:t,iframeContainer:r,api:{}}),kC=t=>{let r=t.getElement();return t.inline?ky(null):(t=>{let r=kv.create("div");return kv.insertAfter(r,t),ky(r,r)})(r)},kE=async t=>{var r;t.dispatch("ScriptsLoaded"),(t=>{let r=tz.trim(iP(t)),n=t.ui.registry.getAll().icons;eP({...bI.get("default").icons,...bI.get(r).icons},(r,o)=>{eH(n,o)||t.ui.registry.addIcon(o,r)})})(t),(t=>{let r=i1(t);if(T(r)){let n=bY.get(r);t.theme=n(t,bY.urls[r])||{},U(t.theme.init)&&t.theme.init(t,bY.urls[r]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{let r=i3(t),n=bU.get(r);t.model=n(t,bU.urls[r])})(t),(t=>{let r=[];ed(su(t),n=>{((t,r,n)=>{let o=bK.get(n),a=bK.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=tz.trim(n),o&&-1===tz.inArray(r,n)){if(t.plugins[n])return;try{let l=o(t,a)||{};t.plugins[n]=l,U(l.init)&&(l.init(t,a),r.push(n))}catch(r){((t,r,n)=>{let o=aP.translate(["Failed to initialize plugin: {0}",r]);c$(t,"PluginLoadError",{message:o}),b0(o,n),bZ(t,o)})(t,n,r)}}})(t,r,n.replace(/^\-/,""))})})(t);let n=await (t=>{let r=t.getElement();return t.orgDisplay=r.style.display,T(i1(t))?(t=>{let r=t.theme.renderUI;return r?r():kC(t)})(t):U(i1(t))?(t=>{let r=t.getElement(),n=i1(t)(t,r);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n})(t):kC(t)})(t);((t,r)=>{let n={show:et.from(r.show).getOr(H),hide:et.from(r.hide).getOr(H),isEnabled:et.from(r.isEnabled).getOr(ee),setEnabled:n=>{t.mode.isReadOnly()||et.from(r.setEnabled).each(t=>t(n))}};t.ui={...t.ui,...n}})(t,et.from(n.api).getOr({})),t.editorContainer=n.editorContainer,t.contentCSS=t.contentCSS.concat(b2(t,iq(t)),b2(t,iK(t))),t.inline?kh(t):(((t,r)=>{let n=tM.browser.isFirefox()?sb(t):"Rich Text Area",o=t.translate(n),a=t9(ru(t.getElement()),"tabindex").bind(ta),l=((t,r,n,o)=>{let a=rg("iframe");return o.each(t=>t5(a,"tabindex",t)),t6(a,n),t6(a,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),ri(a,"tox-edit-area__iframe"),a})(t.id,o,ih(t),a).dom;l.onload=()=>{l.onload=null,t.dispatch("load")},t.contentAreaContainer=r.iframeContainer,t.iframeElement=l,t.iframeHTML=(t=>{let r=ib(t)+"<html><head>";iv(t)!==t.documentBaseUrl&&(r+='<base href="'+t.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let n=iy(t),o=iC(t),a=t.translate(sb(t));return iE(t)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+iE(t)+'" />'),r+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${t.id}" aria-label="${a}"><br></body></html>`})(t),kb.add(r.iframeContainer,l)})(t,r={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer}),r.editorContainer&&(r.editorContainer.style.display=t.orgDisplay,t.hidden=kb.isHidden(r.editorContainer)),t.getElement().style.display="none",kb.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,(t=>{let r=t.iframeElement,n=()=>{t.contentDocument=r.contentDocument,kh(t)};if(sV(t)||tM.browser.isFirefox()){let r=t.getDoc();r.open(),r.write(t.iframeHTML),r.close(),n()}else{let o=nu(ru(r),"load",ee,()=>{o.unbind(),n()});r.srcdoc=t.iframeHTML}})(t))},kw=aN.DOM,kx=t=>"-"===t.charAt(0),k_=(t,r,n)=>et.from(r).filter(t=>tn(t)&&!bI.has(t)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:et.some(r)})),kk=(t,r)=>{var n,o;let a=aA.ScriptLoader,l=()=>{!t.removed&&(t=>{let r=i1(t);return!T(r)||I(bY.get(r))})(t)&&(t=>{let r=i3(t);return I(bU.get(r))})(t)&&kE(t)};((t,r)=>{let n=i1(t);if(T(n)&&!kx(n)&&!eH(bY.urls,n)){let o=i2(t),a=o?t.documentBaseURI.toAbsolute(o):`themes/${n}/theme${r}.js`;bY.load(n,a).catch(()=>{bQ(t,"ThemeLoadError",bJ("theme",a,n))})}})(t,r),((t,r)=>{let n=i3(t);if("plugin"!==n&&!eH(bU.urls,n)){let o=i8(t),a=T(o)?t.documentBaseURI.toAbsolute(o):`models/${n}/model${r}.js`;bU.load(n,a).catch(()=>{bQ(t,"ModelLoadError",bJ("model",a,n))})}})(t,r),((t,r)=>{let n=ij(r),o=iH(r);if(!aP.hasCode(n)&&"en"!==n){let a=tn(o)?o:`${r.editorManager.baseURL}/langs/${n}.js`;t.add(a).catch(()=>{bQ(r,"LanguageLoadError",bJ("language",a,n))})}})(a,t),n=a,ed((t=>{let r=[],n=t=>{r.push(t)};for(let r=0;r<t.length;r++)t[r].each(n);return r})([k_(o=t,"default",r),et.from(iD(o)).filter(tn).map(t=>({url:t,name:et.none()})).orThunk(()=>k_(o,iP(o),""))]),t=>{n.add(t.url).catch(()=>{bQ(o,"IconsLoadError",bJ("icons",t.url,t.name.getOrUndefined()))})}),((t,r)=>{let n=(r,n)=>{bK.load(r,n).catch(()=>{bQ(t,"PluginLoadError",bJ("plugin",n,r))})};eP(sm(t),(r,o)=>{n(o,r),t.options.set("plugins",su(t).concat(o))}),ed(su(t),t=>{!(t=tz.trim(t))||bK.urls[t]||kx(t)||n(t,`plugins/${t}/plugin${r}.js`)})})(t,r),a.loadQueue().then(l,l)},kS=tA().deviceType,kN=kS.isPhone(),kR=kS.isTablet(),kA=t=>F(t)?[]:em(es(P(t)?t:t.split(/[ ,]/),te),tn),kT=(t,r)=>{var n,o;let a=((r,n)=>{let o={},a={};return eF(r,(r,n)=>el(t,n),eM(o),eM(a)),{t:o,f:a}})(r);return n=a.t,o=a.f,{sections:q(n),options:q(o)}},kO=(t,r)=>eH(t.sections(),r),kB=(t,r)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ej(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...r?{menubar:!1}:{}}),kP=(t,r)=>{var n;let o=null!==(n=r.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?tz.extend({},t.external_plugins,o):o},kD=(t,r,n,o,a)=>{var l;let i=kT(["mobile"],EC(t?{mobile:kB(null!==(l=a.mobile)&&void 0!==l?l:{},r)}:{},a)),s=tz.extend(n,o,i.options(),t&&kO(i,"mobile")?((t,r,n={})=>{let o=ej(t.sections(),r).getOr({});return tz.extend({},n,o)})(i,"mobile"):{},{external_plugins:kP(o,i.options())});return((t,r,n,o)=>{let a,l;let i=kA(n.forced_plugins),s=kA(o.plugins),d=kO(r,a="mobile")?r.sections()[a]:{},c=(l=d.plugins?kA(d.plugins):s,t&&kO(r,"mobile")?l:s),u=[...kA(i),...kA(c)];return tz.extend(o,{forced_plugins:i,plugins:u})})(t,i,o,s)},kL=t=>{(t=>{let r=r=>()=>{var n;ed("left,center,right,justify".split(","),n=>{r!==n&&t.formatter.remove("align"+n)}),"none"!==r&&(n="align"+r,t.formatter.toggle(n,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})})(t),(t=>{let r=r=>()=>{let n=t.selection;return ei(n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),n=>I(t.formatter.matchNode(n,r)))};t.editorCommands.addCommands({JustifyLeft:r("alignleft"),JustifyCenter:r("aligncenter"),JustifyRight:r("alignright"),JustifyFull:r("alignjustify")},"state")})(t)},kM=(t,r)=>{let n=t.selection,o=t.dom;return/^ | $/.test(r)?((t,r,n,o)=>{let a=ru(t.getRoot());return n=gi(a,l$.fromRangeStart(r),o)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),gs(a,l$.fromRangeEnd(r),o)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),r,t.schema):r},kF=(t,r)=>{if(t.selection.isEditable()){let{content:n,details:o}=(t=>{if("string"!=typeof t){let r=tz.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:r}}return{content:t,details:{}}})(r);hK(t,{...o,content:kM(t,n),format:"html",set:!1,selection:!0}).each(r=>{let n;let a=(n=r.content,bg(t).editor.insertContent(n,o));hY(t,a,r),t.addVisual()})}},kI={"font-size":"size","font-family":"face"},kU=t3("font"),kz=t=>(r,n)=>et.from(n).map(ru).filter(tJ).bind(n=>{let o;return fA(ru(n.dom),r=>r6(r,t).orThunk(()=>kU(r)?ej(kI,t).bind(t=>t9(r,t)):et.none()),t=>ry(ru(r),t)).or((o=n.dom,et.from(aN.DOM.getStyle(o,t,!0))))}).getOr(""),kj=kz("font-size"),kH=$(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),kz("font-family")),k$=t=>dL(t.getBody()).bind(t=>{let r=t.container();return et.from(n$(r)?r.parentNode:r)}),kV=(t,r)=>{var n;return n=V(et.some,r),et.from(t.selection.getRng()).bind(r=>{let n=t.getBody();return r.startContainer===n&&0===r.startOffset?et.none():et.from(t.selection.getStart(!0))}).orThunk(Y(k$,t)).map(ru).filter(tJ).bind(n)},kq=(t,r)=>{if(/^[0-9.]+$/.test(r)){let n=parseInt(r,10);if(n>=1&&n<=7){let o=tz.explode(t.options.get("font_size_style_values")),a=tz.explode(t.options.get("font_size_classes"));return a.length>0?a[n-1]||r:o[n-1]||r}}return r},kW=t=>es(t.split(/\s*,\s*/),t=>-1===t.indexOf(" ")||e4(t,'"')||e4(t,"'")?t:`'${t}'`).join(","),kK=(t,r)=>{let n=t.dom,o=t.selection.getRng(),a=r?t.selection.getStart():t.selection.getEnd(),l=r?o.startContainer:o.endContainer,i=wN(n,l);if(!i||!i.isContentEditable)return;let s=r?r7:ne,d=ix(t);((t,r,n,o)=>{let a=t.dom,l=t=>a.isBlock(t)&&t.parentElement===n,i=l(r)?r:a.getParent(o,l,n);return et.from(i).map(ru)})(t,a,i,l).each(r=>{let n=wO(t,l,r.dom,i,!1,d);s(r,ru(n)),t.selection.setCursorLocation(n,0),t.dispatch("NewBlock",{newBlock:n}),wC(t,"insertParagraph")})},kY=t=>{kL(t),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":r=>{let n;let o=t.getDoc();try{o.execCommand(r)}catch(t){n=!0}if("paste"!==r||o.queryCommandEnabled(r)||(n=!0),n||!o.queryCommandSupported(r)){let r=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tM.os.isMacOS()||tM.os.isiOS())&&(r=r.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:r,type:"error"})}}})})(t),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(t),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(r,n,o)=>{let a=0;t.dom.getParent(t.selection.getNode(),r=>!nD(r)||a++!==o||(t.selection.select(r),!1),t.getBody())},mceSelectNode:(r,n,o)=>{t.selection.select(o)},selectAll:()=>{let r=t.dom.getParent(t.selection.getStart(),nZ);if(r){let n=t.dom.createRng();n.selectNodeContents(r),t.selection.setRng(n)}}})})(t),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{let r=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(r)},insertImage:(r,n,o)=>{kF(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(r,n,o)=>{kF(t,t.dom.encode(o))},insertHTML:(r,n,o)=>{kF(t,o)},mceInsertContent:(r,n,o)=>{kF(t,o)},mceSetContent:(r,n,o)=>{t.setContent(o)},mceReplaceContent:(r,n,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(sR(t))}})})(t),(t=>{let r=(r,n,o)=>{let a=T(o)?{href:o}:o,l=t.dom.getParent(t.selection.getNode(),"a");O(a)&&T(a.href)&&(a.href=a.href.replace(/ /g,"%20"),l&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,l))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){let r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:r,createLink:r})})(t),t.editorCommands.addCommands({Indent:()=>{Cs(t,"indent")},Outdent:()=>{Cd(t)}}),t.editorCommands.addCommands({Outdent:()=>Ca(t)},"state"),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{kK(t,!0)},InsertNewBlockAfter:()=>{kK(t,!1)}})})(t),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{xe(wH,t)},mceInsertNewLine:(r,n,o)=>{xt(t,o)},InsertLineBreak:(r,n,o)=>{xe(wX,t)}})})(t),(t=>{let r=(r,n)=>{t.formatter.toggle(r,n),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>{r(t)},"ForeColor,HiliteColor":(t,n,o)=>{r(t,{value:o})},BackColor:(t,n,o)=>{r("hilitecolor",{value:o})},FontName:(r,n,o)=>{((t,r)=>{let n=kq(t,r);t.formatter.toggle("fontname",{value:kW(n)}),t.nodeChanged()})(t,o)},FontSize:(r,n,o)=>{t.formatter.toggle("fontsize",{value:kq(t,o)}),t.nodeChanged()},LineHeight:(r,n,o)=>{t.formatter.toggle("lineheight",{value:String(o)}),t.nodeChanged()},Lang:(t,n,o)=>{var a;r(t,{value:o.code,customValue:null!==(a=o.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{t.formatter.remove(r)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(t,n,o)=>{r(T(o)?o:"p")},mceToggleFormat:(t,n,o)=>{r(o)}})})(t),(t=>{let r=r=>t.formatter.match(r);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>r(t),mceBlockQuote:()=>r("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>kV(t,r=>kH(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("FontSize",()=>kV(t,r=>kj(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("LineHeight",()=>kV(t,r=>fA(r,t=>r6(t,"line-height"),Y(ry,ru(t.getBody()))).getOrThunk(()=>String(parseFloat(r8(r,"line-height"))/parseFloat(r8(r,"font-size"))))).getOr(""))})(t),(t=>{t.editorCommands.addCommands({mceRemoveNode:(r,n,o)=>{let a=null!=o?o:t.selection.getNode();if(a!==t.getBody()){let r=t.selection.getBookmark();t.dom.remove(a,!0),t.selection.moveToBookmark(r)}},mcePrint:()=>{t.getWin().print()},mceFocus:(r,n,o)=>{var a;a=!0===o,t.removed||(a?u9(t):(t=>{let r;let n=t.selection,o=t.getBody(),a=n.getRng();t.quirks.refreshContentEditable(),I(t.bookmark)&&!u6(t)&&uG(t).each(r=>{t.selection.setRng(r),a=r});let l=(r=n.getNode(),t.dom.getParent(r,r=>"true"===t.dom.getContentEditable(r)));if(l&&t.dom.isChildOf(l,o))return u5(l),u8(t,a),void u9(t);t.inline||(tM.browser.isOpera()||u5(o),t.getWin().focus()),(tM.browser.isFirefox()||t.inline)&&(u5(o),u8(t,a)),u9(t)})(t))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(t)},kG=["toggleview"],kX=t=>el(kG,t.toLowerCase());class kZ{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,r=!1,n,o){let a=this.editor,l=t.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||i?(t=>{uG(t).each(r=>t.selection.setRng(r))})(a):a.focus()),a.dispatch("BeforeExecCommand",{command:t,ui:r,value:n}).isDefaultPrevented()))return!1;let s=this.commands.exec[l];return!!U(s)&&(s(l,r,n),a.dispatch("ExecCommand",{command:t,ui:r,value:n}),!0)}queryCommandState(t){if(!kX(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let r=t.toLowerCase(),n=this.commands.state[r];return!!U(n)&&n(r)}queryCommandValue(t){if(!kX(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let r=t.toLowerCase(),n=this.commands.value[r];return U(n)?n(r):""}addCommands(t,r="exec"){let n=this.commands;eP(t,(t,o)=>{ed(o.toLowerCase().split(","),o=>{n[r][o]=t})})}addCommand(t,r,n){let o=t.toLowerCase();this.commands.exec[o]=(t,o,a)=>r.call(null!=n?n:this.editor,o,a)}queryCommandSupported(t){let r=t.toLowerCase();return!!this.commands.exec[r]}addQueryStateHandler(t,r,n){this.commands.state[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}addQueryValueHandler(t,r,n){this.commands.value[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}}let kQ="data-mce-contenteditable",kJ=(t,r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},k0=(t,r)=>{t.dom.contentEditable=r?"true":"false"},k1=t=>t.readonly,k2=t=>{t.parser.addAttributeFilter("contenteditable",r=>{k1(t)&&ed(r,t=>{t.attr(kQ,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(kQ,r=>{k1(t)&&ed(r,t=>{t.attr("contenteditable",t.attr(kQ))})}),t.serializer.addTempAttr(kQ)},k3=["copy"],k8=tz.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class k5{static isNative(t){return!!k8[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||J}fire(t,r){return this.dispatch(t,r)}dispatch(t,r){let n=t.toLowerCase(),o=au(n,null!=r?r:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);let a=this.bindings[n];if(a)for(let t=0,r=a.length;t<r;t++){let r=a[t];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,r,n,o){if(!1===r&&(r=J),r){let a={func:r,removed:!1};o&&tz.extend(a,o);let l=t.toLowerCase().split(" "),i=l.length;for(;i--;){let t=l[i],r=this.bindings[t];r||(r=[],this.toggleEvent(t,!0)),r=n?[a,...r]:[...r,a],this.bindings[t]=r}}return this}off(t,r){if(t){let n=t.toLowerCase().split(" "),o=n.length;for(;o--;){let a=n[o],l=this.bindings[a];if(!a)return eP(this.bindings,(t,r)=>{this.toggleEvent(r,!1),delete this.bindings[r]}),this;if(l){if(r){let t=eu(l,t=>t.func===r);l=t.fail,this.bindings[a]=l,ed(t.pass,t=>{t.removed=!0})}else l.length=0;l.length||(this.toggleEvent(t,!1),delete this.bindings[a])}}}else eP(this.bindings,(t,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,r,n){return this.on(t,r,n,{once:!0})}has(t){t=t.toLowerCase();let r=this.bindings[t];return!(!r||0===r.length)}}let k6=t=>(t._eventDispatcher||(t._eventDispatcher=new k5({scope:t,toggleEvent:(r,n)=>{k5.isNative(r)&&t.toggleNativeEvent&&t.toggleNativeEvent(r,n)}})),t._eventDispatcher),k4={fire(t,r,n){return this.dispatch(t,r,n)},dispatch(t,r,n){if(this.removed&&"remove"!==t&&"detach"!==t)return au(t.toLowerCase(),null!=r?r:{},this);let o=k6(this).dispatch(t,r);if(!1!==n&&this.parent){let r=this.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(t,o,!1),r=r.parent?r.parent():void 0}return o},on(t,r,n){return k6(this).on(t,r,n)},off(t,r){return k6(this).off(t,r)},once(t,r){return k6(this).once(t,r)},hasEventListeners(t){return k6(this).has(t)}},k9=aN.DOM,k7=(t,r)=>{if("selectionchange"===r)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(r))return t.getDoc().documentElement;let n=iJ(t);return n?(t.eventRoot||(t.eventRoot=k9.select(n)[0]),t.eventRoot):t.getBody()},Se=(t,r,n)=>{var o,a;t.hidden||k1(t)?k1(t)&&(o=t,"click"!==(a=n).type||cX.metaKeyPressed(a)?el(k3,a.type)&&o.dispatch(a.type,a):rZ(ru(a.target),"a",t=>ry(t,ru(o.getBody()))).bind(t=>t9(t,"href")).each(t=>{if(a.preventDefault(),/^#/.test(t)){let r=o.dom.select(`${t},[name="${e5(t,"#")}"]`);r.length&&o.selection.scrollIntoView(r[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})):t.dispatch(r,n)},St=(t,n)=>{if(t.delegates||(t.delegates={}),t.delegates[n]||t.removed)return;let o=k7(t,n);if(iJ(t)){if(r||(r={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||r&&(eP(r,(r,n)=>{t.dom.unbind(k7(t,n))}),r=null)})),r[n])return;let a=r=>{let o=r.target,a=t.editorManager.get(),l=a.length;for(;l--;){let t=a[l].getBody();(t===o||k9.isChildOf(o,t))&&Se(a[l],n,r)}};r[n]=a,k9.bind(o,n,a)}else{let r=r=>{Se(t,n,r)};k9.bind(o,n,r),t.delegates[n]=r}},Sr={...k4,bindPendingEventDelegates(){let t=this;tz.each(t._pendingNativeEvents,r=>{St(t,r)})},toggleNativeEvent(t,r){"focus"!==t&&"blur"!==t&&(this.removed||(r?this.initialized?St(this,t):this._pendingNativeEvents?this._pendingNativeEvents.push(t):this._pendingNativeEvents=[t]:this.initialized&&this.delegates&&(this.dom.unbind(k7(this,t),t,this.delegates[t]),delete this.delegates[t])))},unbindAllNativeEvents(){let t=this,r=t.getBody(),n=t.dom;t.delegates&&(eP(t.delegates,(r,n)=>{t.dom.unbind(k7(t,n),n,r)}),delete t.delegates),!t.inline&&r&&n&&(r.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(r),n.unbind(t.getContainer()))}},Sn=t=>T(t)?{value:t.split(/[ ,]/),valid:!0}:j(t,T)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},So=(t,r)=>t+(to(r.message)?"":`. ${r.message}`),Sa=t=>t.valid,Sl=(t,r,n="")=>{let o=r(t);return L(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},Si=["design","readonly"],Ss=(t,r,n,o)=>{let a=n[r.get()],l=n[o];try{l.activate()}catch(t){return void console.error(`problem while activating editor mode ${o}:`,t)}a.deactivate(),a.editorReadOnly!==l.editorReadOnly&&((t,r)=>{var n;let o=ru(t.getBody());rc(o,n="mce-content-readonly")&&!r?rd(o,n):r&&ri(o,n),r?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{et.from(t.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,k0(o,!1),ed(nw(o,'*[contenteditable="true"]'),t=>{t5(t,kQ,"true"),k0(t,!1)})):(t.readonly=!1,t.hasEditableRoot()&&k0(o,!0),ed(nw(o,`*[${kQ}="true"]`),t=>{re(t,kQ),k0(t,!0)}),kJ(t,"StyleWithCSS",!1),kJ(t,"enableInlineTableEditing",!1),kJ(t,"enableObjectResizing",!1),u4(t)&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())})(t,l.editorReadOnly),r.set(o),((t,r)=>{t.dispatch("SwitchMode",{mode:r})})(t,o)},Sd=tz.each,Sc=tz.explode,Su={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Sm=tz.makeMap("alt,ctrl,shift,meta,access"),Sg=t=>{let r;let n={},o=tM.os.isMacOS()||tM.os.isiOS();Sd(Sc(t.toLowerCase(),"+"),t=>{t in Sm?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=Su[t]||t.toUpperCase().charCodeAt(0))});let a=[n.keyCode];for(r in Sm)n[r]?a.push(r):n[r]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Sf{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;let r=this;t.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(Sd(r.shortcuts,n=>{r.matchShortcut(t,n)&&(r.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&r.executeShortcutAction(n))}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(t,r,n,o){let a=this,l=a.normalizeCommandFunc(n);return Sd(Sc(tz.trim(t)),t=>{let n=a.createShortcut(t,r,l,o);a.shortcuts[n.id]=n}),!0}remove(t){let r=this.createShortcut(t);return!!this.shortcuts[r.id]&&(delete this.shortcuts[r.id],!0)}normalizeCommandFunc(t){let r=this;return"string"==typeof t?()=>{r.editor.execCommand(t,!1,null)}:tz.isArray(t)?()=>{r.editor.execCommand(t[0],t[1],t[2])}:t}createShortcut(t,r,n,o){let a=tz.map(Sc(t,">"),Sg);return a[a.length-1]=tz.extend(a[a.length-1],{func:n,scope:o||this.editor}),tz.extend(a[0],{desc:this.editor.translate(r),subpatterns:a.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,r){return!!r&&r.ctrl===t.ctrlKey&&r.meta===t.metaKey&&r.alt===t.altKey&&r.shift===t.shiftKey&&!!(t.keyCode===r.keyCode||t.charCode&&t.charCode===r.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}let Sp=()=>{let t=(()=>{let t={},r={},n={},o={},a={},l={},i={},s={},d=(t,r)=>(n,o)=>{t[n.toLowerCase()]={...o,type:r}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(r,"menuitem"),addNestedMenuItem:d(r,"nestedmenuitem"),addToggleMenuItem:d(r,"togglemenuitem"),addAutocompleter:d(n,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(l,"contexttoolbar"),addContextForm:d(l,"contextform"),addSidebar:d(i,"sidebar"),addView:d(s,"views"),addIcon:(t,r)=>o[t.toLowerCase()]=r,getAll:()=>({buttons:t,menuItems:r,icons:o,popups:n,contextMenus:a,contextToolbars:l,sidebars:i,views:s})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Sh=aN.DOM,Sb=tz.extend,Sv=tz.each;class Sy{constructor(t,r,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Sb(this,Sr),this.id=t,this.hidden=!1;let o=kD(kN||kR,kN,r,n.defaultOptions,r);this.options=((t,r)=>{let n={},o={},a=(t,r,n)=>{let a=Sl(r,n);return Sa(a)?(o[t]=a.value,!0):(console.warn(So(`Invalid value passed for the ${t} option`,a)),!1)},l=t=>eH(n,t);return{register:(t,l)=>{let i=T(l.processor)?(t=>{let r=(()=>{switch(t){case"array":return P;case"boolean":return L;case"function":return U;case"number":return z;case"object":return O;case"string":return T;case"string[]":return Sn;case"object[]":return t=>j(t,O);case"regexp":return t=>A(t,RegExp);default:return ee}})();return n=>Sl(n,r,`The value must be a ${t}.`)})(l.processor):l.processor,s=((t,r,n)=>{if(!M(r)){let o=Sl(r,n);if(Sa(o))return o.value;console.error(So(`Invalid default value passed for the "${t}" option`,o))}})(t,l.default,i);n[t]={...l,default:s,processor:i},ej(o,t).orThunk(()=>ej(r,t)).each(r=>a(t,r,i))},isRegistered:l,get:t=>ej(o,t).orThunk(()=>ej(n,t).map(t=>t.default)).getOrUndefined(),set:(t,r)=>{if(l(t)){let o=n[t];return o.immutable?(console.error(`"${t}" is an immutable option and cannot be updated`),!1):a(t,r,o.processor)}return console.warn(`"${t}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:t=>{let r=l(t);return r&&delete o[t],r},isSet:t=>eH(o,t)}})(0,o),(t=>{let r=t.options.register;r("id",{processor:"string",default:t.id}),r("selector",{processor:"string"}),r("target",{processor:"object"}),r("suffix",{processor:"string"}),r("cache_suffix",{processor:"string"}),r("base_url",{processor:"string"}),r("referrer_policy",{processor:"string",default:""}),r("language_load",{processor:"boolean",default:!0}),r("inline",{processor:"boolean",default:!1}),r("iframe_attrs",{processor:"object",default:{}}),r("doctype",{processor:"string",default:"<!DOCTYPE html>"}),r("document_base_url",{processor:"string",default:t.documentBaseUrl}),r("body_id",{processor:ip(t,"tinymce"),default:"tinymce"}),r("body_class",{processor:ip(t),default:""}),r("content_security_policy",{processor:"string",default:""}),r("br_in_pre",{processor:"boolean",default:!0}),r("forced_root_block",{processor:t=>{let r=T(t)&&tn(t);return r?{value:t,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),r("forced_root_block_attrs",{processor:"object",default:{}}),r("newline_behavior",{processor:t=>{let r=el(["block","linebreak","invert","default"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),r("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),r("no_newline_selector",{processor:"string",default:""}),r("keep_styles",{processor:"boolean",default:!0}),r("end_container_on_empty_block",{processor:t=>L(t)||T(t)?{valid:!0,value:t}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),r("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),r("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),r("font_size_classes",{processor:"string",default:""}),r("automatic_uploads",{processor:"boolean",default:!0}),r("images_reuse_filename",{processor:"boolean",default:!1}),r("images_replace_blob_uris",{processor:"boolean",default:!0}),r("icons",{processor:"string",default:""}),r("icons_url",{processor:"string",default:""}),r("images_upload_url",{processor:"string",default:""}),r("images_upload_base_path",{processor:"string",default:""}),r("images_upload_credentials",{processor:"boolean",default:!1}),r("images_upload_handler",{processor:"function"}),r("language",{processor:"string",default:"en"}),r("language_url",{processor:"string",default:""}),r("entity_encoding",{processor:"string",default:"named"}),r("indent",{processor:"boolean",default:!0}),r("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_use_margin",{processor:"boolean",default:!1}),r("indentation",{processor:"string",default:"40px"}),r("content_css",{processor:t=>{let r=!1===t||T(t)||j(t,T);return r?T(t)?{value:es(t.split(","),te),valid:r}:P(t)?{value:t,valid:r}:!1===t?{value:[],valid:r}:{value:t,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:st(t)?[]:["default"]}),r("content_style",{processor:"string"}),r("content_css_cors",{processor:"boolean",default:!1}),r("font_css",{processor:t=>{let r=T(t)||j(t,T);return r?{value:P(t)?t:es(t.split(","),te),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),r("inline_boundaries",{processor:"boolean",default:!0}),r("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),r("object_resizing",{processor:t=>{let r=L(t)||T(t);return r?!1===t||is.isiPhone()||is.isiPad()?{value:"",valid:r}:{value:!0===t?"table,img,figure.image,div,video,iframe":t,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!id}),r("resize_img_proportional",{processor:"boolean",default:!0}),r("event_root",{processor:"string"}),r("service_message",{processor:"string"}),r("theme",{processor:t=>!1===t||T(t)||U(t),default:"silver"}),r("theme_url",{processor:"string"}),r("formats",{processor:"object"}),r("format_empty_lines",{processor:"boolean",default:!1}),r("format_noneditable_selector",{processor:"string",default:""}),r("preview_styles",{processor:t=>{let r=!1===t||T(t);return r?{value:!1===t?"":t,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),r("custom_ui_selector",{processor:"string",default:""}),r("hidden_input",{processor:"boolean",default:!0}),r("submit_patch",{processor:"boolean",default:!0}),r("encoding",{processor:"string"}),r("add_form_submit_trigger",{processor:"boolean",default:!0}),r("add_unload_trigger",{processor:"boolean",default:!0}),r("custom_undo_redo_levels",{processor:"number",default:0}),r("disable_nodechange",{processor:"boolean",default:!1}),r("readonly",{processor:"boolean",default:!1}),r("editable_root",{processor:"boolean",default:!0}),r("plugins",{processor:"string[]",default:[]}),r("external_plugins",{processor:"object"}),r("forced_plugins",{processor:"string[]"}),r("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),r("model_url",{processor:"string"}),r("block_unsupported_drop",{processor:"boolean",default:!0}),r("visual",{processor:"boolean",default:!0}),r("visual_table_class",{processor:"string",default:"mce-item-table"}),r("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),r("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),r("setup",{processor:"function"}),r("init_instance_callback",{processor:"function"}),r("url_converter",{processor:"function",default:t.convertURL}),r("url_converter_scope",{processor:"object",default:t}),r("urlconverter_callback",{processor:"function"}),r("allow_conditional_comments",{processor:"boolean",default:!1}),r("allow_html_data_urls",{processor:"boolean",default:!1}),r("allow_svg_data_urls",{processor:"boolean"}),r("allow_html_in_named_anchor",{processor:"boolean",default:!1}),r("allow_script_urls",{processor:"boolean",default:!1}),r("allow_unsafe_link_target",{processor:"boolean",default:!1}),r("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),r("fix_list_elements",{processor:"boolean",default:!1}),r("preserve_cdata",{processor:"boolean",default:!1}),r("remove_trailing_brs",{processor:"boolean",default:!0}),r("pad_empty_with_br",{processor:"boolean",default:!1}),r("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),r("element_format",{processor:"string",default:"html"}),r("entities",{processor:"string"}),r("schema",{processor:"string",default:"html5"}),r("convert_urls",{processor:"boolean",default:!0}),r("relative_urls",{processor:"boolean",default:!0}),r("remove_script_host",{processor:"boolean",default:!0}),r("custom_elements",{processor:ig}),r("extended_valid_elements",{processor:"string"}),r("invalid_elements",{processor:"string"}),r("invalid_styles",{processor:ig}),r("valid_children",{processor:"string"}),r("valid_classes",{processor:ig}),r("valid_elements",{processor:"string"}),r("valid_styles",{processor:ig}),r("verify_html",{processor:"boolean",default:!0}),r("auto_focus",{processor:t=>T(t)||!0===t}),r("browser_spellcheck",{processor:"boolean",default:!1}),r("protect",{processor:"array"}),r("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),r("deprecation_warnings",{processor:"boolean",default:!0}),r("a11y_advanced_options",{processor:"boolean",default:!1}),r("api_key",{processor:"string"}),r("license_key",{processor:"string"}),r("paste_block_drop",{processor:"boolean",default:!1}),r("paste_data_images",{processor:"boolean",default:!0}),r("paste_preprocess",{processor:"function"}),r("paste_postprocess",{processor:"function"}),r("paste_webkit_styles",{processor:"string",default:"none"}),r("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),r("paste_merge_formats",{processor:"boolean",default:!0}),r("smart_paste",{processor:"boolean",default:!0}),r("paste_as_text",{processor:"boolean",default:!1}),r("paste_tab_spaces",{processor:"number",default:4}),r("text_patterns",{processor:t=>j(t,O)||!1===t?{value:ii(!1===t?[]:t),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),r("text_patterns_lookup",{processor:t=>U(t)?{value:r=>ii(t(r)),valid:!0}:{valid:!1,message:"Must be a single function"},default:t=>[]}),r("noneditable_class",{processor:"string",default:"mceNonEditable"}),r("editable_class",{processor:"string",default:"mceEditable"}),r("noneditable_regexp",{processor:t=>j(t,iu)?{value:t,valid:!0}:iu(t)?{value:[t],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),r("table_tab_navigation",{processor:"boolean",default:!0}),r("highlight_on_focus",{processor:"boolean",default:!0}),r("xss_sanitization",{processor:"boolean",default:!0}),r("details_initial_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("details_serialized_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("init_content_sync",{processor:"boolean",default:!1}),r("newdocument_content",{processor:"string",default:""}),r("sandbox_iframes",{processor:"boolean",default:!0}),r("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),r("convert_unsafe_embeds",{processor:"boolean",default:!0}),t.on("ScriptsLoaded",()=>{r("directionality",{processor:"string",default:aP.isRtl()?"rtl":void 0}),r("placeholder",{processor:"string",default:ic.getAttrib(t.getElement(),"placeholder")})})})(this);let a=this.options.get;a("deprecation_warnings")&&(((t,r)=>{let n=bT(t),o=bP(r),a=o.length>0,l=n.length>0,i="mobile"===r.theme;(a||l||i)&&console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+(i?`

Themes:
- mobile`:"")+(a?`

Plugins:
- ${o.join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o),((t,r)=>{let n=bO(t),o=bD(r),a=o.length>0,l=n.length>0;(a||l)&&console.warn("The following deprecated features are currently enabled but will be removed soon."+(a?`

Plugins:
- ${o.map(bL).join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o));let l=a("suffix");l&&(n.suffix=l),this.suffix=n.suffix;let i=a("base_url");i&&n._setBaseUrl(i),this.baseUri=n.baseURI;let s=iz(this);s&&(aA.ScriptLoader._setReferrerPolicy(s),aN.DOM.styleSheetLoader._setReferrerPolicy(s));let d=sc(this);I(d)&&aN.DOM.styleSheetLoader._setContentCssCors(d),aD.languageLoad=a("language_load"),aD.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new hR(iv(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=st(this),this.hasVisual=sf(this),this.shortcuts=new Sf(this),this.editorCommands=new kZ(this),kY(this);let c=a("cache_suffix");c&&(tM.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:Sp(),styleSheetLoader:void 0,show:H,hide:H,setEnabled:H,isEnabled:ee},this.mode=(t=>{let r=or("design"),n=or({design:{activate:H,deactivate:H,editorReadOnly:!1},readonly:{activate:H,deactivate:H,editorReadOnly:!0}});return t.serializer?k2(t):t.on("PreInit",()=>{k2(t)}),t.on("ShowCaret",r=>{k1(t)&&r.preventDefault()}),t.on("ObjectSelected",r=>{k1(t)&&r.preventDefault()}),{isReadOnly:()=>k1(t),set:o=>((t,r,n,o)=>{if(o!==n.get()){if(!eH(r,o))throw Error(`Editor mode '${o}' is invalid`);t.initialized?Ss(t,n,r,o):t.on("init",()=>Ss(t,n,r,o))}})(t,n.get(),r,o),get:()=>r.get(),register:(t,r)=>{n.set(((t,r,n)=>{if(el(Si,r))throw Error(`Cannot override default mode ${r}`);return{...t,[r]:{...n,deactivate:()=>{try{n.deactivate()}catch(t){console.error(`problem while deactivating editor mode ${r}:`,t)}}}}})(n.get(),t,r))}}})(this),n.dispatch("SetupEditor",{editor:this});let u=sv(this);U(u)&&u.call(this,this)}render(){(t=>{let r=t.id;aP.setCode(ij(t));let n=()=>{kw.unbind(window,"ready",n),t.render()};if(!ab.Event.domLoaded)return void kw.bind(window,"ready",n);if(!t.getElement())return;let o=ru(t.getElement()),a=rt(o);t.on("remove",()=>{ec(o.dom.attributes,t=>re(o,t.name)),t6(o,a)}),t.ui.styleSheetLoader=oR.forElement(o,{contentCssCors:sc(t),referrerPolicy:iz(t)}),st(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");let l=t.getElement().form||kw.getParent(r,"form");l&&(t.formElement=l,sr(t)&&!nH(t.getElement())&&(kw.insertAfter(kw.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=r=>{t.dispatch(r.type,r)},kw.bind(l,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!sn(t)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)))),t.windowManager=bG(t),t.notificationManager=bW(t),"xml"===t.options.get("encoding")&&t.on("GetContent",t=>{t.save&&(t.content=kw.encode(t.content))}),so(t)&&t.on("submit",()=>{t.initialized&&t.save()}),sa(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),kk(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return u6(this)}translate(t){return aP.translate(t)}getParam(t,r,n){let o=this.options;return o.isRegistered(t)||(I(n)?o.register(t,{processor:n,default:r}):o.register(t,{processor:ee,default:r})),o.isSet(t)||M(r)?o.get(t):r}hasPlugin(t,r){return!(!el(su(this),t)||r&&void 0===bK.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,r,n){this.editorCommands.addCommand(t,r,n)}addQueryStateHandler(t,r,n){this.editorCommands.addQueryStateHandler(t,r,n)}addQueryValueHandler(t,r,n){this.editorCommands.addQueryValueHandler(t,r,n)}addShortcut(t,r,n,o){this.shortcuts.add(t,r,n,o)}execCommand(t,r,n,o){return this.editorCommands.execCommand(t,r,n,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Sh.show(this.getContainer()),Sh.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(Sh.hide(this.getContainer()),Sh.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,r){this.dispatch("ProgressState",{state:t,time:r})}load(t={}){let r=this.getElement();if(this.removed)return"";if(r){let n={...t,load:!0},o=nH(r)?r.value:r.innerHTML,a=this.setContent(o,n);return n.no_events||this.dispatch("LoadContent",{...n,element:r}),a}return""}save(t={}){let r=this,n=r.getElement();if(!n||!r.initialized||r.removed)return"";let o={...t,save:!0,element:n},a=r.getContent(o),l={...o,content:a};if(l.no_events||r.dispatch("SaveContent",l),"raw"===l.format&&r.dispatch("RawSaveContent",l),a=l.content,nH(n))n.value=a;else{!t.is_removing&&r.inline||(n.innerHTML=a);let o=Sh.getParent(r.id,"form");o&&Sv(o.elements,t=>t.name!==r.id||(t.value=a,!1))}return l.element=o.element=n=null,!1!==l.set_dirty&&r.setDirty(!1),a}setContent(t,r){return b_(this,t,r)}getContent(t){return((t,r={})=>{let n;return hq(t,(n=r.format?r.format:"html",{...r,format:n,get:!0,getInner:!0})).fold(W,r=>{let n=bg(t).editor.getContent(r);return hW(t,n,r)})})(this,t)}insertContent(t,r){r&&(t=Sb({content:t},r)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?b_(this,this.startContent,{format:"raw"}):b_(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){let r=!this.isNotDirty;this.isNotDirty=!t,t&&t!==r&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||Sh.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sh.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let t=this.iframeElement;t&&(this.contentWindow=t.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let t=this.getWin();t&&(this.contentDocument=t.document)}return this.contentDocument}getBody(){var t,r;let n=this.getDoc();return null!==(r=null!==(t=this.bodyElement)&&void 0!==t?t:null==n?void 0:n.body)&&void 0!==r?r:null}convertURL(t,r,n){let o=this.options.get,a=sC(this);if(U(a))return a.call(this,t,n,!0,r);if(!o("convert_urls")||"link"===n||O(n)&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length)return t;let l=new hR(t);return"http"!==l.protocol&&"https"!==l.protocol&&""!==l.protocol?t:o("relative_urls")?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,o("remove_script_host"))}addVisual(t){((t,r)=>{bf(t).editor.addVisual(r)})(this,t)}setEditableRoot(t){this._editableRoot!==t&&(this._editableRoot=t,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((t,r)=>{t.dispatch("EditableRootStateChange",{state:r})})(this,t))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){let{_selectionOverrides:r,editorUpload:n}=t,o=t.getBody(),a=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&I(null==a?void 0:a.nextSibling)&&bM.remove(a.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&o&&bM.setStyle(t.id,"display",t.orgDisplay),(t=>{t.dispatch("detach")})(t),bM.remove(t.getContainer()),bF(r),bF(n),t.destroy()}})(this)}destroy(t){((t,r)=>{let{selection:n,dom:o}=t;t.destroyed||(r||t.removed?(r||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),bF(n),bF(o)),(t=>{let r=t.formElement;r&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),bM.unbind(r,"submit reset",t.formEventDelegate))})(t),(t=>{t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let r=t.selection;if(r){let n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(t),t.destroyed=!0):t.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let SC=aN.DOM,SE=tz.each,Sw,Sx=!1,S_=[],Sk=t=>{let r=t.type;SE(SA.get(),n=>{switch(r){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},SS=t=>{if(t!==Sx){let r=aN.DOM;t?(r.bind(window,"resize",Sk),r.bind(window,"scroll",Sk)):(r.unbind(window,"resize",Sk),r.unbind(window,"scroll",Sk)),Sx=t}},SN=t=>{let r=S_;return S_=em(S_,r=>t!==r),SA.activeEditor===t&&(SA.activeEditor=S_.length>0?S_[0]:null),SA.focusedEditor===t&&(SA.focusedEditor=null),r.length!==S_.length},SR="CSS1Compat"!==document.compatMode,SA={...k4,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"1.1",releaseDate:"2024-05-22",i18n:aP,activeEditor:null,focusedEditor:null,setup(){let t="",r="",n=hR.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));let o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{let n=document.getElementsByTagName("script");for(let o=0;o<n.length;o++){let a=n[o].src||"";if(""===a)continue;let l=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==l.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){let n=document.currentScript.src;-1!==n.indexOf(".min")&&(r=".min"),t=n.substring(0,n.lastIndexOf("/"))}}this.baseURL=new hR(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new hR(this.baseURL),this.suffix=r,this.on("AddEditor",Y(u2,this)),this.on("RemoveEditor",Y(u3,this))},overrideDefaults(t){let r=t.base_url;r&&this._setBaseUrl(r);let n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;let o=t.plugin_base_urls;void 0!==o&&eP(o,(t,r)=>{aD.PluginManager.urls[r]=t})},init(t){let r;let n=this,o=tz.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=t=>{r=t},l=()=>{let r,i=0,s=[];SC.unbind(window,"ready",l),(r=>{let o=t.onpageload;o&&o.apply(n,[])})(),r=eT(tM.browser.isIE()||tM.browser.isEdge()?(b0("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):SR?(b0("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):T(t.selector)?SC.select(t.selector):I(t.target)?[t.target]:[]),tz.each(r,t=>{var r;(r=n.get(t.id))&&r.initialized&&!(r.getContainer()||r.getBody()).parentNode&&(SN(r),r.unbindAllNativeEvents(),r.destroy(!0),r.removed=!0)}),0===(r=tz.grep(r,t=>!n.get(t.id))).length?a([]):SE(r,l=>{let d;t.inline&&l.tagName.toLowerCase() in o?b0("Could not initialize inline editor on invalid inline target element",l):((t,o,l)=>{let d=new Sy(t,o,n);s.push(d),d.on("init",()=>{++i===r.length&&a(s)}),d.targetElm=d.targetElm||l,d.render()})(((d=l.id)||(d=ej(l,"name").filter(t=>!SC.get(t)).getOrThunk(SC.uniqueId),l.setAttribute("id",d)),d),t,l)})};return SC.bind(window,"ready",l),new Promise(t=>{r?t(r):a=r=>{t(r)}})},get(t){return 0==arguments.length?S_.slice(0):T(t)?eh(S_,r=>r.id===t).getOr(null):z(t)&&S_[t]?S_[t]:null},add(t){let r=this,n=r.get(t.id);return n===t||(null===n&&S_.push(t),SS(!0),r.activeEditor=t,r.dispatch("AddEditor",{editor:t}),Sw||(Sw=t=>{let n=r.dispatch("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",Sw))),t},createEditor(t,r){return this.add(new Sy(t,r,this))},remove(t){let r;let n=this;if(t){if(!T(t))return r=t,D(n.get(r.id))?null:(SN(r)&&n.dispatch("RemoveEditor",{editor:r}),0===S_.length&&window.removeEventListener("beforeunload",Sw),r.remove(),SS(S_.length>0),r);SE(SC.select(t),t=>{(r=n.get(t.id))&&n.remove(r)})}else for(let t=S_.length-1;t>=0;t--)n.remove(S_[t])},execCommand(t,r,n){var o;let a=O(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return this.get(a)||new Sy(a,n.options,this).render(),!0;case"mceRemoveEditor":{let t=this.get(a);return t&&t.remove(),!0}case"mceToggleEditor":{let t=this.get(a);return t?t.isHidden()?t.show():t.hide():this.execCommand("mceAddEditor",!1,n),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(t,r,n)},triggerSave:()=>{SE(S_,t=>{t.save()})},addI18n:(t,r)=>{aP.add(t,r)},translate:t=>aP.translate(t),setActive(t){let r=this.activeEditor;this.activeEditor!==t&&(r&&r.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:r})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new hR(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new hR(this.baseURL)}};SA.setup();let ST=(()=>{let t=oo();return{FakeClipboardItem:t=>({items:t,types:eO(t),getType:r=>ej(t,r).getOrUndefined()}),write:r=>{t.set(r)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),SO=Math.min,SB=Math.max,SP=Math.round,SD=(t,r,n)=>{let o=r.x,a=r.y,l=t.w,i=t.h,s=r.w,d=r.h,c=(n||"").split("");return"b"===c[0]&&(a+=d),"r"===c[1]&&(o+=s),"c"===c[0]&&(a+=SP(d/2)),"c"===c[1]&&(o+=SP(s/2)),"b"===c[3]&&(a-=i),"r"===c[4]&&(o-=l),"c"===c[3]&&(a-=SP(i/2)),"c"===c[4]&&(o-=SP(l/2)),SL(o,a,l,i)},SL=(t,r,n,o)=>({x:t,y:r,w:n,h:o}),SM=(()=>{let t={},r={},n={};return{load:(n,o)=>{let a=`Script at URL "${o}" failed to load`,l=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{let i=new Promise((t,i)=>{let s=((t,r,n=1e3)=>{let o=!1,a=null,l=t=>(...r)=>{o||(o=!0,null!==a&&(clearTimeout(a),a=null),t.apply(null,r))},i=l(t),s=l(r);return{start:(...t)=>{o||null!==a||(a=setTimeout(()=>s.apply(null,t),n))},resolve:i,reject:s}})(t,i);r[n]=s.resolve,aA.ScriptLoader.loadScript(o).then(()=>s.start(l),()=>s.reject(a))});return t[n]=i,i}},add:(o,a)=>{void 0!==r[o]&&(r[o](a),delete r[o]),t[o]=Promise.resolve(a),n[o]=a},has:t=>t in n,get:t=>n[t],unload:r=>{delete t[r],delete n[r]}}})();try{let t="__storage_test__";(n=window.localStorage).setItem(t,t),n.removeItem(t)}catch(t){n=(()=>{let t={},r=[],n={getItem:r=>t[r]||null,setItem:(n,o)=>{r.push(n),t[n]=String(o)},key:t=>r[t],removeItem:n=>{r=r.filter(t=>t===n),delete t[n]},clear:()=>{r=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>r.length,configurable:!1,enumerable:!1}),n})()}let SF={geom:{Rect:{inflate:(t,r,n)=>SL(t.x-r,t.y-n,t.w+2*r,t.h+2*n),relativePosition:SD,findBestRelativePosition:(t,r,n,o)=>{for(let a=0;a<o.length;a++){let l=SD(t,r,o[a]);if(l.x>=n.x&&l.x+l.w<=n.w+n.x&&l.y>=n.y&&l.y+l.h<=n.h+n.y)return o[a]}return null},intersect:(t,r)=>{let n=SB(t.x,r.x),o=SB(t.y,r.y),a=SO(t.x+t.w,r.x+r.w),l=SO(t.y+t.h,r.y+r.h);return a-n<0||l-o<0?null:SL(n,o,a-n,l-o)},clamp:(t,r,n)=>{let o=t.x,a=t.y,l=t.x+t.w,i=t.y+t.h,s=r.x+r.w,d=r.y+r.h,c=SB(0,r.x-o),u=SB(0,r.y-a),m=SB(0,l-s),g=SB(0,i-d);return o+=c,a+=u,n&&(l+=c,i+=u,o-=m,a-=g),SL(o,a,(l-=m)-o,(i-=g)-a)},create:SL,fromClientRect:t=>SL(t.left,t.top,t.width,t.height)}},util:{Delay:uZ,Tools:tz,VK:cX,URI:hR,EventDispatcher:k5,Observable:k4,I18n:aP,LocalStorage:n,ImageUploader:t=>{let r=b9(t,b8());return{upload:(n,o=!0)=>r.upload(n,o?b4(t):void 0)}}},dom:{EventUtils:ab,TreeWalker:nS,TextSeeker:a0,DOMUtils:aN,ScriptLoader:aA,RangeUtils:uv,Serializer:bx,StyleSheetLoader:oN,ControlSelection:c1,BookmarkManager:cj,Selection:bC,Event:ab.Event},html:{Styles:as,Entities:oq,Node:md,Schema:o9,DomParser:hH,Writer:mN,Serializer:mR},Env:tM,AddOnManager:aD,Annotator:cz,Formatter:vd,UndoManager:vu,EditorCommands:kZ,WindowManager:bG,NotificationManager:bW,EditorObservable:Sr,Shortcuts:Sf,Editor:Sy,FocusManager:uX,EditorManager:SA,DOM:aN.DOM,ScriptLoader:aA.ScriptLoader,PluginManager:bK,ThemeManager:bY,ModelManager:bU,IconManager:bI,Resource:SM,FakeClipboard:ST,trim:tz.trim,isArray:tz.isArray,is:tz.is,toArray:tz.toArray,makeMap:tz.makeMap,each:tz.each,map:tz.map,grep:tz.grep,inArray:tz.inArray,extend:tz.extend,walk:tz.walk,resolve:tz.resolve,explode:tz.explode,_addCacheSuffix:tz._addCacheSuffix},SI=tz.extend(SA,SF);window.tinymce=SI,window.tinyMCE=SI,(t=>{if("object"==typeof module)try{module.exports=t}catch(t){}})(SI)}();