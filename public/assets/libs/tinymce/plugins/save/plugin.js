!function(){"use strict";let e;var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let n=(e="function",t=>typeof t===e);var o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=tinymce.util.Tools.resolve("tinymce.util.Tools");let i=e=>t=>t.options.get(e),l=e=>{let t=e.options.register;t("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"})},r=i("save_enablewhendirty"),c=i("save_onsavecallback"),s=i("save_oncancelcallback"),d=(e,t)=>{e.notificationManager.open({text:t,type:"error"})},m=e=>{let t=o.DOM.getParent(e.id,"form");if(r(e)&&!e.isDirty())return;e.save();let a=c(e);if(n(a)){a.call(e,e),e.nodeChanged();return}t?(e.setDirty(!1),(!t.onsubmit||t.onsubmit())&&("function"==typeof t.submit?t.submit():d(e,"Error: Form submit field collision.")),e.nodeChanged()):d(e,"Error: No form element found.")},u=e=>{let t=a.trim(e.startContent),o=s(e);if(n(o)){o.call(e,e);return}e.resetContent(t)},v=e=>{e.addCommand("mceSave",()=>{m(e)}),e.addCommand("mceCancel",()=>{u(e)})},f=e=>t=>{let n=()=>{t.setEnabled(!r(e)||e.isDirty())};return n(),e.on("NodeChange dirty",n),()=>e.off("NodeChange dirty",n)},y=e=>{e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>e.execCommand("mceSave"),onSetup:f(e),shortcut:"Meta+S"}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>e.execCommand("mceCancel"),onSetup:f(e)}),e.addShortcut("Meta+S","","mceSave")};t.add("save",e=>{l(e),y(e),v(e)})}();