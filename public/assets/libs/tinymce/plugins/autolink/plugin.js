!function(){"use strict";let e,t;var n=tinymce.util.Tools.resolve("tinymce.PluginManager");let r=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,o=e=>t=>t.options.get(e),l=e=>{let t=e.options.register;t("autolink_pattern",{processor:"regexp",default:RegExp("^"+r().source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})},a=o("autolink_pattern"),i=o("link_default_target"),s=o("link_default_protocol"),d=o("allow_unsafe_link_target"),u=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},c=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&u(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},g=(e="string",t=>c(t)===e),f=(t=void 0,e=>t===e),k=e=>null==e,p=e=>!k(e),m=e=>t=>!e(t),y=Object.hasOwnProperty,h=(e,t)=>y.call(e,t),w=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,v=(e,t,n=0,r)=>{let o=e.indexOf(t,n);return -1!==o&&(!!f(r)||o+t.length<=r)},_=(e,t)=>w(e,t,0),A=e=>"\uFEFF"===e,C=e=>e.replace(/\uFEFF/g,"");var b=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");let E=e=>3===e.nodeType,$=e=>1===e.nodeType,x=e=>/^[(\[{ \u00a0]$/.test(e),P=e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e),z=e=>/[?!,.;:]/.test(e),F=(e,t,n)=>{for(let r=t-1;r>=0;r--){let t=e.charAt(r);if(!A(t)&&n(t))return r}return -1},N=(e,t)=>{let n=e,r=t;for(;$(n)&&n.childNodes[r];)r=E(n=n.childNodes[r])?n.data.length:n.childNodes.length;return{container:n,offset:r}},T=(e,t)=>{var n;let r=e.schema.getVoidElements(),o=a(e),{dom:l,selection:i}=e;if(null!==l.getParent(i.getNode(),"a[href]"))return null;let d=i.getRng(),u=b(l,e=>l.isBlock(e)||h(r,e.nodeName.toLowerCase())||"false"===l.getContentEditable(e)),{container:c,offset:g}=N(d.endContainer,d.endOffset),f=null!==(n=l.getParent(c,l.isBlock))&&void 0!==n?n:l.getRoot(),k=u.backwards(c,g+t,(e,t)=>{let n=e.data,r=F(n,t,m(x));return -1===r||z(n[r])?r:r+1},f);if(!k)return null;let p=k.container,y=u.backwards(k.container,k.offset,(e,t)=>{p=e;let n=F(e.data,t,x);return -1===n?n:n+1},f),w=l.createRng();y?w.setStart(y.container,y.offset):w.setStart(p,0),w.setEnd(k.container,k.offset);let A=C(w.toString()).match(o);if(!A)return null;{let t=A[0];return _(t,"www.")?t=s(e)+"://"+t:v(t,"@")&&!P(t)&&(t="mailto:"+t),{rng:w,url:t}}},Z=(e,t)=>{let{dom:n,selection:r}=e,{rng:o,url:l}=t,a=r.getBookmark();r.setRng(o);let s="createlink",u={command:s,ui:!1,value:l};if(!e.dispatch("BeforeExecCommand",u).isDefaultPrevented()){e.getDoc().execCommand(s,!1,l),e.dispatch("ExecCommand",u);let t=i(e);if(g(t)){let o=r.getNode();n.setAttrib(o,"target",t),"_blank"!==t||d(e)||n.setAttrib(o,"rel","noopener")}}r.moveToBookmark(a),e.nodeChanged()},B=e=>{let t=T(e,-1);p(t)&&Z(e,t)},O=e=>{let t=T(e,0);p(t)&&Z(e,t)},R=e=>{e.on("keydown",t=>{13!==t.keyCode||t.isDefaultPrevented()||O(e)}),e.on("keyup",t=>{32===t.keyCode?B(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&B(e)})};n.add("autolink",e=>{l(e),R(e)})}();