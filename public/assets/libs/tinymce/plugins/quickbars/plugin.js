!function(){"use strict";let e;var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let r=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},o=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&r(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},i=e=>t=>typeof t===e,n=(e="string",t=>o(t)===e),a=i("boolean"),l=e=>null==e,s=e=>!l(e),u=i("function"),c=e=>t=>t.options.get(e),d=e=>{let t=e.options.register,r=e=>t=>{let r=a(t)||n(t);return r?a(t)?{value:t?e:"",valid:r}:{value:t.trim(),valid:r}:{valid:!1,message:"Must be a boolean or string."}},o="bold italic | quicklink h2 h3 blockquote";t("quickbars_selection_toolbar",{processor:r(o),default:o});let i="quickimage quicktable";t("quickbars_insert_toolbar",{processor:r(i),default:i});let l="alignleft aligncenter alignright";t("quickbars_image_toolbar",{processor:r(l),default:l})},m=c("quickbars_selection_toolbar"),h=c("quickbars_insert_toolbar"),g=c("quickbars_image_toolbar"),b=0,p=e=>{let t=new Date().getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++b+String(t)},f=(e,t,r)=>{e.execCommand("mceInsertTable",!1,{rows:r,columns:t})},v=(e,t,r)=>{let o=e.editorUpload.blobCache,i=o.create(p("mceu"),r,t);o.add(i),e.insertContent(e.dom.createHTML("img",{src:i.blobUri()}))},y=e=>new Promise(t=>{let r=new FileReader;r.onloadend=()=>{t(r.result.split(",")[1])},r.readAsDataURL(e)});var k=tinymce.util.Tools.resolve("tinymce.util.Delay");let w=e=>new Promise(t=>{let r=!1,o=document.createElement("input");o.type="file",o.accept="image/*",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.opacity="0.001",document.body.appendChild(o);let i=e=>{var i;r||(null===(i=o.parentNode)||void 0===i||i.removeChild(o),r=!0,t(e))},n=e=>{i(Array.prototype.slice.call(e.target.files))};o.addEventListener("input",n),o.addEventListener("change",n);let a=t=>{let o=()=>{i([])};r||("focusin"===t.type?k.setEditorTimeout(e,o,1e3):o()),e.off("focusin remove",a)};e.on("focusin remove",a),o.click()}),q=e=>{e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{w(e).then(t=>{if(t.length>0){let r=t[0];y(r).then(t=>{v(e,t,r)})}})}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{f(e,2,2)}})},N=()=>!1;class T{constructor(e,t){this.tag=e,this.value=t}static some(e){return new T(!0,e)}static none(){return T.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?T.some(e(this.value)):T.none()}bind(e){return this.tag?e(this.value):T.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:T.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?T.some(e):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1),"undefined"!=typeof window?window:Function("return this;")();let _=e=>e.dom.nodeName.toLowerCase(),E=(e,t)=>{let r=e.dom;return!!r&&!!r.hasAttribute&&r.hasAttribute(t)};var M=(e,t,r,o,i)=>e(r,o)?T.some(r):u(i)&&i(r)?T.none():t(r,o,i);let C={fromDom:e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}}},S=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},A=(e,t,r)=>{let o=e.dom,i=u(r)?r:N;for(;o.parentNode;){o=o.parentNode;let e=C.fromDom(o);if(t(e))return T.some(e);if(i(e))break}return T.none()},D=(e,t,r)=>M((e,t)=>t(e),A,e,t,r),x=(e,t,r)=>D(e,t,r).isSome(),L=(e,t,r)=>A(e,e=>S(e,t),r),O=(e,t,r)=>M((e,t)=>S(e,t),L,e,t,r),B=e=>{let t=h(e);t.length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:t=>{let r=C.fromDom(t),o=e.schema.getTextBlockElements(),i=t=>t.dom===e.getBody();return!E(r,"data-mce-bogus")&&O(r,'table,[data-mce-bogus="all"]',i).fold(()=>x(r,t=>_(t) in o&&e.dom.isEmpty(t.dom),i),N)},items:t,position:"line",scope:"editor"})},I=e=>void 0!==e.dom.classList,U=(e,t)=>I(e)&&e.dom.classList.contains(t),P=e=>{let t=t=>e.dom.isEditable(t),r=e=>t(e.parentElement),o=e=>{let t="FIGURE"===e.nodeName&&/image/i.test(e.className),o="IMG"===e.nodeName||t,i=U(C.fromDom(e),"mce-pagebreak");return o&&r(e)&&!i},i=g(e);i.length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:o,items:i,position:"node"});let n=m(e);n.length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:r=>!o(r)&&!e.selection.isCollapsed()&&t(r),items:n,position:"selection",scope:"editor"})};t.add("quickbars",e=>{d(e),q(e),B(e),P(e)})}();